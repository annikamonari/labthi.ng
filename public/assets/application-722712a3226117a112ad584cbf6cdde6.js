function doBounce(t,e,n){for(var i=0;40>i;i++)t.animate({marginTop:"-="+e},n).animate({marginTop:"+="+e},n)}!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e=t.length,n=oe.type(t);return"function"===n||oe.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t}function i(t,e,n){if(oe.isFunction(e))return oe.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return oe.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(he.test(e))return oe.filter(e,t,n);e=oe.filter(e,t)}return oe.grep(t,function(t){return oe.inArray(t,e)>=0!==n})}function o(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function r(t){var e=we[t]={};return oe.each(t.match(be)||[],function(t,n){e[n]=!0}),e}function s(){pe.addEventListener?(pe.removeEventListener("DOMContentLoaded",a,!1),t.removeEventListener("load",a,!1)):(pe.detachEvent("onreadystatechange",a),t.detachEvent("onload",a))}function a(){(pe.addEventListener||"load"===event.type||"complete"===pe.readyState)&&(s(),oe.ready())}function l(t,e,n){if(void 0===n&&1===t.nodeType){var i="data-"+e.replace(Te,"-$1").toLowerCase();if(n=t.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:Ne.test(n)?oe.parseJSON(n):n}catch(o){}oe.data(t,e,n)}else n=void 0}return n}function c(t){var e;for(e in t)if(("data"!==e||!oe.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function u(t,e,n,i){if(oe.acceptData(t)){var o,r,s=oe.expando,a=t.nodeType,l=a?oe.cache:t,c=a?t[s]:t[s]&&s;if(c&&l[c]&&(i||l[c].data)||void 0!==n||"string"!=typeof e)return c||(c=a?t[s]=G.pop()||oe.guid++:s),l[c]||(l[c]=a?{}:{toJSON:oe.noop}),("object"==typeof e||"function"==typeof e)&&(i?l[c]=oe.extend(l[c],e):l[c].data=oe.extend(l[c].data,e)),r=l[c],i||(r.data||(r.data={}),r=r.data),void 0!==n&&(r[oe.camelCase(e)]=n),"string"==typeof e?(o=r[e],null==o&&(o=r[oe.camelCase(e)])):o=r,o}}function d(t,e,n){if(oe.acceptData(t)){var i,o,r=t.nodeType,s=r?oe.cache:t,a=r?t[oe.expando]:oe.expando;if(s[a]){if(e&&(i=n?s[a]:s[a].data)){oe.isArray(e)?e=e.concat(oe.map(e,oe.camelCase)):e in i?e=[e]:(e=oe.camelCase(e),e=e in i?[e]:e.split(" ")),o=e.length;for(;o--;)delete i[e[o]];if(n?!c(i):!oe.isEmptyObject(i))return}(n||(delete s[a].data,c(s[a])))&&(r?oe.cleanData([t],!0):ne.deleteExpando||s!=s.window?delete s[a]:s[a]=null)}}}function h(){return!0}function f(){return!1}function p(){try{return pe.activeElement}catch(t){}}function m(t){var e=Fe.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}function g(t,e){var n,i,o=0,r=typeof t.getElementsByTagName!==Ee?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==Ee?t.querySelectorAll(e||"*"):void 0;if(!r)for(r=[],n=t.childNodes||t;null!=(i=n[o]);o++)!e||oe.nodeName(i,e)?r.push(i):oe.merge(r,g(i,e));return void 0===e||e&&oe.nodeName(t,e)?oe.merge([t],r):r}function y(t){Re.test(t.type)&&(t.defaultChecked=t.checked)}function v(t,e){return oe.nodeName(t,"table")&&oe.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function b(t){return t.type=(null!==oe.find.attr(t,"type"))+"/"+t.type,t}function w(t){var e=Xe.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function C(t,e){for(var n,i=0;null!=(n=t[i]);i++)oe._data(n,"globalEval",!e||oe._data(e[i],"globalEval"))}function x(t,e){if(1===e.nodeType&&oe.hasData(t)){var n,i,o,r=oe._data(t),s=oe._data(e,r),a=r.events;if(a){delete s.handle,s.events={};for(n in a)for(i=0,o=a[n].length;o>i;i++)oe.event.add(e,n,a[n][i])}s.data&&(s.data=oe.extend({},s.data))}}function E(t,e){var n,i,o;if(1===e.nodeType){if(n=e.nodeName.toLowerCase(),!ne.noCloneEvent&&e[oe.expando]){o=oe._data(e);for(i in o.events)oe.removeEvent(e,i,o.handle);e.removeAttribute(oe.expando)}"script"===n&&e.text!==t.text?(b(e).text=t.text,w(e)):"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),ne.html5Clone&&t.innerHTML&&!oe.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&Re.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}}function N(e,n){var i,o=oe(n.createElement(e)).appendTo(n.body),r=t.getDefaultComputedStyle&&(i=t.getDefaultComputedStyle(o[0]))?i.display:oe.css(o[0],"display");return o.detach(),r}function T(t){var e=pe,n=Ze[t];return n||(n=N(t,e),"none"!==n&&n||(Qe=(Qe||oe("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=(Qe[0].contentWindow||Qe[0].contentDocument).document,e.write(),e.close(),n=N(t,e),Qe.detach()),Ze[t]=n),n}function _(t,e){return{get:function(){var n=t();if(null!=n)return n?void delete this.get:(this.get=e).apply(this,arguments)}}}function S(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,o=fn.length;o--;)if(e=fn[o]+n,e in t)return e;return i}function k(t,e){for(var n,i,o,r=[],s=0,a=t.length;a>s;s++)i=t[s],i.style&&(r[s]=oe._data(i,"olddisplay"),n=i.style.display,e?(r[s]||"none"!==n||(i.style.display=""),""===i.style.display&&ke(i)&&(r[s]=oe._data(i,"olddisplay",T(i.nodeName)))):(o=ke(i),(n&&"none"!==n||!o)&&oe._data(i,"olddisplay",o?n:oe.css(i,"display"))));for(s=0;a>s;s++)i=t[s],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?r[s]||"":"none"));return t}function A(t,e,n){var i=cn.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function R(t,e,n,i,o){for(var r=n===(i?"border":"content")?4:"width"===e?1:0,s=0;4>r;r+=2)"margin"===n&&(s+=oe.css(t,n+Se[r],!0,o)),i?("content"===n&&(s-=oe.css(t,"padding"+Se[r],!0,o)),"margin"!==n&&(s-=oe.css(t,"border"+Se[r]+"Width",!0,o))):(s+=oe.css(t,"padding"+Se[r],!0,o),"padding"!==n&&(s+=oe.css(t,"border"+Se[r]+"Width",!0,o)));return s}function $(t,e,n){var i=!0,o="width"===e?t.offsetWidth:t.offsetHeight,r=tn(t),s=ne.boxSizing&&"border-box"===oe.css(t,"boxSizing",!1,r);if(0>=o||null==o){if(o=en(t,e,r),(0>o||null==o)&&(o=t.style[e]),on.test(o))return o;i=s&&(ne.boxSizingReliable()||o===t.style[e]),o=parseFloat(o)||0}return o+R(t,e,n||(s?"border":"content"),i,r)+"px"}function D(t,e,n,i,o){return new D.prototype.init(t,e,n,i,o)}function O(){return setTimeout(function(){pn=void 0}),pn=oe.now()}function L(t,e){var n,i={height:t},o=0;for(e=e?1:0;4>o;o+=2-e)n=Se[o],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function I(t,e,n){for(var i,o=(wn[e]||[]).concat(wn["*"]),r=0,s=o.length;s>r;r++)if(i=o[r].call(n,e,t))return i}function F(t,e,n){var i,o,r,s,a,l,c,u,d=this,h={},f=t.style,p=t.nodeType&&ke(t),m=oe._data(t,"fxshow");n.queue||(a=oe._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,oe.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],c=oe.css(t,"display"),u="none"===c?oe._data(t,"olddisplay")||T(t.nodeName):c,"inline"===u&&"none"===oe.css(t,"float")&&(ne.inlineBlockNeedsLayout&&"inline"!==T(t.nodeName)?f.zoom=1:f.display="inline-block")),n.overflow&&(f.overflow="hidden",ne.shrinkWrapBlocks()||d.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(i in e)if(o=e[i],gn.exec(o)){if(delete e[i],r=r||"toggle"===o,o===(p?"hide":"show")){if("show"!==o||!m||void 0===m[i])continue;p=!0}h[i]=m&&m[i]||oe.style(t,i)}else c=void 0;if(oe.isEmptyObject(h))"inline"===("none"===c?T(t.nodeName):c)&&(f.display=c);else{m?"hidden"in m&&(p=m.hidden):m=oe._data(t,"fxshow",{}),r&&(m.hidden=!p),p?oe(t).show():d.done(function(){oe(t).hide()}),d.done(function(){var e;oe._removeData(t,"fxshow");for(e in h)oe.style(t,e,h[e])});for(i in h)s=I(p?m[i]:0,i,d),i in m||(m[i]=s.start,p&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}}function H(t,e){var n,i,o,r,s;for(n in t)if(i=oe.camelCase(n),o=e[i],r=t[n],oe.isArray(r)&&(o=r[1],r=t[n]=r[0]),n!==i&&(t[i]=r,delete t[n]),s=oe.cssHooks[i],s&&"expand"in s){r=s.expand(r),delete t[i];for(n in r)n in t||(t[n]=r[n],e[n]=o)}else e[i]=o}function P(t,e,n){var i,o,r=0,s=bn.length,a=oe.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=pn||O(),n=Math.max(0,c.startTime+c.duration-e),i=n/c.duration||0,r=1-i,s=0,l=c.tweens.length;l>s;s++)c.tweens[s].run(r);return a.notifyWith(t,[c,r,n]),1>r&&l?n:(a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:oe.extend({},e),opts:oe.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:pn||O(),duration:n.duration,tweens:[],createTween:function(e,n){var i=oe.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(i),i},stop:function(e){var n=0,i=e?c.tweens.length:0;if(o)return this;for(o=!0;i>n;n++)c.tweens[n].run(1);return e?a.resolveWith(t,[c,e]):a.rejectWith(t,[c,e]),this}}),u=c.props;for(H(u,c.opts.specialEasing);s>r;r++)if(i=bn[r].call(c,t,u,c.opts))return i;return oe.map(u,I,c),oe.isFunction(c.opts.start)&&c.opts.start.call(t,c),oe.fx.timer(oe.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function B(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,o=0,r=e.toLowerCase().match(be)||[];if(oe.isFunction(n))for(;i=r[o++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function j(t,e,n,i){function o(a){var l;return r[a]=!0,oe.each(t[a]||[],function(t,a){var c=a(e,n,i);return"string"!=typeof c||s||r[c]?s?!(l=c):void 0:(e.dataTypes.unshift(c),o(c),!1)}),l}var r={},s=t===Wn;return o(e.dataTypes[0])||!r["*"]&&o("*")}function M(t,e){var n,i,o=oe.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((o[i]?t:n||(n={}))[i]=e[i]);return n&&oe.extend(!0,t,n),t}function q(t,e,n){for(var i,o,r,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===o&&(o=t.mimeType||e.getResponseHeader("Content-Type"));if(o)for(s in a)if(a[s]&&a[s].test(o)){l.unshift(s);break}if(l[0]in n)r=l[0];else{for(s in n){if(!l[0]||t.converters[s+" "+l[0]]){r=s;break}i||(i=s)}r=r||i}return r?(r!==l[0]&&l.unshift(r),n[r]):void 0}function U(t,e,n,i){var o,r,s,a,l,c={},u=t.dataTypes.slice();if(u[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(r=u.shift();r;)if(t.responseFields[r]&&(n[t.responseFields[r]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(s=c[l+" "+r]||c["* "+r],!s)for(o in c)if(a=o.split(" "),a[1]===r&&(s=c[l+" "+a[0]]||c["* "+a[0]])){s===!0?s=c[o]:c[o]!==!0&&(r=a[0],u.unshift(a[1]));break}if(s!==!0)if(s&&t["throws"])e=s(e);else try{e=s(e)}catch(d){return{state:"parsererror",error:s?d:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}function W(t,e,n,i){var o;if(oe.isArray(e))oe.each(e,function(e,o){n||Gn.test(t)?i(t,o):W(t+"["+("object"==typeof o?e:"")+"]",o,n,i)});else if(n||"object"!==oe.type(e))i(t,e);else for(o in e)W(t+"["+o+"]",e[o],n,i)}function z(){try{return new t.XMLHttpRequest}catch(e){}}function V(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function X(t){return oe.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var G=[],K=G.slice,Y=G.concat,J=G.push,Q=G.indexOf,Z={},te=Z.toString,ee=Z.hasOwnProperty,ne={},ie="1.11.1",oe=function(t,e){return new oe.fn.init(t,e)},re=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,se=/^-ms-/,ae=/-([\da-z])/gi,le=function(t,e){return e.toUpperCase()};oe.fn=oe.prototype={jquery:ie,constructor:oe,selector:"",length:0,toArray:function(){return K.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:K.call(this)},pushStack:function(t){var e=oe.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return oe.each(this,t,e)},map:function(t){return this.pushStack(oe.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(K.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:J,sort:G.sort,splice:G.splice},oe.extend=oe.fn.extend=function(){var t,e,n,i,o,r,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||oe.isFunction(s)||(s={}),a===l&&(s=this,a--);l>a;a++)if(null!=(o=arguments[a]))for(i in o)t=s[i],n=o[i],s!==n&&(c&&n&&(oe.isPlainObject(n)||(e=oe.isArray(n)))?(e?(e=!1,r=t&&oe.isArray(t)?t:[]):r=t&&oe.isPlainObject(t)?t:{},s[i]=oe.extend(c,r,n)):void 0!==n&&(s[i]=n));return s},oe.extend({expando:"jQuery"+(ie+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===oe.type(t)},isArray:Array.isArray||function(t){return"array"===oe.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!oe.isArray(t)&&t-parseFloat(t)>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==oe.type(t)||t.nodeType||oe.isWindow(t))return!1;try{if(t.constructor&&!ee.call(t,"constructor")&&!ee.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(ne.ownLast)for(e in t)return ee.call(t,e);for(e in t);return void 0===e||ee.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?Z[te.call(t)]||"object":typeof t},globalEval:function(e){e&&oe.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(se,"ms-").replace(ae,le)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var o,r=0,s=t.length,a=n(t);if(i){if(a)for(;s>r&&(o=e.apply(t[r],i),o!==!1);r++);else for(r in t)if(o=e.apply(t[r],i),o===!1)break}else if(a)for(;s>r&&(o=e.call(t[r],r,t[r]),o!==!1);r++);else for(r in t)if(o=e.call(t[r],r,t[r]),o===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(re,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?oe.merge(i,"string"==typeof t?[t]:t):J.call(i,t)),i},inArray:function(t,e,n){var i;if(e){if(Q)return Q.call(e,t,n);for(i=e.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,e){for(var n=+e.length,i=0,o=t.length;n>i;)t[o++]=e[i++];if(n!==n)for(;void 0!==e[i];)t[o++]=e[i++];return t.length=o,t},grep:function(t,e,n){for(var i,o=[],r=0,s=t.length,a=!n;s>r;r++)i=!e(t[r],r),i!==a&&o.push(t[r]);return o},map:function(t,e,i){var o,r=0,s=t.length,a=n(t),l=[];if(a)for(;s>r;r++)o=e(t[r],r,i),null!=o&&l.push(o);else for(r in t)o=e(t[r],r,i),null!=o&&l.push(o);return Y.apply([],l)},guid:1,proxy:function(t,e){var n,i,o;return"string"==typeof e&&(o=t[e],e=t,t=o),oe.isFunction(t)?(n=K.call(arguments,2),i=function(){return t.apply(e||this,n.concat(K.call(arguments)))},i.guid=t.guid=t.guid||oe.guid++,i):void 0},now:function(){return+new Date},support:ne}),oe.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Z["[object "+e+"]"]=e.toLowerCase()});var ce=function(t){function e(t,e,n,i){var o,r,s,a,l,c,d,f,p,m;if((e?e.ownerDocument||e:j)!==D&&$(e),e=e||D,n=n||[],!t||"string"!=typeof t)return n;if(1!==(a=e.nodeType)&&9!==a)return[];if(L&&!i){if(o=ve.exec(t))if(s=o[1]){if(9===a){if(r=e.getElementById(s),!r||!r.parentNode)return n;if(r.id===s)return n.push(r),n}else if(e.ownerDocument&&(r=e.ownerDocument.getElementById(s))&&P(e,r)&&r.id===s)return n.push(r),n}else{if(o[2])return Z.apply(n,e.getElementsByTagName(t)),n;if((s=o[3])&&C.getElementsByClassName&&e.getElementsByClassName)return Z.apply(n,e.getElementsByClassName(s)),n}if(C.qsa&&(!I||!I.test(t))){if(f=d=B,p=e,m=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(c=T(t),(d=e.getAttribute("id"))?f=d.replace(we,"\\$&"):e.setAttribute("id",f),f="[id='"+f+"'] ",l=c.length;l--;)c[l]=f+h(c[l]);p=be.test(t)&&u(e.parentNode)||e,m=c.join(",")}if(m)try{return Z.apply(n,p.querySelectorAll(m)),n}catch(g){}finally{d||e.removeAttribute("id")}}}return S(t.replace(le,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>x.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[B]=!0,t}function o(t){var e=D.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function r(t,e){for(var n=t.split("|"),i=t.length;i--;)x.attrHandle[n[i]]=e}function s(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||G)-(~t.sourceIndex||G);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function a(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function l(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function c(t){return i(function(e){return e=+e,i(function(n,i){for(var o,r=t([],n.length,e),s=r.length;s--;)n[o=r[s]]&&(n[o]=!(i[o]=n[o]))})})}function u(t){return t&&typeof t.getElementsByTagName!==X&&t}function d(){}function h(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function f(t,e,n){var i=e.dir,o=n&&"parentNode"===i,r=q++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,r)}:function(e,n,s){var a,l,c=[M,r];if(s){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,s))return!0}else for(;e=e[i];)if(1===e.nodeType||o){if(l=e[B]||(e[B]={}),(a=l[i])&&a[0]===M&&a[1]===r)return c[2]=a[2];if(l[i]=c,c[2]=t(e,n,s))return!0}}}function p(t){return t.length>1?function(e,n,i){for(var o=t.length;o--;)if(!t[o](e,n,i))return!1;return!0}:t[0]}function m(t,n,i){for(var o=0,r=n.length;r>o;o++)e(t,n[o],i);return i}function g(t,e,n,i,o){for(var r,s=[],a=0,l=t.length,c=null!=e;l>a;a++)(r=t[a])&&(!n||n(r,i,o))&&(s.push(r),c&&e.push(a));return s}function y(t,e,n,o,r,s){return o&&!o[B]&&(o=y(o)),r&&!r[B]&&(r=y(r,s)),i(function(i,s,a,l){var c,u,d,h=[],f=[],p=s.length,y=i||m(e||"*",a.nodeType?[a]:a,[]),v=!t||!i&&e?y:g(y,h,t,a,l),b=n?r||(i?t:p||o)?[]:s:v;if(n&&n(v,b,a,l),o)for(c=g(b,f),o(c,[],a,l),u=c.length;u--;)(d=c[u])&&(b[f[u]]=!(v[f[u]]=d));if(i){if(r||t){if(r){for(c=[],u=b.length;u--;)(d=b[u])&&c.push(v[u]=d);r(null,b=[],c,l)}for(u=b.length;u--;)(d=b[u])&&(c=r?ee.call(i,d):h[u])>-1&&(i[c]=!(s[c]=d))}}else b=g(b===s?b.splice(p,b.length):b),r?r(null,s,b,l):Z.apply(s,b)})}function v(t){for(var e,n,i,o=t.length,r=x.relative[t[0].type],s=r||x.relative[" "],a=r?1:0,l=f(function(t){return t===e},s,!0),c=f(function(t){return ee.call(e,t)>-1},s,!0),u=[function(t,n,i){return!r&&(i||n!==k)||((e=n).nodeType?l(t,n,i):c(t,n,i))}];o>a;a++)if(n=x.relative[t[a].type])u=[f(p(u),n)];else{if(n=x.filter[t[a].type].apply(null,t[a].matches),n[B]){for(i=++a;o>i&&!x.relative[t[i].type];i++);return y(a>1&&p(u),a>1&&h(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(le,"$1"),n,i>a&&v(t.slice(a,i)),o>i&&v(t=t.slice(i)),o>i&&h(t))}u.push(n)}return p(u)}function b(t,n){var o=n.length>0,r=t.length>0,s=function(i,s,a,l,c){var u,d,h,f=0,p="0",m=i&&[],y=[],v=k,b=i||r&&x.find.TAG("*",c),w=M+=null==v?1:Math.random()||.1,C=b.length;for(c&&(k=s!==D&&s);p!==C&&null!=(u=b[p]);p++){if(r&&u){for(d=0;h=t[d++];)if(h(u,s,a)){l.push(u);break}c&&(M=w)}o&&((u=!h&&u)&&f--,i&&m.push(u))}if(f+=p,o&&p!==f){for(d=0;h=n[d++];)h(m,y,s,a);if(i){if(f>0)for(;p--;)m[p]||y[p]||(y[p]=J.call(l));y=g(y)}Z.apply(l,y),c&&!i&&y.length>0&&f+n.length>1&&e.uniqueSort(l)}return c&&(M=w,k=v),m};return o?i(s):s}var w,C,x,E,N,T,_,S,k,A,R,$,D,O,L,I,F,H,P,B="sizzle"+-new Date,j=t.document,M=0,q=0,U=n(),W=n(),z=n(),V=function(t,e){return t===e&&(R=!0),0},X="undefined",G=1<<31,K={}.hasOwnProperty,Y=[],J=Y.pop,Q=Y.push,Z=Y.push,te=Y.slice,ee=Y.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},ne="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ie="[\\x20\\t\\r\\n\\f]",oe="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re=oe.replace("w","w#"),se="\\["+ie+"*("+oe+")(?:"+ie+"*([*^$|!~]?=)"+ie+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+ie+"*\\]",ae=":("+oe+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+se+")*)|.*)\\)|)",le=new RegExp("^"+ie+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ie+"+$","g"),ce=new RegExp("^"+ie+"*,"+ie+"*"),ue=new RegExp("^"+ie+"*([>+~]|"+ie+")"+ie+"*"),de=new RegExp("="+ie+"*([^\\]'\"]*?)"+ie+"*\\]","g"),he=new RegExp(ae),fe=new RegExp("^"+re+"$"),pe={ID:new RegExp("^#("+oe+")"),CLASS:new RegExp("^\\.("+oe+")"),TAG:new RegExp("^("+oe.replace("w","w*")+")"),ATTR:new RegExp("^"+se),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ie+"*(even|odd|(([+-]|)(\\d*)n|)"+ie+"*(?:([+-]|)"+ie+"*(\\d+)|))"+ie+"*\\)|)","i"),bool:new RegExp("^(?:"+ne+")$","i"),needsContext:new RegExp("^"+ie+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ie+"*((?:-\\d)?\\d*)"+ie+"*\\)|)(?=[^-]|$)","i")},me=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,ye=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,we=/'|\\/g,Ce=new RegExp("\\\\([\\da-f]{1,6}"+ie+"?|("+ie+")|.)","ig"),xe=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{Z.apply(Y=te.call(j.childNodes),j.childNodes),Y[j.childNodes.length].nodeType}catch(Ee){Z={apply:Y.length?function(t,e){Q.apply(t,te.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}C=e.support={},N=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},$=e.setDocument=function(t){var e,n=t?t.ownerDocument||t:j,i=n.defaultView;return n!==D&&9===n.nodeType&&n.documentElement?(D=n,O=n.documentElement,L=!N(n),i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",function(){$()},!1):i.attachEvent&&i.attachEvent("onunload",function(){$()})),C.attributes=o(function(t){return t.className="i",!t.getAttribute("className")}),C.getElementsByTagName=o(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),C.getElementsByClassName=ye.test(n.getElementsByClassName)&&o(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),C.getById=o(function(t){return O.appendChild(t).id=B,!n.getElementsByName||!n.getElementsByName(B).length}),C.getById?(x.find.ID=function(t,e){if(typeof e.getElementById!==X&&L){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},x.filter.ID=function(t){var e=t.replace(Ce,xe);return function(t){return t.getAttribute("id")===e}}):(delete x.find.ID,x.filter.ID=function(t){var e=t.replace(Ce,xe);return function(t){var n=typeof t.getAttributeNode!==X&&t.getAttributeNode("id");return n&&n.value===e}}),x.find.TAG=C.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==X?e.getElementsByTagName(t):void 0}:function(t,e){var n,i=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},x.find.CLASS=C.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==X&&L?e.getElementsByClassName(t):void 0},F=[],I=[],(C.qsa=ye.test(n.querySelectorAll))&&(o(function(t){t.innerHTML="<select msallowclip=''><option selected=''></option></select>",t.querySelectorAll("[msallowclip^='']").length&&I.push("[*^$]="+ie+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||I.push("\\["+ie+"*(?:value|"+ne+")"),t.querySelectorAll(":checked").length||I.push(":checked")}),o(function(t){var e=n.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&I.push("name"+ie+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||I.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),I.push(",.*:")})),(C.matchesSelector=ye.test(H=O.matches||O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&o(function(t){C.disconnectedMatch=H.call(t,"div"),H.call(t,"[s!='']:x"),F.push("!=",ae)}),I=I.length&&new RegExp(I.join("|")),F=F.length&&new RegExp(F.join("|")),e=ye.test(O.compareDocumentPosition),P=e||ye.test(O.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},V=e?function(t,e){if(t===e)return R=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i?i:(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&i||!C.sortDetached&&e.compareDocumentPosition(t)===i?t===n||t.ownerDocument===j&&P(j,t)?-1:e===n||e.ownerDocument===j&&P(j,e)?1:A?ee.call(A,t)-ee.call(A,e):0:4&i?-1:1)}:function(t,e){if(t===e)return R=!0,0;var i,o=0,r=t.parentNode,a=e.parentNode,l=[t],c=[e];if(!r||!a)return t===n?-1:e===n?1:r?-1:a?1:A?ee.call(A,t)-ee.call(A,e):0;if(r===a)return s(t,e);for(i=t;i=i.parentNode;)l.unshift(i);for(i=e;i=i.parentNode;)c.unshift(i);for(;l[o]===c[o];)o++;return o?s(l[o],c[o]):l[o]===j?-1:c[o]===j?1:0},n):D},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==D&&$(t),n=n.replace(de,"='$1']"),!(!C.matchesSelector||!L||F&&F.test(n)||I&&I.test(n)))try{var i=H.call(t,n);if(i||C.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(o){}return e(n,D,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==D&&$(t),P(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==D&&$(t);var n=x.attrHandle[e.toLowerCase()],i=n&&K.call(x.attrHandle,e.toLowerCase())?n(t,e,!L):void 0;return void 0!==i?i:C.attributes||!L?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,o=0;if(R=!C.detectDuplicates,A=!C.sortStable&&t.slice(0),t.sort(V),R){for(;e=t[o++];)e===t[o]&&(i=n.push(o));for(;i--;)t.splice(n[i],1)}return A=null,t},E=e.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=E(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i++];)n+=E(e);return n},x=e.selectors={cacheLength:50,createPseudo:i,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Ce,xe),t[3]=(t[3]||t[4]||t[5]||"").replace(Ce,xe),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return pe.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&he.test(n)&&(e=T(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Ce,xe).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=U[t+" "];return e||(e=new RegExp("(^|"+ie+")"+t+"("+ie+"|$)"))&&U(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==X&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(o){var r=e.attr(o,t);return null==r?"!="===n:n?(r+="","="===n?r===i:"!="===n?r!==i:"^="===n?i&&0===r.indexOf(i):"*="===n?i&&r.indexOf(i)>-1:"$="===n?i&&r.slice(-i.length)===i:"~="===n?(" "+r+" ").indexOf(i)>-1:"|="===n?r===i||r.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(t,e,n,i,o){var r="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===o?function(t){return!!t.parentNode}:function(e,n,l){var c,u,d,h,f,p,m=r!==s?"nextSibling":"previousSibling",g=e.parentNode,y=a&&e.nodeName.toLowerCase(),v=!l&&!a;if(g){if(r){for(;m;){for(d=e;d=d[m];)if(a?d.nodeName.toLowerCase()===y:1===d.nodeType)return!1;p=m="only"===t&&!p&&"nextSibling"}return!0}if(p=[s?g.firstChild:g.lastChild],s&&v){for(u=g[B]||(g[B]={}),c=u[t]||[],f=c[0]===M&&c[1],h=c[0]===M&&c[2],d=f&&g.childNodes[f];d=++f&&d&&d[m]||(h=f=0)||p.pop();)if(1===d.nodeType&&++h&&d===e){u[t]=[M,f,h];break}}else if(v&&(c=(e[B]||(e[B]={}))[t])&&c[0]===M)h=c[1];else for(;(d=++f&&d&&d[m]||(h=f=0)||p.pop())&&((a?d.nodeName.toLowerCase()!==y:1!==d.nodeType)||!++h||(v&&((d[B]||(d[B]={}))[t]=[M,h]),d!==e)););return h-=o,h===i||h%i===0&&h/i>=0}}},PSEUDO:function(t,n){var o,r=x.pseudos[t]||x.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return r[B]?r(n):r.length>1?(o=[t,t,"",n],x.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,o=r(t,n),s=o.length;s--;)i=ee.call(t,o[s]),t[i]=!(e[i]=o[s])}):function(t){return r(t,0,o)}):r}},pseudos:{not:i(function(t){var e=[],n=[],o=_(t.replace(le,"$1"));return o[B]?i(function(t,e,n,i){for(var r,s=o(t,null,i,[]),a=t.length;a--;)(r=s[a])&&(t[a]=!(e[a]=r))}):function(t,i,r){return e[0]=t,o(e,null,r,n),!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return function(e){return(e.textContent||e.innerText||E(e)).indexOf(t)>-1}}),lang:i(function(t){return fe.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(Ce,xe).toLowerCase(),function(e){var n;do if(n=L?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===O},focus:function(t){return t===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!x.pseudos.empty(t)},header:function(t){return ge.test(t.nodeName)},input:function(t){return me.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,n){return[0>n?n+e:n]}),even:c(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:c(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:c(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:c(function(t,e,n){for(var i=0>n?n+e:n;++i<e;)t.push(i);return t})}},x.pseudos.nth=x.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[w]=a(w);for(w in{submit:!0,reset:!0})x.pseudos[w]=l(w);return d.prototype=x.filters=x.pseudos,x.setFilters=new d,T=e.tokenize=function(t,n){var i,o,r,s,a,l,c,u=W[t+" "];if(u)return n?0:u.slice(0);for(a=t,l=[],c=x.preFilter;a;){(!i||(o=ce.exec(a)))&&(o&&(a=a.slice(o[0].length)||a),l.push(r=[])),i=!1,(o=ue.exec(a))&&(i=o.shift(),r.push({value:i,type:o[0].replace(le," ")}),a=a.slice(i.length));for(s in x.filter)!(o=pe[s].exec(a))||c[s]&&!(o=c[s](o))||(i=o.shift(),r.push({value:i,type:s,matches:o}),a=a.slice(i.length));if(!i)break}return n?a.length:a?e.error(t):W(t,l).slice(0)},_=e.compile=function(t,e){var n,i=[],o=[],r=z[t+" "];if(!r){for(e||(e=T(t)),n=e.length;n--;)r=v(e[n]),r[B]?i.push(r):o.push(r);r=z(t,b(o,i)),r.selector=t}return r},S=e.select=function(t,e,n,i){var o,r,s,a,l,c="function"==typeof t&&t,d=!i&&T(t=c.selector||t);if(n=n||[],1===d.length){if(r=d[0]=d[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&C.getById&&9===e.nodeType&&L&&x.relative[r[1].type]){if(e=(x.find.ID(s.matches[0].replace(Ce,xe),e)||[])[0],!e)return n;c&&(e=e.parentNode),t=t.slice(r.shift().value.length)}for(o=pe.needsContext.test(t)?0:r.length;o--&&(s=r[o],!x.relative[a=s.type]);)if((l=x.find[a])&&(i=l(s.matches[0].replace(Ce,xe),be.test(r[0].type)&&u(e.parentNode)||e))){if(r.splice(o,1),t=i.length&&h(r),!t)return Z.apply(n,i),n;
break}}return(c||_(t,d))(i,e,!L,n,be.test(t)&&u(e.parentNode)||e),n},C.sortStable=B.split("").sort(V).join("")===B,C.detectDuplicates=!!R,$(),C.sortDetached=o(function(t){return 1&t.compareDocumentPosition(D.createElement("div"))}),o(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||r("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),C.attributes&&o(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||r("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),o(function(t){return null==t.getAttribute("disabled")})||r(ne,function(t,e,n){var i;return n?void 0:t[e]===!0?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(t);oe.find=ce,oe.expr=ce.selectors,oe.expr[":"]=oe.expr.pseudos,oe.unique=ce.uniqueSort,oe.text=ce.getText,oe.isXMLDoc=ce.isXML,oe.contains=ce.contains;var ue=oe.expr.match.needsContext,de=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,he=/^.[^:#\[\.,]*$/;oe.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?oe.find.matchesSelector(i,t)?[i]:[]:oe.find.matches(t,oe.grep(e,function(t){return 1===t.nodeType}))},oe.fn.extend({find:function(t){var e,n=[],i=this,o=i.length;if("string"!=typeof t)return this.pushStack(oe(t).filter(function(){for(e=0;o>e;e++)if(oe.contains(i[e],this))return!0}));for(e=0;o>e;e++)oe.find(t,i[e],n);return n=this.pushStack(o>1?oe.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(i(this,t||[],!1))},not:function(t){return this.pushStack(i(this,t||[],!0))},is:function(t){return!!i(this,"string"==typeof t&&ue.test(t)?oe(t):t||[],!1).length}});var fe,pe=t.document,me=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ge=oe.fn.init=function(t,e){var n,i;if(!t)return this;if("string"==typeof t){if(n="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:me.exec(t),!n||!n[1]&&e)return!e||e.jquery?(e||fe).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof oe?e[0]:e,oe.merge(this,oe.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:pe,!0)),de.test(n[1])&&oe.isPlainObject(e))for(n in e)oe.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}if(i=pe.getElementById(n[2]),i&&i.parentNode){if(i.id!==n[2])return fe.find(t);this.length=1,this[0]=i}return this.context=pe,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):oe.isFunction(t)?"undefined"!=typeof fe.ready?fe.ready(t):t(oe):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),oe.makeArray(t,this))};ge.prototype=oe.fn,fe=oe(pe);var ye=/^(?:parents|prev(?:Until|All))/,ve={children:!0,contents:!0,next:!0,prev:!0};oe.extend({dir:function(t,e,n){for(var i=[],o=t[e];o&&9!==o.nodeType&&(void 0===n||1!==o.nodeType||!oe(o).is(n));)1===o.nodeType&&i.push(o),o=o[e];return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),oe.fn.extend({has:function(t){var e,n=oe(t,this),i=n.length;return this.filter(function(){for(e=0;i>e;e++)if(oe.contains(this,n[e]))return!0})},closest:function(t,e){for(var n,i=0,o=this.length,r=[],s=ue.test(t)||"string"!=typeof t?oe(t,e||this.context):0;o>i;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&oe.find.matchesSelector(n,t))){r.push(n);break}return this.pushStack(r.length>1?oe.unique(r):r)},index:function(t){return t?"string"==typeof t?oe.inArray(this[0],oe(t)):oe.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(oe.unique(oe.merge(this.get(),oe(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),oe.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return oe.dir(t,"parentNode")},parentsUntil:function(t,e,n){return oe.dir(t,"parentNode",n)},next:function(t){return o(t,"nextSibling")},prev:function(t){return o(t,"previousSibling")},nextAll:function(t){return oe.dir(t,"nextSibling")},prevAll:function(t){return oe.dir(t,"previousSibling")},nextUntil:function(t,e,n){return oe.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return oe.dir(t,"previousSibling",n)},siblings:function(t){return oe.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return oe.sibling(t.firstChild)},contents:function(t){return oe.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:oe.merge([],t.childNodes)}},function(t,e){oe.fn[t]=function(n,i){var o=oe.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=oe.filter(i,o)),this.length>1&&(ve[t]||(o=oe.unique(o)),ye.test(t)&&(o=o.reverse())),this.pushStack(o)}});var be=/\S+/g,we={};oe.Callbacks=function(t){t="string"==typeof t?we[t]||r(t):oe.extend({},t);var e,n,i,o,s,a,l=[],c=!t.once&&[],u=function(r){for(n=t.memory&&r,i=!0,s=a||0,a=0,o=l.length,e=!0;l&&o>s;s++)if(l[s].apply(r[0],r[1])===!1&&t.stopOnFalse){n=!1;break}e=!1,l&&(c?c.length&&u(c.shift()):n?l=[]:d.disable())},d={add:function(){if(l){var i=l.length;!function r(e){oe.each(e,function(e,n){var i=oe.type(n);"function"===i?t.unique&&d.has(n)||l.push(n):n&&n.length&&"string"!==i&&r(n)})}(arguments),e?o=l.length:n&&(a=i,u(n))}return this},remove:function(){return l&&oe.each(arguments,function(t,n){for(var i;(i=oe.inArray(n,l,i))>-1;)l.splice(i,1),e&&(o>=i&&o--,s>=i&&s--)}),this},has:function(t){return t?oe.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],o=0,this},disable:function(){return l=c=n=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,n||d.disable(),this},locked:function(){return!c},fireWith:function(t,n){return!l||i&&!c||(n=n||[],n=[t,n.slice?n.slice():n],e?c.push(n):u(n)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!i}};return d},oe.extend({Deferred:function(t){var e=[["resolve","done",oe.Callbacks("once memory"),"resolved"],["reject","fail",oe.Callbacks("once memory"),"rejected"],["notify","progress",oe.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return oe.Deferred(function(n){oe.each(e,function(e,r){var s=oe.isFunction(t[e])&&t[e];o[r[1]](function(){var t=s&&s.apply(this,arguments);t&&oe.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[r[0]+"With"](this===i?n.promise():this,s?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?oe.extend(t,i):i}},o={};return i.pipe=i.then,oe.each(e,function(t,r){var s=r[2],a=r[3];i[r[1]]=s.add,a&&s.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),o[r[0]]=function(){return o[r[0]+"With"](this===o?i:this,arguments),this},o[r[0]+"With"]=s.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(t){var e,n,i,o=0,r=K.call(arguments),s=r.length,a=1!==s||t&&oe.isFunction(t.promise)?s:0,l=1===a?t:oe.Deferred(),c=function(t,n,i){return function(o){n[t]=this,i[t]=arguments.length>1?K.call(arguments):o,i===e?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(s>1)for(e=new Array(s),n=new Array(s),i=new Array(s);s>o;o++)r[o]&&oe.isFunction(r[o].promise)?r[o].promise().done(c(o,i,r)).fail(l.reject).progress(c(o,n,e)):--a;return a||l.resolveWith(i,r),l.promise()}});var Ce;oe.fn.ready=function(t){return oe.ready.promise().done(t),this},oe.extend({isReady:!1,readyWait:1,holdReady:function(t){t?oe.readyWait++:oe.ready(!0)},ready:function(t){if(t===!0?!--oe.readyWait:!oe.isReady){if(!pe.body)return setTimeout(oe.ready);oe.isReady=!0,t!==!0&&--oe.readyWait>0||(Ce.resolveWith(pe,[oe]),oe.fn.triggerHandler&&(oe(pe).triggerHandler("ready"),oe(pe).off("ready")))}}}),oe.ready.promise=function(e){if(!Ce)if(Ce=oe.Deferred(),"complete"===pe.readyState)setTimeout(oe.ready);else if(pe.addEventListener)pe.addEventListener("DOMContentLoaded",a,!1),t.addEventListener("load",a,!1);else{pe.attachEvent("onreadystatechange",a),t.attachEvent("onload",a);var n=!1;try{n=null==t.frameElement&&pe.documentElement}catch(i){}n&&n.doScroll&&!function o(){if(!oe.isReady){try{n.doScroll("left")}catch(t){return setTimeout(o,50)}s(),oe.ready()}}()}return Ce.promise(e)};var xe,Ee="undefined";for(xe in oe(ne))break;ne.ownLast="0"!==xe,ne.inlineBlockNeedsLayout=!1,oe(function(){var t,e,n,i;n=pe.getElementsByTagName("body")[0],n&&n.style&&(e=pe.createElement("div"),i=pe.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),typeof e.style.zoom!==Ee&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ne.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(n.style.zoom=1)),n.removeChild(i))}),function(){var t=pe.createElement("div");if(null==ne.deleteExpando){ne.deleteExpando=!0;try{delete t.test}catch(e){ne.deleteExpando=!1}}t=null}(),oe.acceptData=function(t){var e=oe.noData[(t.nodeName+" ").toLowerCase()],n=+t.nodeType||1;return 1!==n&&9!==n?!1:!e||e!==!0&&t.getAttribute("classid")===e};var Ne=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Te=/([A-Z])/g;oe.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return t=t.nodeType?oe.cache[t[oe.expando]]:t[oe.expando],!!t&&!c(t)},data:function(t,e,n){return u(t,e,n)},removeData:function(t,e){return d(t,e)},_data:function(t,e,n){return u(t,e,n,!0)},_removeData:function(t,e){return d(t,e,!0)}}),oe.fn.extend({data:function(t,e){var n,i,o,r=this[0],s=r&&r.attributes;if(void 0===t){if(this.length&&(o=oe.data(r),1===r.nodeType&&!oe._data(r,"parsedAttrs"))){for(n=s.length;n--;)s[n]&&(i=s[n].name,0===i.indexOf("data-")&&(i=oe.camelCase(i.slice(5)),l(r,i,o[i])));oe._data(r,"parsedAttrs",!0)}return o}return"object"==typeof t?this.each(function(){oe.data(this,t)}):arguments.length>1?this.each(function(){oe.data(this,t,e)}):r?l(r,t,oe.data(r,t)):void 0},removeData:function(t){return this.each(function(){oe.removeData(this,t)})}}),oe.extend({queue:function(t,e,n){var i;return t?(e=(e||"fx")+"queue",i=oe._data(t,e),n&&(!i||oe.isArray(n)?i=oe._data(t,e,oe.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=oe.queue(t,e),i=n.length,o=n.shift(),r=oe._queueHooks(t,e),s=function(){oe.dequeue(t,e)};"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===e&&n.unshift("inprogress"),delete r.stop,o.call(t,s,r)),!i&&r&&r.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return oe._data(t,n)||oe._data(t,n,{empty:oe.Callbacks("once memory").add(function(){oe._removeData(t,e+"queue"),oe._removeData(t,n)})})}}),oe.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?oe.queue(this[0],t):void 0===e?this:this.each(function(){var n=oe.queue(this,t,e);oe._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&oe.dequeue(this,t)})},dequeue:function(t){return this.each(function(){oe.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,o=oe.Deferred(),r=this,s=this.length,a=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)n=oe._data(r[s],t+"queueHooks"),n&&n.empty&&(i++,n.empty.add(a));return a(),o.promise(e)}});var _e=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Se=["Top","Right","Bottom","Left"],ke=function(t,e){return t=e||t,"none"===oe.css(t,"display")||!oe.contains(t.ownerDocument,t)},Ae=oe.access=function(t,e,n,i,o,r,s){var a=0,l=t.length,c=null==n;if("object"===oe.type(n)){o=!0;for(a in n)oe.access(t,e,a,n[a],!0,r,s)}else if(void 0!==i&&(o=!0,oe.isFunction(i)||(s=!0),c&&(s?(e.call(t,i),e=null):(c=e,e=function(t,e,n){return c.call(oe(t),n)})),e))for(;l>a;a++)e(t[a],n,s?i:i.call(t[a],a,e(t[a],n)));return o?t:c?e.call(t):l?e(t[0],n):r},Re=/^(?:checkbox|radio)$/i;!function(){var t=pe.createElement("input"),e=pe.createElement("div"),n=pe.createDocumentFragment();if(e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ne.leadingWhitespace=3===e.firstChild.nodeType,ne.tbody=!e.getElementsByTagName("tbody").length,ne.htmlSerialize=!!e.getElementsByTagName("link").length,ne.html5Clone="<:nav></:nav>"!==pe.createElement("nav").cloneNode(!0).outerHTML,t.type="checkbox",t.checked=!0,n.appendChild(t),ne.appendChecked=t.checked,e.innerHTML="<textarea>x</textarea>",ne.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,n.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",ne.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,ne.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){ne.noCloneEvent=!1}),e.cloneNode(!0).click()),null==ne.deleteExpando){ne.deleteExpando=!0;try{delete e.test}catch(i){ne.deleteExpando=!1}}}(),function(){var e,n,i=pe.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})n="on"+e,(ne[e+"Bubbles"]=n in t)||(i.setAttribute(n,"t"),ne[e+"Bubbles"]=i.attributes[n].expando===!1);i=null}();var $e=/^(?:input|select|textarea)$/i,De=/^key/,Oe=/^(?:mouse|pointer|contextmenu)|click/,Le=/^(?:focusinfocus|focusoutblur)$/,Ie=/^([^.]*)(?:\.(.+)|)$/;oe.event={global:{},add:function(t,e,n,i,o){var r,s,a,l,c,u,d,h,f,p,m,g=oe._data(t);if(g){for(n.handler&&(l=n,n=l.handler,o=l.selector),n.guid||(n.guid=oe.guid++),(s=g.events)||(s=g.events={}),(u=g.handle)||(u=g.handle=function(t){return typeof oe===Ee||t&&oe.event.triggered===t.type?void 0:oe.event.dispatch.apply(u.elem,arguments)},u.elem=t),e=(e||"").match(be)||[""],a=e.length;a--;)r=Ie.exec(e[a])||[],f=m=r[1],p=(r[2]||"").split(".").sort(),f&&(c=oe.event.special[f]||{},f=(o?c.delegateType:c.bindType)||f,c=oe.event.special[f]||{},d=oe.extend({type:f,origType:m,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&oe.expr.match.needsContext.test(o),namespace:p.join(".")},l),(h=s[f])||(h=s[f]=[],h.delegateCount=0,c.setup&&c.setup.call(t,i,p,u)!==!1||(t.addEventListener?t.addEventListener(f,u,!1):t.attachEvent&&t.attachEvent("on"+f,u))),c.add&&(c.add.call(t,d),d.handler.guid||(d.handler.guid=n.guid)),o?h.splice(h.delegateCount++,0,d):h.push(d),oe.event.global[f]=!0);t=null}},remove:function(t,e,n,i,o){var r,s,a,l,c,u,d,h,f,p,m,g=oe.hasData(t)&&oe._data(t);if(g&&(u=g.events)){for(e=(e||"").match(be)||[""],c=e.length;c--;)if(a=Ie.exec(e[c])||[],f=m=a[1],p=(a[2]||"").split(".").sort(),f){for(d=oe.event.special[f]||{},f=(i?d.delegateType:d.bindType)||f,h=u[f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=r=h.length;r--;)s=h[r],!o&&m!==s.origType||n&&n.guid!==s.guid||a&&!a.test(s.namespace)||i&&i!==s.selector&&("**"!==i||!s.selector)||(h.splice(r,1),s.selector&&h.delegateCount--,d.remove&&d.remove.call(t,s));l&&!h.length&&(d.teardown&&d.teardown.call(t,p,g.handle)!==!1||oe.removeEvent(t,f,g.handle),delete u[f])}else for(f in u)oe.event.remove(t,f+e[c],n,i,!0);oe.isEmptyObject(u)&&(delete g.handle,oe._removeData(t,"events"))}},trigger:function(e,n,i,o){var r,s,a,l,c,u,d,h=[i||pe],f=ee.call(e,"type")?e.type:e,p=ee.call(e,"namespace")?e.namespace.split("."):[];if(a=u=i=i||pe,3!==i.nodeType&&8!==i.nodeType&&!Le.test(f+oe.event.triggered)&&(f.indexOf(".")>=0&&(p=f.split("."),f=p.shift(),p.sort()),s=f.indexOf(":")<0&&"on"+f,e=e[oe.expando]?e:new oe.Event(f,"object"==typeof e&&e),e.isTrigger=o?2:3,e.namespace=p.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:oe.makeArray(n,[e]),c=oe.event.special[f]||{},o||!c.trigger||c.trigger.apply(i,n)!==!1)){if(!o&&!c.noBubble&&!oe.isWindow(i)){for(l=c.delegateType||f,Le.test(l+f)||(a=a.parentNode);a;a=a.parentNode)h.push(a),u=a;u===(i.ownerDocument||pe)&&h.push(u.defaultView||u.parentWindow||t)}for(d=0;(a=h[d++])&&!e.isPropagationStopped();)e.type=d>1?l:c.bindType||f,r=(oe._data(a,"events")||{})[e.type]&&oe._data(a,"handle"),r&&r.apply(a,n),r=s&&a[s],r&&r.apply&&oe.acceptData(a)&&(e.result=r.apply(a,n),e.result===!1&&e.preventDefault());if(e.type=f,!o&&!e.isDefaultPrevented()&&(!c._default||c._default.apply(h.pop(),n)===!1)&&oe.acceptData(i)&&s&&i[f]&&!oe.isWindow(i)){u=i[s],u&&(i[s]=null),oe.event.triggered=f;try{i[f]()}catch(m){}oe.event.triggered=void 0,u&&(i[s]=u)}return e.result}},dispatch:function(t){t=oe.event.fix(t);var e,n,i,o,r,s=[],a=K.call(arguments),l=(oe._data(this,"events")||{})[t.type]||[],c=oe.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,t)!==!1){for(s=oe.event.handlers.call(this,t,l),e=0;(o=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,r=0;(i=o.handlers[r++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(i.namespace))&&(t.handleObj=i,t.data=i.data,n=((oe.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,a),void 0!==n&&(t.result=n)===!1&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,o,r,s=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==t.type)){for(o=[],r=0;a>r;r++)i=e[r],n=i.selector+" ",void 0===o[n]&&(o[n]=i.needsContext?oe(n,this).index(l)>=0:oe.find(n,this,null,[l]).length),o[n]&&o.push(i);o.length&&s.push({elem:l,handlers:o})}return a<e.length&&s.push({elem:this,handlers:e.slice(a)}),s},fix:function(t){if(t[oe.expando])return t;var e,n,i,o=t.type,r=t,s=this.fixHooks[o];for(s||(this.fixHooks[o]=s=Oe.test(o)?this.mouseHooks:De.test(o)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,t=new oe.Event(r),e=i.length;e--;)n=i[e],t[n]=r[n];return t.target||(t.target=r.srcElement||pe),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,s.filter?s.filter(t,r):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,o,r=e.button,s=e.fromElement;return null==t.pageX&&null!=e.clientX&&(i=t.target.ownerDocument||pe,o=i.documentElement,n=i.body,t.pageX=e.clientX+(o&&o.scrollLeft||n&&n.scrollLeft||0)-(o&&o.clientLeft||n&&n.clientLeft||0),t.pageY=e.clientY+(o&&o.scrollTop||n&&n.scrollTop||0)-(o&&o.clientTop||n&&n.clientTop||0)),!t.relatedTarget&&s&&(t.relatedTarget=s===t.target?e.toElement:s),t.which||void 0===r||(t.which=1&r?1:2&r?3:4&r?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==p()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===p()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return oe.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(t){return oe.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var o=oe.extend(new oe.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?oe.event.trigger(o,null,e):oe.event.dispatch.call(e,o),o.isDefaultPrevented()&&n.preventDefault()}},oe.removeEvent=pe.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)}:function(t,e,n){var i="on"+e;t.detachEvent&&(typeof t[i]===Ee&&(t[i]=null),t.detachEvent(i,n))},oe.Event=function(t,e){return this instanceof oe.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?h:f):this.type=t,e&&oe.extend(this,e),this.timeStamp=t&&t.timeStamp||oe.now(),void(this[oe.expando]=!0)):new oe.Event(t,e)},oe.Event.prototype={isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=h,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=h,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=h,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},oe.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){oe.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,o=t.relatedTarget,r=t.handleObj;return(!o||o!==i&&!oe.contains(i,o))&&(t.type=r.origType,n=r.handler.apply(this,arguments),t.type=e),n}}}),ne.submitBubbles||(oe.event.special.submit={setup:function(){return oe.nodeName(this,"form")?!1:void oe.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,n=oe.nodeName(e,"input")||oe.nodeName(e,"button")?e.form:void 0;n&&!oe._data(n,"submitBubbles")&&(oe.event.add(n,"submit._submit",function(t){t._submit_bubble=!0}),oe._data(n,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&oe.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return oe.nodeName(this,"form")?!1:void oe.event.remove(this,"._submit")}}),ne.changeBubbles||(oe.event.special.change={setup:function(){return $e.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(oe.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),oe.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),oe.event.simulate("change",this,t,!0)})),!1):void oe.event.add(this,"beforeactivate._change",function(t){var e=t.target;$e.test(e.nodeName)&&!oe._data(e,"changeBubbles")&&(oe.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||oe.event.simulate("change",this.parentNode,t,!0)}),oe._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return oe.event.remove(this,"._change"),!$e.test(this.nodeName)}}),ne.focusinBubbles||oe.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){oe.event.simulate(e,t.target,oe.event.fix(t),!0)};oe.event.special[e]={setup:function(){var i=this.ownerDocument||this,o=oe._data(i,e);o||i.addEventListener(t,n,!0),oe._data(i,e,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=oe._data(i,e)-1;o?oe._data(i,e,o):(i.removeEventListener(t,n,!0),oe._removeData(i,e))}}}),oe.fn.extend({on:function(t,e,n,i,o){var r,s;if("object"==typeof t){"string"!=typeof e&&(n=n||e,e=void 0);for(r in t)this.on(r,e,n,t[r],o);return this}if(null==n&&null==i?(i=e,n=e=void 0):null==i&&("string"==typeof e?(i=n,n=void 0):(i=n,n=e,e=void 0)),i===!1)i=f;else if(!i)return this;return 1===o&&(s=i,i=function(t){return oe().off(t),s.apply(this,arguments)},i.guid=s.guid||(s.guid=oe.guid++)),this.each(function(){oe.event.add(this,t,i,n,e)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,e,n){var i,o;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,oe(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return(e===!1||"function"==typeof e)&&(n=e,e=void 0),n===!1&&(n=f),this.each(function(){oe.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){oe.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?oe.event.trigger(t,e,n,!0):void 0}});var Fe="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",He=/ jQuery\d+="(?:null|\d+)"/g,Pe=new RegExp("<(?:"+Fe+")[\\s/>]","i"),Be=/^\s+/,je=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Me=/<([\w:]+)/,qe=/<tbody/i,Ue=/<|&#?\w+;/,We=/<(?:script|style|link)/i,ze=/checked\s*(?:[^=]|=\s*.checked.)/i,Ve=/^$|\/(?:java|ecma)script/i,Xe=/^true\/(.*)/,Ge=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ke={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ne.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Ye=m(pe),Je=Ye.appendChild(pe.createElement("div"));Ke.optgroup=Ke.option,Ke.tbody=Ke.tfoot=Ke.colgroup=Ke.caption=Ke.thead,Ke.th=Ke.td,oe.extend({clone:function(t,e,n){var i,o,r,s,a,l=oe.contains(t.ownerDocument,t);if(ne.html5Clone||oe.isXMLDoc(t)||!Pe.test("<"+t.nodeName+">")?r=t.cloneNode(!0):(Je.innerHTML=t.outerHTML,Je.removeChild(r=Je.firstChild)),!(ne.noCloneEvent&&ne.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||oe.isXMLDoc(t)))for(i=g(r),a=g(t),s=0;null!=(o=a[s]);++s)i[s]&&E(o,i[s]);if(e)if(n)for(a=a||g(t),i=i||g(r),s=0;null!=(o=a[s]);s++)x(o,i[s]);else x(t,r);return i=g(r,"script"),i.length>0&&C(i,!l&&g(t,"script")),i=a=o=null,r},buildFragment:function(t,e,n,i){for(var o,r,s,a,l,c,u,d=t.length,h=m(e),f=[],p=0;d>p;p++)if(r=t[p],r||0===r)if("object"===oe.type(r))oe.merge(f,r.nodeType?[r]:r);else if(Ue.test(r)){for(a=a||h.appendChild(e.createElement("div")),l=(Me.exec(r)||["",""])[1].toLowerCase(),u=Ke[l]||Ke._default,a.innerHTML=u[1]+r.replace(je,"<$1></$2>")+u[2],o=u[0];o--;)a=a.lastChild;if(!ne.leadingWhitespace&&Be.test(r)&&f.push(e.createTextNode(Be.exec(r)[0])),!ne.tbody)for(r="table"!==l||qe.test(r)?"<table>"!==u[1]||qe.test(r)?0:a:a.firstChild,o=r&&r.childNodes.length;o--;)oe.nodeName(c=r.childNodes[o],"tbody")&&!c.childNodes.length&&r.removeChild(c);for(oe.merge(f,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=h.lastChild}else f.push(e.createTextNode(r));for(a&&h.removeChild(a),ne.appendChecked||oe.grep(g(f,"input"),y),p=0;r=f[p++];)if((!i||-1===oe.inArray(r,i))&&(s=oe.contains(r.ownerDocument,r),a=g(h.appendChild(r),"script"),s&&C(a),n))for(o=0;r=a[o++];)Ve.test(r.type||"")&&n.push(r);return a=null,h},cleanData:function(t,e){for(var n,i,o,r,s=0,a=oe.expando,l=oe.cache,c=ne.deleteExpando,u=oe.event.special;null!=(n=t[s]);s++)if((e||oe.acceptData(n))&&(o=n[a],r=o&&l[o])){if(r.events)for(i in r.events)u[i]?oe.event.remove(n,i):oe.removeEvent(n,i,r.handle);l[o]&&(delete l[o],c?delete n[a]:typeof n.removeAttribute!==Ee?n.removeAttribute(a):n[a]=null,G.push(o))}}}),oe.fn.extend({text:function(t){return Ae(this,function(t){return void 0===t?oe.text(this):this.empty().append((this[0]&&this[0].ownerDocument||pe).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=v(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=v(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?oe.filter(t,this):this,o=0;null!=(n=i[o]);o++)e||1!==n.nodeType||oe.cleanData(g(n)),n.parentNode&&(e&&oe.contains(n.ownerDocument,n)&&C(g(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&oe.cleanData(g(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&oe.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return oe.clone(this,t,e)})},html:function(t){return Ae(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(He,""):void 0;if(!("string"!=typeof t||We.test(t)||!ne.htmlSerialize&&Pe.test(t)||!ne.leadingWhitespace&&Be.test(t)||Ke[(Me.exec(t)||["",""])[1].toLowerCase()])){t=t.replace(je,"<$1></$2>");try{for(;i>n;n++)e=this[n]||{},1===e.nodeType&&(oe.cleanData(g(e,!1)),e.innerHTML=t);e=0}catch(o){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,oe.cleanData(g(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=Y.apply([],t);var n,i,o,r,s,a,l=0,c=this.length,u=this,d=c-1,h=t[0],f=oe.isFunction(h);if(f||c>1&&"string"==typeof h&&!ne.checkClone&&ze.test(h))return this.each(function(n){var i=u.eq(n);f&&(t[0]=h.call(this,n,i.html())),i.domManip(t,e)});if(c&&(a=oe.buildFragment(t,this[0].ownerDocument,!1,this),n=a.firstChild,1===a.childNodes.length&&(a=n),n)){for(r=oe.map(g(a,"script"),b),o=r.length;c>l;l++)i=a,l!==d&&(i=oe.clone(i,!0,!0),o&&oe.merge(r,g(i,"script"))),e.call(this[l],i,l);if(o)for(s=r[r.length-1].ownerDocument,oe.map(r,w),l=0;o>l;l++)i=r[l],Ve.test(i.type||"")&&!oe._data(i,"globalEval")&&oe.contains(s,i)&&(i.src?oe._evalUrl&&oe._evalUrl(i.src):oe.globalEval((i.text||i.textContent||i.innerHTML||"").replace(Ge,"")));a=n=null}return this}}),oe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){oe.fn[t]=function(t){for(var n,i=0,o=[],r=oe(t),s=r.length-1;s>=i;i++)n=i===s?this:this.clone(!0),oe(r[i])[e](n),J.apply(o,n.get());return this.pushStack(o)}});var Qe,Ze={};!function(){var t;ne.shrinkWrapBlocks=function(){if(null!=t)return t;t=!1;var e,n,i;return n=pe.getElementsByTagName("body")[0],n&&n.style?(e=pe.createElement("div"),i=pe.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),typeof e.style.zoom!==Ee&&(e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",e.appendChild(pe.createElement("div")).style.width="5px",t=3!==e.offsetWidth),n.removeChild(i),t):void 0}}();var tn,en,nn=/^margin/,on=new RegExp("^("+_e+")(?!px)[a-z%]+$","i"),rn=/^(top|right|bottom|left)$/;t.getComputedStyle?(tn=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)},en=function(t,e,n){var i,o,r,s,a=t.style;return n=n||tn(t),s=n?n.getPropertyValue(e)||n[e]:void 0,n&&(""!==s||oe.contains(t.ownerDocument,t)||(s=oe.style(t,e)),on.test(s)&&nn.test(e)&&(i=a.width,o=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=o,a.maxWidth=r)),void 0===s?s:s+""}):pe.documentElement.currentStyle&&(tn=function(t){return t.currentStyle},en=function(t,e,n){var i,o,r,s,a=t.style;return n=n||tn(t),s=n?n[e]:void 0,null==s&&a&&a[e]&&(s=a[e]),on.test(s)&&!rn.test(e)&&(i=a.left,o=t.runtimeStyle,r=o&&o.left,r&&(o.left=t.currentStyle.left),a.left="fontSize"===e?"1em":s,s=a.pixelLeft+"px",a.left=i,r&&(o.left=r)),void 0===s?s:s+""||"auto"}),function(){function e(){var e,n,i,o;n=pe.getElementsByTagName("body")[0],n&&n.style&&(e=pe.createElement("div"),i=pe.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",r=s=!1,l=!0,t.getComputedStyle&&(r="1%"!==(t.getComputedStyle(e,null)||{}).top,s="4px"===(t.getComputedStyle(e,null)||{width:"4px"}).width,o=e.appendChild(pe.createElement("div")),o.style.cssText=e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",o.style.marginRight=o.style.width="0",e.style.width="1px",l=!parseFloat((t.getComputedStyle(o,null)||{}).marginRight)),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=e.getElementsByTagName("td"),o[0].style.cssText="margin:0;border:0;padding:0;display:none",a=0===o[0].offsetHeight,a&&(o[0].style.display="",o[1].style.display="none",a=0===o[0].offsetHeight),n.removeChild(i))}var n,i,o,r,s,a,l;n=pe.createElement("div"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",o=n.getElementsByTagName("a")[0],i=o&&o.style,i&&(i.cssText="float:left;opacity:.5",ne.opacity="0.5"===i.opacity,ne.cssFloat=!!i.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",ne.clearCloneStyle="content-box"===n.style.backgroundClip,ne.boxSizing=""===i.boxSizing||""===i.MozBoxSizing||""===i.WebkitBoxSizing,oe.extend(ne,{reliableHiddenOffsets:function(){return null==a&&e(),a
},boxSizingReliable:function(){return null==s&&e(),s},pixelPosition:function(){return null==r&&e(),r},reliableMarginRight:function(){return null==l&&e(),l}}))}(),oe.swap=function(t,e,n,i){var o,r,s={};for(r in e)s[r]=t.style[r],t.style[r]=e[r];o=n.apply(t,i||[]);for(r in e)t.style[r]=s[r];return o};var sn=/alpha\([^)]*\)/i,an=/opacity\s*=\s*([^)]*)/,ln=/^(none|table(?!-c[ea]).+)/,cn=new RegExp("^("+_e+")(.*)$","i"),un=new RegExp("^([+-])=("+_e+")","i"),dn={position:"absolute",visibility:"hidden",display:"block"},hn={letterSpacing:"0",fontWeight:"400"},fn=["Webkit","O","Moz","ms"];oe.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=en(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ne.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,r,s,a=oe.camelCase(e),l=t.style;if(e=oe.cssProps[a]||(oe.cssProps[a]=S(l,a)),s=oe.cssHooks[e]||oe.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(o=s.get(t,!1,i))?o:l[e];if(r=typeof n,"string"===r&&(o=un.exec(n))&&(n=(o[1]+1)*o[2]+parseFloat(oe.css(t,e)),r="number"),null!=n&&n===n&&("number"!==r||oe.cssNumber[a]||(n+="px"),ne.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),!(s&&"set"in s&&void 0===(n=s.set(t,n,i)))))try{l[e]=n}catch(c){}}},css:function(t,e,n,i){var o,r,s,a=oe.camelCase(e);return e=oe.cssProps[a]||(oe.cssProps[a]=S(t.style,a)),s=oe.cssHooks[e]||oe.cssHooks[a],s&&"get"in s&&(r=s.get(t,!0,n)),void 0===r&&(r=en(t,e,i)),"normal"===r&&e in hn&&(r=hn[e]),""===n||n?(o=parseFloat(r),n===!0||oe.isNumeric(o)?o||0:r):r}}),oe.each(["height","width"],function(t,e){oe.cssHooks[e]={get:function(t,n,i){return n?ln.test(oe.css(t,"display"))&&0===t.offsetWidth?oe.swap(t,dn,function(){return $(t,e,i)}):$(t,e,i):void 0},set:function(t,n,i){var o=i&&tn(t);return A(t,n,i?R(t,e,i,ne.boxSizing&&"border-box"===oe.css(t,"boxSizing",!1,o),o):0)}}}),ne.opacity||(oe.cssHooks.opacity={get:function(t,e){return an.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,i=t.currentStyle,o=oe.isNumeric(e)?"alpha(opacity="+100*e+")":"",r=i&&i.filter||n.filter||"";n.zoom=1,(e>=1||""===e)&&""===oe.trim(r.replace(sn,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===e||i&&!i.filter)||(n.filter=sn.test(r)?r.replace(sn,o):r+" "+o)}}),oe.cssHooks.marginRight=_(ne.reliableMarginRight,function(t,e){return e?oe.swap(t,{display:"inline-block"},en,[t,"marginRight"]):void 0}),oe.each({margin:"",padding:"",border:"Width"},function(t,e){oe.cssHooks[t+e]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];4>i;i++)o[t+Se[i]+e]=r[i]||r[i-2]||r[0];return o}},nn.test(t)||(oe.cssHooks[t+e].set=A)}),oe.fn.extend({css:function(t,e){return Ae(this,function(t,e,n){var i,o,r={},s=0;if(oe.isArray(e)){for(i=tn(t),o=e.length;o>s;s++)r[e[s]]=oe.css(t,e[s],!1,i);return r}return void 0!==n?oe.style(t,e,n):oe.css(t,e)},t,e,arguments.length>1)},show:function(){return k(this,!0)},hide:function(){return k(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){ke(this)?oe(this).show():oe(this).hide()})}}),oe.Tween=D,D.prototype={constructor:D,init:function(t,e,n,i,o,r){this.elem=t,this.prop=n,this.easing=o||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=r||(oe.cssNumber[n]?"":"px")},cur:function(){var t=D.propHooks[this.prop];return t&&t.get?t.get(this):D.propHooks._default.get(this)},run:function(t){var e,n=D.propHooks[this.prop];return this.pos=e=this.options.duration?oe.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):D.propHooks._default.set(this),this}},D.prototype.init.prototype=D.prototype,D.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=oe.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){oe.fx.step[t.prop]?oe.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[oe.cssProps[t.prop]]||oe.cssHooks[t.prop])?oe.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},D.propHooks.scrollTop=D.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},oe.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},oe.fx=D.prototype.init,oe.fx.step={};var pn,mn,gn=/^(?:toggle|show|hide)$/,yn=new RegExp("^(?:([+-])=|)("+_e+")([a-z%]*)$","i"),vn=/queueHooks$/,bn=[F],wn={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),o=yn.exec(e),r=o&&o[3]||(oe.cssNumber[t]?"":"px"),s=(oe.cssNumber[t]||"px"!==r&&+i)&&yn.exec(oe.css(n.elem,t)),a=1,l=20;if(s&&s[3]!==r){r=r||s[3],o=o||[],s=+i||1;do a=a||".5",s/=a,oe.style(n.elem,t,s+r);while(a!==(a=n.cur()/i)&&1!==a&&--l)}return o&&(s=n.start=+s||+i||0,n.unit=r,n.end=o[1]?s+(o[1]+1)*o[2]:+o[2]),n}]};oe.Animation=oe.extend(P,{tweener:function(t,e){oe.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,o=t.length;o>i;i++)n=t[i],wn[n]=wn[n]||[],wn[n].unshift(e)},prefilter:function(t,e){e?bn.unshift(t):bn.push(t)}}),oe.speed=function(t,e,n){var i=t&&"object"==typeof t?oe.extend({},t):{complete:n||!n&&e||oe.isFunction(t)&&t,duration:t,easing:n&&e||e&&!oe.isFunction(e)&&e};return i.duration=oe.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in oe.fx.speeds?oe.fx.speeds[i.duration]:oe.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){oe.isFunction(i.old)&&i.old.call(this),i.queue&&oe.dequeue(this,i.queue)},i},oe.fn.extend({fadeTo:function(t,e,n,i){return this.filter(ke).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var o=oe.isEmptyObject(t),r=oe.speed(e,n,i),s=function(){var e=P(this,oe.extend({},t),r);(o||oe._data(this,"finish"))&&e.stop(!0)};return s.finish=s,o||r.queue===!1?this.each(s):this.queue(r.queue,s)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,o=null!=t&&t+"queueHooks",r=oe.timers,s=oe._data(this);if(o)s[o]&&s[o].stop&&i(s[o]);else for(o in s)s[o]&&s[o].stop&&vn.test(o)&&i(s[o]);for(o=r.length;o--;)r[o].elem!==this||null!=t&&r[o].queue!==t||(r[o].anim.stop(n),e=!1,r.splice(o,1));(e||!n)&&oe.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=oe._data(this),i=n[t+"queue"],o=n[t+"queueHooks"],r=oe.timers,s=i?i.length:0;for(n.finish=!0,oe.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;s>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),oe.each(["toggle","show","hide"],function(t,e){var n=oe.fn[e];oe.fn[e]=function(t,i,o){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(L(e,!0),t,i,o)}}),oe.each({slideDown:L("show"),slideUp:L("hide"),slideToggle:L("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){oe.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),oe.timers=[],oe.fx.tick=function(){var t,e=oe.timers,n=0;for(pn=oe.now();n<e.length;n++)t=e[n],t()||e[n]!==t||e.splice(n--,1);e.length||oe.fx.stop(),pn=void 0},oe.fx.timer=function(t){oe.timers.push(t),t()?oe.fx.start():oe.timers.pop()},oe.fx.interval=13,oe.fx.start=function(){mn||(mn=setInterval(oe.fx.tick,oe.fx.interval))},oe.fx.stop=function(){clearInterval(mn),mn=null},oe.fx.speeds={slow:600,fast:200,_default:400},oe.fn.delay=function(t,e){return t=oe.fx?oe.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},function(){var t,e,n,i,o;e=pe.createElement("div"),e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=e.getElementsByTagName("a")[0],n=pe.createElement("select"),o=n.appendChild(pe.createElement("option")),t=e.getElementsByTagName("input")[0],i.style.cssText="top:1px",ne.getSetAttribute="t"!==e.className,ne.style=/top/.test(i.getAttribute("style")),ne.hrefNormalized="/a"===i.getAttribute("href"),ne.checkOn=!!t.value,ne.optSelected=o.selected,ne.enctype=!!pe.createElement("form").enctype,n.disabled=!0,ne.optDisabled=!o.disabled,t=pe.createElement("input"),t.setAttribute("value",""),ne.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),ne.radioValue="t"===t.value}();var Cn=/\r/g;oe.fn.extend({val:function(t){var e,n,i,o=this[0];{if(arguments.length)return i=oe.isFunction(t),this.each(function(n){var o;1===this.nodeType&&(o=i?t.call(this,n,oe(this).val()):t,null==o?o="":"number"==typeof o?o+="":oe.isArray(o)&&(o=oe.map(o,function(t){return null==t?"":t+""})),e=oe.valHooks[this.type]||oe.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,o,"value")||(this.value=o))});if(o)return e=oe.valHooks[o.type]||oe.valHooks[o.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(o,"value"))?n:(n=o.value,"string"==typeof n?n.replace(Cn,""):null==n?"":n)}}}),oe.extend({valHooks:{option:{get:function(t){var e=oe.find.attr(t,"value");return null!=e?e:oe.trim(oe.text(t))}},select:{get:function(t){for(var e,n,i=t.options,o=t.selectedIndex,r="select-one"===t.type||0>o,s=r?null:[],a=r?o+1:i.length,l=0>o?a:r?o:0;a>l;l++)if(n=i[l],!(!n.selected&&l!==o||(ne.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&oe.nodeName(n.parentNode,"optgroup"))){if(e=oe(n).val(),r)return e;s.push(e)}return s},set:function(t,e){for(var n,i,o=t.options,r=oe.makeArray(e),s=o.length;s--;)if(i=o[s],oe.inArray(oe.valHooks.option.get(i),r)>=0)try{i.selected=n=!0}catch(a){i.scrollHeight}else i.selected=!1;return n||(t.selectedIndex=-1),o}}}}),oe.each(["radio","checkbox"],function(){oe.valHooks[this]={set:function(t,e){return oe.isArray(e)?t.checked=oe.inArray(oe(t).val(),e)>=0:void 0}},ne.checkOn||(oe.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var xn,En,Nn=oe.expr.attrHandle,Tn=/^(?:checked|selected)$/i,_n=ne.getSetAttribute,Sn=ne.input;oe.fn.extend({attr:function(t,e){return Ae(this,oe.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){oe.removeAttr(this,t)})}}),oe.extend({attr:function(t,e,n){var i,o,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return typeof t.getAttribute===Ee?oe.prop(t,e,n):(1===r&&oe.isXMLDoc(t)||(e=e.toLowerCase(),i=oe.attrHooks[e]||(oe.expr.match.bool.test(e)?En:xn)),void 0===n?i&&"get"in i&&null!==(o=i.get(t,e))?o:(o=oe.find.attr(t,e),null==o?void 0:o):null!==n?i&&"set"in i&&void 0!==(o=i.set(t,n,e))?o:(t.setAttribute(e,n+""),n):void oe.removeAttr(t,e))},removeAttr:function(t,e){var n,i,o=0,r=e&&e.match(be);if(r&&1===t.nodeType)for(;n=r[o++];)i=oe.propFix[n]||n,oe.expr.match.bool.test(n)?Sn&&_n||!Tn.test(n)?t[i]=!1:t[oe.camelCase("default-"+n)]=t[i]=!1:oe.attr(t,n,""),t.removeAttribute(_n?n:i)},attrHooks:{type:{set:function(t,e){if(!ne.radioValue&&"radio"===e&&oe.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),En={set:function(t,e,n){return e===!1?oe.removeAttr(t,n):Sn&&_n||!Tn.test(n)?t.setAttribute(!_n&&oe.propFix[n]||n,n):t[oe.camelCase("default-"+n)]=t[n]=!0,n}},oe.each(oe.expr.match.bool.source.match(/\w+/g),function(t,e){var n=Nn[e]||oe.find.attr;Nn[e]=Sn&&_n||!Tn.test(e)?function(t,e,i){var o,r;return i||(r=Nn[e],Nn[e]=o,o=null!=n(t,e,i)?e.toLowerCase():null,Nn[e]=r),o}:function(t,e,n){return n?void 0:t[oe.camelCase("default-"+e)]?e.toLowerCase():null}}),Sn&&_n||(oe.attrHooks.value={set:function(t,e,n){return oe.nodeName(t,"input")?void(t.defaultValue=e):xn&&xn.set(t,e,n)}}),_n||(xn={set:function(t,e,n){var i=t.getAttributeNode(n);return i||t.setAttributeNode(i=t.ownerDocument.createAttribute(n)),i.value=e+="","value"===n||e===t.getAttribute(n)?e:void 0}},Nn.id=Nn.name=Nn.coords=function(t,e,n){var i;return n?void 0:(i=t.getAttributeNode(e))&&""!==i.value?i.value:null},oe.valHooks.button={get:function(t,e){var n=t.getAttributeNode(e);return n&&n.specified?n.value:void 0},set:xn.set},oe.attrHooks.contenteditable={set:function(t,e,n){xn.set(t,""===e?!1:e,n)}},oe.each(["width","height"],function(t,e){oe.attrHooks[e]={set:function(t,n){return""===n?(t.setAttribute(e,"auto"),n):void 0}}})),ne.style||(oe.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var kn=/^(?:input|select|textarea|button|object)$/i,An=/^(?:a|area)$/i;oe.fn.extend({prop:function(t,e){return Ae(this,oe.prop,t,e,arguments.length>1)},removeProp:function(t){return t=oe.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(e){}})}}),oe.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,n){var i,o,r,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return r=1!==s||!oe.isXMLDoc(t),r&&(e=oe.propFix[e]||e,o=oe.propHooks[e]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(t,n,e))?i:t[e]=n:o&&"get"in o&&null!==(i=o.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=oe.find.attr(t,"tabindex");return e?parseInt(e,10):kn.test(t.nodeName)||An.test(t.nodeName)&&t.href?0:-1}}}}),ne.hrefNormalized||oe.each(["href","src"],function(t,e){oe.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),ne.optSelected||(oe.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),oe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){oe.propFix[this.toLowerCase()]=this}),ne.enctype||(oe.propFix.enctype="encoding");var Rn=/[\t\r\n\f]/g;oe.fn.extend({addClass:function(t){var e,n,i,o,r,s,a=0,l=this.length,c="string"==typeof t&&t;if(oe.isFunction(t))return this.each(function(e){oe(this).addClass(t.call(this,e,this.className))});if(c)for(e=(t||"").match(be)||[];l>a;a++)if(n=this[a],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Rn," "):" ")){for(r=0;o=e[r++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");s=oe.trim(i),n.className!==s&&(n.className=s)}return this},removeClass:function(t){var e,n,i,o,r,s,a=0,l=this.length,c=0===arguments.length||"string"==typeof t&&t;if(oe.isFunction(t))return this.each(function(e){oe(this).removeClass(t.call(this,e,this.className))});if(c)for(e=(t||"").match(be)||[];l>a;a++)if(n=this[a],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Rn," "):"")){for(r=0;o=e[r++];)for(;i.indexOf(" "+o+" ")>=0;)i=i.replace(" "+o+" "," ");s=t?oe.trim(i):"",n.className!==s&&(n.className=s)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):this.each(oe.isFunction(t)?function(n){oe(this).toggleClass(t.call(this,n,this.className,e),e)}:function(){if("string"===n)for(var e,i=0,o=oe(this),r=t.match(be)||[];e=r[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else(n===Ee||"boolean"===n)&&(this.className&&oe._data(this,"__className__",this.className),this.className=this.className||t===!1?"":oe._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Rn," ").indexOf(e)>=0)return!0;return!1}}),oe.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){oe.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),oe.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var $n=oe.now(),Dn=/\?/,On=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;oe.parseJSON=function(e){if(t.JSON&&t.JSON.parse)return t.JSON.parse(e+"");var n,i=null,o=oe.trim(e+"");return o&&!oe.trim(o.replace(On,function(t,e,o,r){return n&&e&&(i=0),0===i?t:(n=o||e,i+=!r-!o,"")}))?Function("return "+o)():oe.error("Invalid JSON: "+e)},oe.parseXML=function(e){var n,i;if(!e||"string"!=typeof e)return null;try{t.DOMParser?(i=new DOMParser,n=i.parseFromString(e,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(e))}catch(o){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||oe.error("Invalid XML: "+e),n};var Ln,In,Fn=/#.*$/,Hn=/([?&])_=[^&]*/,Pn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Bn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,jn=/^(?:GET|HEAD)$/,Mn=/^\/\//,qn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Un={},Wn={},zn="*/".concat("*");try{In=location.href}catch(Vn){In=pe.createElement("a"),In.href="",In=In.href}Ln=qn.exec(In.toLowerCase())||[],oe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:In,type:"GET",isLocal:Bn.test(Ln[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":oe.parseJSON,"text xml":oe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?M(M(t,oe.ajaxSettings),e):M(oe.ajaxSettings,t)},ajaxPrefilter:B(Un),ajaxTransport:B(Wn),ajax:function(t,e){function n(t,e,n,i){var o,u,y,v,w,x=e;2!==b&&(b=2,a&&clearTimeout(a),c=void 0,s=i||"",C.readyState=t>0?4:0,o=t>=200&&300>t||304===t,n&&(v=q(d,C,n)),v=U(d,v,C,o),o?(d.ifModified&&(w=C.getResponseHeader("Last-Modified"),w&&(oe.lastModified[r]=w),w=C.getResponseHeader("etag"),w&&(oe.etag[r]=w)),204===t||"HEAD"===d.type?x="nocontent":304===t?x="notmodified":(x=v.state,u=v.data,y=v.error,o=!y)):(y=x,(t||!x)&&(x="error",0>t&&(t=0))),C.status=t,C.statusText=(e||x)+"",o?p.resolveWith(h,[u,x,C]):p.rejectWith(h,[C,x,y]),C.statusCode(g),g=void 0,l&&f.trigger(o?"ajaxSuccess":"ajaxError",[C,d,o?u:y]),m.fireWith(h,[C,x]),l&&(f.trigger("ajaxComplete",[C,d]),--oe.active||oe.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,o,r,s,a,l,c,u,d=oe.ajaxSetup({},e),h=d.context||d,f=d.context&&(h.nodeType||h.jquery)?oe(h):oe.event,p=oe.Deferred(),m=oe.Callbacks("once memory"),g=d.statusCode||{},y={},v={},b=0,w="canceled",C={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!u)for(u={};e=Pn.exec(s);)u[e[1].toLowerCase()]=e[2];e=u[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?s:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return b||(t=v[n]=v[n]||t,y[t]=e),this},overrideMimeType:function(t){return b||(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>b)for(e in t)g[e]=[g[e],t[e]];else C.always(t[C.status]);return this},abort:function(t){var e=t||w;return c&&c.abort(e),n(0,e),this}};if(p.promise(C).complete=m.add,C.success=C.done,C.error=C.fail,d.url=((t||d.url||In)+"").replace(Fn,"").replace(Mn,Ln[1]+"//"),d.type=e.method||e.type||d.method||d.type,d.dataTypes=oe.trim(d.dataType||"*").toLowerCase().match(be)||[""],null==d.crossDomain&&(i=qn.exec(d.url.toLowerCase()),d.crossDomain=!(!i||i[1]===Ln[1]&&i[2]===Ln[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(Ln[3]||("http:"===Ln[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=oe.param(d.data,d.traditional)),j(Un,d,e,C),2===b)return C;l=d.global,l&&0===oe.active++&&oe.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!jn.test(d.type),r=d.url,d.hasContent||(d.data&&(r=d.url+=(Dn.test(r)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=Hn.test(r)?r.replace(Hn,"$1_="+$n++):r+(Dn.test(r)?"&":"?")+"_="+$n++)),d.ifModified&&(oe.lastModified[r]&&C.setRequestHeader("If-Modified-Since",oe.lastModified[r]),oe.etag[r]&&C.setRequestHeader("If-None-Match",oe.etag[r])),(d.data&&d.hasContent&&d.contentType!==!1||e.contentType)&&C.setRequestHeader("Content-Type",d.contentType),C.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+zn+"; q=0.01":""):d.accepts["*"]);for(o in d.headers)C.setRequestHeader(o,d.headers[o]);if(d.beforeSend&&(d.beforeSend.call(h,C,d)===!1||2===b))return C.abort();w="abort";for(o in{success:1,error:1,complete:1})C[o](d[o]);if(c=j(Wn,d,e,C)){C.readyState=1,l&&f.trigger("ajaxSend",[C,d]),d.async&&d.timeout>0&&(a=setTimeout(function(){C.abort("timeout")},d.timeout));try{b=1,c.send(y,n)}catch(x){if(!(2>b))throw x;n(-1,x)}}else n(-1,"No Transport");return C},getJSON:function(t,e,n){return oe.get(t,e,n,"json")},getScript:function(t,e){return oe.get(t,void 0,e,"script")}}),oe.each(["get","post"],function(t,e){oe[e]=function(t,n,i,o){return oe.isFunction(n)&&(o=o||i,i=n,n=void 0),oe.ajax({url:t,type:e,dataType:o,data:n,success:i})}}),oe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){oe.fn[e]=function(t){return this.on(e,t)}}),oe._evalUrl=function(t){return oe.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},oe.fn.extend({wrapAll:function(t){if(oe.isFunction(t))return this.each(function(e){oe(this).wrapAll(t.call(this,e))});if(this[0]){var e=oe(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return this.each(oe.isFunction(t)?function(e){oe(this).wrapInner(t.call(this,e))}:function(){var e=oe(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=oe.isFunction(t);return this.each(function(n){oe(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){oe.nodeName(this,"body")||oe(this).replaceWith(this.childNodes)}).end()}}),oe.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!ne.reliableHiddenOffsets()&&"none"===(t.style&&t.style.display||oe.css(t,"display"))},oe.expr.filters.visible=function(t){return!oe.expr.filters.hidden(t)};var Xn=/%20/g,Gn=/\[\]$/,Kn=/\r?\n/g,Yn=/^(?:submit|button|image|reset|file)$/i,Jn=/^(?:input|select|textarea|keygen)/i;oe.param=function(t,e){var n,i=[],o=function(t,e){e=oe.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=oe.ajaxSettings&&oe.ajaxSettings.traditional),oe.isArray(t)||t.jquery&&!oe.isPlainObject(t))oe.each(t,function(){o(this.name,this.value)});else for(n in t)W(n,t[n],e,o);return i.join("&").replace(Xn,"+")},oe.fn.extend({serialize:function(){return oe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=oe.prop(this,"elements");return t?oe.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!oe(this).is(":disabled")&&Jn.test(this.nodeName)&&!Yn.test(t)&&(this.checked||!Re.test(t))}).map(function(t,e){var n=oe(this).val();return null==n?null:oe.isArray(n)?oe.map(n,function(t){return{name:e.name,value:t.replace(Kn,"\r\n")}}):{name:e.name,value:n.replace(Kn,"\r\n")}}).get()}}),oe.ajaxSettings.xhr=void 0!==t.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&z()||V()}:z;var Qn=0,Zn={},ti=oe.ajaxSettings.xhr();t.ActiveXObject&&oe(t).on("unload",function(){for(var t in Zn)Zn[t](void 0,!0)}),ne.cors=!!ti&&"withCredentials"in ti,ti=ne.ajax=!!ti,ti&&oe.ajaxTransport(function(t){if(!t.crossDomain||ne.cors){var e;return{send:function(n,i){var o,r=t.xhr(),s=++Qn;if(r.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)r[o]=t.xhrFields[o];t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(o in n)void 0!==n[o]&&r.setRequestHeader(o,n[o]+"");r.send(t.hasContent&&t.data||null),e=function(n,o){var a,l,c;if(e&&(o||4===r.readyState))if(delete Zn[s],e=void 0,r.onreadystatechange=oe.noop,o)4!==r.readyState&&r.abort();else{c={},a=r.status,"string"==typeof r.responseText&&(c.text=r.responseText);try{l=r.statusText}catch(u){l=""}a||!t.isLocal||t.crossDomain?1223===a&&(a=204):a=c.text?200:404}c&&i(a,l,c,r.getAllResponseHeaders())},t.async?4===r.readyState?setTimeout(e):r.onreadystatechange=Zn[s]=e:e()},abort:function(){e&&e(void 0,!0)}}}}),oe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return oe.globalEval(t),t}}}),oe.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),oe.ajaxTransport("script",function(t){if(t.crossDomain){var e,n=pe.head||oe("head")[0]||pe.documentElement;return{send:function(i,o){e=pe.createElement("script"),e.async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,n){(n||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,n||o(200,"success"))},n.insertBefore(e,n.firstChild)},abort:function(){e&&e.onload(void 0,!0)}}}});var ei=[],ni=/(=)\?(?=&|$)|\?\?/;oe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=ei.pop()||oe.expando+"_"+$n++;return this[t]=!0,t}}),oe.ajaxPrefilter("json jsonp",function(e,n,i){var o,r,s,a=e.jsonp!==!1&&(ni.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&ni.test(e.data)&&"data");return a||"jsonp"===e.dataTypes[0]?(o=e.jsonpCallback=oe.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(ni,"$1"+o):e.jsonp!==!1&&(e.url+=(Dn.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return s||oe.error(o+" was not called"),s[0]},e.dataTypes[0]="json",r=t[o],t[o]=function(){s=arguments},i.always(function(){t[o]=r,e[o]&&(e.jsonpCallback=n.jsonpCallback,ei.push(o)),s&&oe.isFunction(r)&&r(s[0]),s=r=void 0}),"script"):void 0}),oe.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||pe;var i=de.exec(t),o=!n&&[];return i?[e.createElement(i[1])]:(i=oe.buildFragment([t],e,o),o&&o.length&&oe(o).remove(),oe.merge([],i.childNodes))};var ii=oe.fn.load;oe.fn.load=function(t,e,n){if("string"!=typeof t&&ii)return ii.apply(this,arguments);var i,o,r,s=this,a=t.indexOf(" ");return a>=0&&(i=oe.trim(t.slice(a,t.length)),t=t.slice(0,a)),oe.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),s.length>0&&oe.ajax({url:t,type:r,dataType:"html",data:e}).done(function(t){o=arguments,s.html(i?oe("<div>").append(oe.parseHTML(t)).find(i):t)}).complete(n&&function(t,e){s.each(n,o||[t.responseText,e,t])}),this},oe.expr.filters.animated=function(t){return oe.grep(oe.timers,function(e){return t===e.elem}).length};var oi=t.document.documentElement;oe.offset={setOffset:function(t,e,n){var i,o,r,s,a,l,c,u=oe.css(t,"position"),d=oe(t),h={};"static"===u&&(t.style.position="relative"),a=d.offset(),r=oe.css(t,"top"),l=oe.css(t,"left"),c=("absolute"===u||"fixed"===u)&&oe.inArray("auto",[r,l])>-1,c?(i=d.position(),s=i.top,o=i.left):(s=parseFloat(r)||0,o=parseFloat(l)||0),oe.isFunction(e)&&(e=e.call(t,n,a)),null!=e.top&&(h.top=e.top-a.top+s),null!=e.left&&(h.left=e.left-a.left+o),"using"in e?e.using.call(t,h):d.css(h)}},oe.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){oe.offset.setOffset(this,t,e)});var e,n,i={top:0,left:0},o=this[0],r=o&&o.ownerDocument;if(r)return e=r.documentElement,oe.contains(e,o)?(typeof o.getBoundingClientRect!==Ee&&(i=o.getBoundingClientRect()),n=X(r),{top:i.top+(n.pageYOffset||e.scrollTop)-(e.clientTop||0),left:i.left+(n.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):i},position:function(){if(this[0]){var t,e,n={top:0,left:0},i=this[0];return"fixed"===oe.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),oe.nodeName(t[0],"html")||(n=t.offset()),n.top+=oe.css(t[0],"borderTopWidth",!0),n.left+=oe.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-oe.css(i,"marginTop",!0),left:e.left-n.left-oe.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||oi;t&&!oe.nodeName(t,"html")&&"static"===oe.css(t,"position");)t=t.offsetParent;return t||oi})}}),oe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n=/Y/.test(e);oe.fn[t]=function(i){return Ae(this,function(t,i,o){var r=X(t);return void 0===o?r?e in r?r[e]:r.document.documentElement[i]:t[i]:void(r?r.scrollTo(n?oe(r).scrollLeft():o,n?o:oe(r).scrollTop()):t[i]=o)},t,i,arguments.length,null)}}),oe.each(["top","left"],function(t,e){oe.cssHooks[e]=_(ne.pixelPosition,function(t,n){return n?(n=en(t,e),on.test(n)?oe(t).position()[e]+"px":n):void 0})}),oe.each({Height:"height",Width:"width"},function(t,e){oe.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){oe.fn[i]=function(i,o){var r=arguments.length&&(n||"boolean"!=typeof i),s=n||(i===!0||o===!0?"margin":"border");return Ae(this,function(e,n,i){var o;return oe.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?oe.css(e,n,s):oe.style(e,n,i,s)},e,r?i:void 0,r,null)}})}),oe.fn.size=function(){return this.length},oe.fn.andSelf=oe.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return oe});var ri=t.jQuery,si=t.$;return oe.noConflict=function(e){return t.$===oe&&(t.$=si),e&&t.jQuery===oe&&(t.jQuery=ri),oe},typeof e===Ee&&(t.jQuery=t.$=oe),oe}),function(){var t,e;t=window.jQuery||("function"==typeof require?require("jquery"):void 0),e=t(document),t.turbo={version:"2.1.0",isReady:!1,use:function(t,n){return e.off(".turbo").on(""+t+".turbo",this.onLoad).on(""+n+".turbo",this.onFetch)},addCallback:function(n){return t.turbo.isReady&&n(t),e.on("turbo:ready",function(){return n(t)})},onLoad:function(){return t.turbo.isReady=!0,e.trigger("turbo:ready")},onFetch:function(){return t.turbo.isReady=!1},register:function(){return t(this.onLoad),t.fn.ready=this.addCallback}},t.turbo.register(),t.turbo.use("page:load","page:fetch")}.call(this),function(t,e){t.rails!==e&&t.error("jquery-ujs has already been loaded!");var n,i=t(document);t.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(e){var n=t('meta[name="csrf-token"]').attr("content");n&&e.setRequestHeader("X-CSRF-Token",n)},refreshCSRFTokens:function(){var e=t("meta[name=csrf-token]").attr("content"),n=t("meta[name=csrf-param]").attr("content");t('form input[name="'+n+'"]').val(e)},fire:function(e,n,i){var o=t.Event(n);return e.trigger(o,i),o.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t.attr("href")
},handleRemote:function(i){var o,r,s,a,l,c,u,d;if(n.fire(i,"ajax:before")){if(a=i.data("cross-domain"),l=a===e?null:a,c=i.data("with-credentials")||null,u=i.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,i.is("form")){o=i.attr("method"),r=i.attr("action"),s=i.serializeArray();var h=i.data("ujs:submit-button");h&&(s.push(h),i.data("ujs:submit-button",null))}else i.is(n.inputChangeSelector)?(o=i.data("method"),r=i.data("url"),s=i.serialize(),i.data("params")&&(s=s+"&"+i.data("params"))):i.is(n.buttonClickSelector)?(o=i.data("method")||"get",r=i.data("url"),s=i.serialize(),i.data("params")&&(s=s+"&"+i.data("params"))):(o=i.data("method"),r=n.href(i),s=i.data("params")||null);return d={type:o||"GET",data:s,dataType:u,beforeSend:function(t,o){return o.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+o.accepts.script),n.fire(i,"ajax:beforeSend",[t,o])?void i.trigger("ajax:send",t):!1},success:function(t,e,n){i.trigger("ajax:success",[t,e,n])},complete:function(t,e){i.trigger("ajax:complete",[t,e])},error:function(t,e,n){i.trigger("ajax:error",[t,e,n])},crossDomain:l},c&&(d.xhrFields={withCredentials:c}),r&&(d.url=r),n.ajax(d)}return!1},handleMethod:function(i){var o=n.href(i),r=i.data("method"),s=i.attr("target"),a=t("meta[name=csrf-token]").attr("content"),l=t("meta[name=csrf-param]").attr("content"),c=t('<form method="post" action="'+o+'"></form>'),u='<input name="_method" value="'+r+'" type="hidden" />';l!==e&&a!==e&&(u+='<input name="'+l+'" value="'+a+'" type="hidden" />'),s&&c.attr("target",s),c.hide().append(u).appendTo("body"),c.submit()},formElements:function(e,n){return e.is("form")?t(e[0].elements).filter(n):e.find(n)},disableFormElements:function(e){n.formElements(e,n.disableSelector).each(function(){n.disableFormElement(t(this))})},disableFormElement:function(t){var n,i;n=t.is("button")?"html":"val",i=t.data("disable-with"),t.data("ujs:enable-with",t[n]()),i!==e&&t[n](i),t.prop("disabled",!0)},enableFormElements:function(e){n.formElements(e,n.enableSelector).each(function(){n.enableFormElement(t(this))})},enableFormElement:function(t){var e=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[e](t.data("ujs:enable-with")),t.prop("disabled",!1)},allowAction:function(t){var e,i=t.data("confirm"),o=!1;return i?(n.fire(t,"confirm")&&(o=n.confirm(i),e=n.fire(t,"confirm:complete",[o])),o&&e):!0},blankInputs:function(e,n,i){var o,r,s=t(),a=n||"input,textarea",l=e.find(a);return l.each(function(){if(o=t(this),r=o.is("input[type=checkbox],input[type=radio]")?o.is(":checked"):o.val(),!r==!i){if(o.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+o.attr("name")+'"]').length)return!0;s=s.add(o)}}),s.length?s:!1},nonBlankInputs:function(t,e){return n.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){var i=t.data("disable-with");t.data("ujs:enable-with",t.html()),i!==e&&t.html(i),t.bind("click.railsDisable",function(t){return n.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},n.fire(i,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,i){t.crossDomain||n.CSRFProtection(i)}),i.delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(t(this))}),i.delegate(n.buttonDisableSelector,"ajax:complete",function(){n.enableFormElement(t(this))}),i.delegate(n.linkClickSelector,"click.rails",function(i){var o=t(this),r=o.data("method"),s=o.data("params"),a=i.metaKey||i.ctrlKey;if(!n.allowAction(o))return n.stopEverything(i);if(!a&&o.is(n.linkDisableSelector)&&n.disableElement(o),o.data("remote")!==e){if(a&&(!r||"GET"===r)&&!s)return!0;var l=n.handleRemote(o);return l===!1?n.enableElement(o):l.error(function(){n.enableElement(o)}),!1}return o.data("method")?(n.handleMethod(o),!1):void 0}),i.delegate(n.buttonClickSelector,"click.rails",function(e){var i=t(this);if(!n.allowAction(i))return n.stopEverything(e);i.is(n.buttonDisableSelector)&&n.disableFormElement(i);var o=n.handleRemote(i);return o===!1?n.enableFormElement(i):o.error(function(){n.enableFormElement(i)}),!1}),i.delegate(n.inputChangeSelector,"change.rails",function(e){var i=t(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(e)}),i.delegate(n.formSubmitSelector,"submit.rails",function(i){var o,r,s=t(this),a=s.data("remote")!==e;if(!n.allowAction(s))return n.stopEverything(i);if(s.attr("novalidate")==e&&(o=n.blankInputs(s,n.requiredInputSelector),o&&n.fire(s,"ajax:aborted:required",[o])))return n.stopEverything(i);if(a){if(r=n.nonBlankInputs(s,n.fileInputSelector)){setTimeout(function(){n.disableFormElements(s)},13);var l=n.fire(s,"ajax:aborted:file",[r]);return l||setTimeout(function(){n.enableFormElements(s)},13),l}return n.handleRemote(s),!1}setTimeout(function(){n.disableFormElements(s)},13)}),i.delegate(n.formInputClickSelector,"click.rails",function(e){var i=t(this);if(!n.allowAction(i))return n.stopEverything(e);var o=i.attr("name"),r=o?{name:o,value:i.val()}:null;i.closest("form").data("ujs:submit-button",r)}),i.delegate(n.formSubmitSelector,"ajax:send.rails",function(e){this==e.target&&n.disableFormElements(t(this))}),i.delegate(n.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&n.enableFormElements(t(this))}),t(function(){n.refreshCSRFTokens()}))}(jQuery),function(){!function(t){return"function"==typeof define&&define.amd?define(["jquery"],t):t(window.jQuery)}(function(t){"use strict";var e,n,i,o,r,s,a,l,c,u,d;return u="caret",e=function(){function e(t){this.$inputor=t,this.domInputor=this.$inputor[0]}return e.prototype.setPos=function(){return this.domInputor},e.prototype.getIEPosition=function(){return this.getPosition()},e.prototype.getPosition=function(){var t,e;return e=this.getOffset(),t=this.$inputor.offset(),e.left-=t.left,e.top-=t.top,e},e.prototype.getOldIEPos=function(){var t,e;return e=a.selection.createRange(),t=a.body.createTextRange(),t.moveToElementText(this.domInputor),t.setEndPoint("EndToEnd",e),t.text.length},e.prototype.getPos=function(){var t,e,n;return(n=this.range())?(t=n.cloneRange(),t.selectNodeContents(this.domInputor),t.setEnd(n.endContainer,n.endOffset),e=t.toString().length,t.detach(),e):a.selection?this.getOldIEPos():void 0},e.prototype.getOldIEOffset=function(){var t,e;return t=a.selection.createRange().duplicate(),t.moveStart("character",-1),e=t.getBoundingClientRect(),{height:e.bottom-e.top,left:e.left,top:e.top}},e.prototype.getOffset=function(){var e,n,i,o;if(c.getSelection&&(i=this.range())){if(i.endOffset-1<0)return null;e=i.cloneRange(),e.setStart(i.endContainer,i.endOffset-1),e.setEnd(i.endContainer,i.endOffset),o=e.getBoundingClientRect(),n={height:o.height,left:o.left+o.width,top:o.top},e.detach()}else a.selection&&(n=this.getOldIEOffset());return n&&(n.top+=t(c).scrollTop(),n.left+=t(c).scrollLeft()),n},e.prototype.range=function(){var t;if(c.getSelection)return t=c.getSelection(),t.rangeCount>0?t.getRangeAt(0):null},e}(),n=function(){function e(t){this.$inputor=t,this.domInputor=this.$inputor[0]}return e.prototype.getIEPos=function(){var t,e,n,i,o,r,s;return e=this.domInputor,r=a.selection.createRange(),o=0,r&&r.parentElement()===e&&(i=e.value.replace(/\r\n/g,"\n"),n=i.length,s=e.createTextRange(),s.moveToBookmark(r.getBookmark()),t=e.createTextRange(),t.collapse(!1),o=s.compareEndPoints("StartToEnd",t)>-1?n:-s.moveStart("character",-n)),o},e.prototype.getPos=function(){return a.selection?this.getIEPos():this.domInputor.selectionStart},e.prototype.setPos=function(t){var e,n;return e=this.domInputor,a.selection?(n=e.createTextRange(),n.move("character",t),n.select()):e.setSelectionRange&&e.setSelectionRange(t,t),e},e.prototype.getIEOffset=function(t){var e,n,i,o;return n=this.domInputor.createTextRange(),t||(t=this.getPos()),n.move("character",t),i=n.boundingLeft,o=n.boundingTop,e=n.boundingHeight,{left:i,top:o,height:e}},e.prototype.getOffset=function(e){var n,i,o;return n=this.$inputor,a.selection?(i=this.getIEOffset(e),i.top+=t(c).scrollTop()+n.scrollTop(),i.left+=t(c).scrollLeft()+n.scrollLeft(),i):(i=n.offset(),o=this.getPosition(e),i={left:i.left+o.left-n.scrollLeft(),top:i.top+o.top-n.scrollTop(),height:o.height})},e.prototype.getPosition=function(e){var n,o,r,s,a,l,c;return n=this.$inputor,s=function(e){return t("<div></div>").text(e).html()},void 0===e&&(e=this.getPos()),c=n.val().slice(0,e),r=n.val().slice(e),a="<span style='position: relative; display: inline;'>"+s(c)+"</span>",a+="<span id='caret' style='position: relative; display: inline;'>|</span>",a+="<span style='position: relative; display: inline;'>"+s(r)+"</span>",l=new i(n),o=l.create(a).rect()},e.prototype.getIEPosition=function(t){var e,n,i,o,r;return i=this.getIEOffset(t),n=this.$inputor.offset(),o=i.left-n.left,r=i.top-n.top,e=i.height,{left:o,top:r,height:e}},e}(),i=function(){function e(t){this.$inputor=t}return e.prototype.css_attr=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap"],e.prototype.mirrorCss=function(){var e,n=this;return e={position:"absolute",left:-9999,top:0,zIndex:-2e4},"TEXTAREA"===this.$inputor.prop("tagName")&&this.css_attr.push("width"),t.each(this.css_attr,function(t,i){return e[i]=n.$inputor.css(i)}),e},e.prototype.create=function(e){return this.$mirror=t("<div></div>"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(e),this.$inputor.after(this.$mirror),this},e.prototype.rect=function(){var t,e,n;return t=this.$mirror.find("#caret"),e=t.position(),n={left:e.left,top:e.top,height:t.height()},this.$mirror.remove(),n},e}(),o={contentEditable:function(t){return!(!t[0].contentEditable||"true"!==t[0].contentEditable)}},s={pos:function(t){return t||0===t?this.setPos(t):this.getPos()},position:function(t){return a.selection?this.getIEPosition(t):this.getPosition(t)},offset:function(t){var e;return e=this.getOffset(t)}},a=null,c=null,l=null,d=function(t){var e;return(e=null!=t?t.iframe:void 0)?(l=e,c=e.contentWindow,a=e.contentDocument||c.document):(l=void 0,c=window,a=document)},r=function(t){var e;a=t[0].ownerDocument,c=a.defaultView||a.parentWindow;try{return l=c.frameElement}catch(n){e=n}},t.fn.caret=function(i,r,a){var l;return s[i]?(t.isPlainObject(r)?(d(r),r=void 0):d(a),l=o.contentEditable(this)?new e(this):new n(this),s[i].apply(l,[r])):t.error("Method "+i+" does not exist on jQuery.caret")},t.fn.caret.EditableCaret=e,t.fn.caret.InputCaret=n,t.fn.caret.Utils=o,t.fn.caret.apis=s})}.call(this),function(t,e){"function"==typeof define&&define.amd?define(["jquery"],function(n){return t.returnExportsGlobal=e(n)}):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(this,function(t){var e,n,i,o,r,s,a,l=[].slice;n=function(){function e(e){this.current_flag=null,this.controllers={},this.alias_maps={},this.$inputor=t(e),this.setIframe(),this.listen()}return e.prototype.createContainer=function(e){return 0===(this.$el=t("#atwho-container",e)).length?t(e.body).append(this.$el=t("<div id='atwho-container'></div>")):void 0},e.prototype.setIframe=function(t,e){var n;return null==e&&(e=!1),t?(this.window=t.contentWindow,this.document=t.contentDocument||this.window.document,this.iframe=t):(this.document=document,this.window=window,this.iframe=null),(this.iframeStandalone=e)?(null!=(n=this.$el)&&n.remove(),this.createContainer(this.document)):this.createContainer(document)},e.prototype.controller=function(t){var e,n,i,o;if(this.alias_maps[t])n=this.controllers[this.alias_maps[t]];else{o=this.controllers;for(i in o)if(e=o[i],i===t){n=e;break}}return n?n:this.controllers[this.current_flag]},e.prototype.set_context_for=function(t){return this.current_flag=t,this},e.prototype.reg=function(t,e){var n,o;return n=(o=this.controllers)[t]||(o[t]=new i(this,t)),e.alias&&(this.alias_maps[e.alias]=t),n.init(e),this},e.prototype.listen=function(){return this.$inputor.on("keyup.atwhoInner",function(t){return function(e){return t.on_keyup(e)}}(this)).on("keydown.atwhoInner",function(t){return function(e){return t.on_keydown(e)}}(this)).on("scroll.atwhoInner",function(t){return function(e){var n;return null!=(n=t.controller())?n.view.hide(e):void 0}}(this)).on("blur.atwhoInner",function(t){return function(e){var n;return(n=t.controller())?n.view.hide(e,n.get_opt("display_timeout")):void 0}}(this)).on("click.atwhoInner",function(t){return function(){return t.dispatch()}}(this))},e.prototype.shutdown=function(){var t,e,n;n=this.controllers;for(e in n)t=n[e],t.destroy(),delete this.controllers[e];return this.$inputor.off(".atwhoInner"),this.$el.remove()},e.prototype.dispatch=function(){return t.map(this.controllers,function(t){return function(e){var n;return(n=e.get_opt("delay"))?(clearTimeout(t.delayedCallback),t.delayedCallback=setTimeout(function(){return e.look_up()?t.set_context_for(e.at):void 0},n)):e.look_up()?t.set_context_for(e.at):void 0}}(this))},e.prototype.on_keyup=function(e){var n;switch(e.keyCode){case r.ESC:e.preventDefault(),null!=(n=this.controller())&&n.view.hide();break;case r.DOWN:case r.UP:case r.CTRL:t.noop();break;case r.P:case r.N:e.ctrlKey||this.dispatch();break;default:this.dispatch()}},e.prototype.on_keydown=function(e){var n,i;if(n=null!=(i=this.controller())?i.view:void 0,n&&n.visible())switch(e.keyCode){case r.ESC:e.preventDefault(),n.hide(e);break;case r.UP:e.preventDefault(),n.prev();break;case r.DOWN:e.preventDefault(),n.next();break;case r.P:if(!e.ctrlKey)return;e.preventDefault(),n.prev();break;case r.N:if(!e.ctrlKey)return;e.preventDefault(),n.next();break;case r.TAB:case r.ENTER:if(!n.visible())return;e.preventDefault(),n.choose(e);break;default:t.noop()}},e}(),i=function(){function e(e,n){this.app=e,this.at=n,this.$inputor=this.app.$inputor,this.id=this.$inputor[0].id||this.uid(),this.setting=null,this.query=null,this.pos=0,this.cur_rect=null,this.range=null,0===(this.$el=t("#atwho-ground-"+this.id,this.app.$el)).length&&this.app.$el.append(this.$el=t("<div id='atwho-ground-"+this.id+"'></div>")),this.model=new s(this),this.view=new a(this)}return e.prototype.uid=function(){return(Math.random().toString(16)+"000000000").substr(2,8)+(new Date).getTime()},e.prototype.init=function(e){return this.setting=t.extend({},this.setting||t.fn.atwho["default"],e),this.view.init(),this.model.reload(this.setting.data)},e.prototype.destroy=function(){return this.trigger("beforeDestroy"),this.model.destroy(),this.view.destroy(),this.$el.remove()},e.prototype.call_default=function(){var e,n,i;i=arguments[0],e=2<=arguments.length?l.call(arguments,1):[];try{return o[i].apply(this,e)}catch(r){return n=r,t.error(""+n+" Or maybe At.js doesn't have function "+i)}},e.prototype.trigger=function(t,e){var n,i;return null==e&&(e=[]),e.push(this),n=this.get_opt("alias"),i=n?""+t+"-"+n+".atwho":""+t+".atwho",this.$inputor.trigger(i,e)},e.prototype.callbacks=function(t){return this.get_opt("callbacks")[t]||o[t]},e.prototype.get_opt=function(t){var e;try{return this.setting[t]}catch(n){return e=n,null}},e.prototype.content=function(){var t;if(this.$inputor.is("textarea, input"))return this.$inputor.val();if(t=this.mark_range())return t.startContainer.parentNode.textContent||""},e.prototype.catch_query=function(){var t,e,n,i,o,r;return e=this.content(),t=this.$inputor.caret("pos",{iframe:this.app.iframe}),r=e.slice(0,t),i=this.callbacks("matcher").call(this,this.at,r,this.get_opt("start_with_space")),"string"==typeof i&&i.length<=this.get_opt("max_len",20)?(o=t-i.length,n=o+i.length,this.pos=o,i={text:i,head_pos:o,end_pos:n},this.trigger("matched",[this.at,i.text])):(i=null,this.view.hide()),this.query=i},e.prototype.rect=function(){var e,n,i;if(e=this.$inputor.caret("offset",this.pos-1,{iframe:this.app.iframe}))return this.app.iframe&&!this.app.iframeStandalone&&(n=t(this.app.iframe).offset(),e.left+=n.left,e.top+=n.top),this.$inputor.is("[contentEditable]")&&(e=this.cur_rect||(this.cur_rect=e)),i=this.app.document.selection?0:2,{left:e.left,top:e.top,bottom:e.top+e.height+i}},e.prototype.reset_rect=function(){return this.$inputor.is("[contentEditable]")?this.cur_rect=null:void 0},e.prototype.mark_range=function(){var t;if(this.$inputor.is("[contentEditable]"))return this.app.window.getSelection&&(t=this.app.window.getSelection()).rangeCount>0?this.range=t.getRangeAt(0):this.app.document.selection?this.ie8_range=this.app.document.selection.createRange():void 0},e.prototype.insert_content_for=function(e){var n,i,o;return i=e.data("value"),o=this.get_opt("insert_tpl"),this.$inputor.is("textarea, input")||!o?i:(n=t.extend({},e.data("item-data"),{"atwho-data-value":i,"atwho-at":this.at}),this.callbacks("tpl_eval").call(this,o,n))},e.prototype.insert=function(e){var n,i,o,r,s,a,l,c,u,d,h,f;if(n=this.$inputor,u=this.callbacks("inserting_wrapper").call(this,n,e,this.get_opt("suffix")),n.is("textarea, input"))a=n.val(),l=a.slice(0,Math.max(this.query.head_pos-this.at.length,0)),c=""+l+u+a.slice(this.query.end_pos||0),n.val(c),n.caret("pos",l.length+u.length,{iframe:this.app.iframe});else if(r=this.range){for(o=r.startOffset-(this.query.end_pos-this.query.head_pos)-this.at.length,r.setStart(r.endContainer,Math.max(o,0)),r.setEnd(r.endContainer,r.endOffset),r.deleteContents(),f=t(u,this.app.document),d=0,h=f.length;h>d;d++)i=f[d],r.insertNode(i),r.setEndAfter(i),r.collapse(!1);s=this.app.window.getSelection(),s.removeAllRanges(),s.addRange(r)}else(r=this.ie8_range)&&(r.moveStart("character",this.query.end_pos-this.query.head_pos-this.at.length),r.pasteHTML(u),r.collapse(!1),r.select());return n.is(":focus")||n.focus(),n.change()},e.prototype.render_view=function(t){var e;return e=this.get_opt("search_key"),t=this.callbacks("sorter").call(this,this.query.text,t.slice(0,1001),e),this.view.render(t.slice(0,this.get_opt("limit")))},e.prototype.look_up=function(){var e,n;if(e=this.catch_query())return n=function(t){return t&&t.length>0?this.render_view(t):this.view.hide()},this.model.query(e.text,t.proxy(n,this)),e},e}(),s=function(){function e(t){this.context=t,this.at=this.context.at,this.storage=this.context.$inputor}return e.prototype.destroy=function(){return this.storage.data(this.at,null)},e.prototype.saved=function(){return this.fetch()>0},e.prototype.query=function(t,e){var n,i,o;return n=this.fetch(),i=this.context.get_opt("search_key"),n=this.context.callbacks("filter").call(this.context,t,n,i)||[],o=this.context.callbacks("remote_filter"),n.length>0||!o&&0===n.length?e(n):o.call(this.context,t,e)},e.prototype.fetch=function(){return this.storage.data(this.at)||[]},e.prototype.save=function(t){return this.storage.data(this.at,this.context.callbacks("before_save").call(this.context,t||[]))},e.prototype.load=function(t){return!this.saved()&&t?this._load(t):void 0},e.prototype.reload=function(t){return this._load(t)},e.prototype._load=function(e){return"string"==typeof e?t.ajax(e,{dataType:"json"}).done(function(t){return function(e){return t.save(e)}}(this)):this.save(e)},e}(),a=function(){function e(e){this.context=e,this.$el=t("<div class='atwho-view'><ul class='atwho-view-ul'></ul></div>"),this.timeout_id=null,this.context.$el.append(this.$el),this.bind_event()}return e.prototype.init=function(){var t;return t=this.context.get_opt("alias")||this.context.at.charCodeAt(0),this.$el.attr({id:"at-view-"+t})},e.prototype.destroy=function(){return this.$el.remove()},e.prototype.bind_event=function(){var e;return e=this.$el.find("ul"),e.on("mouseenter.atwho-view","li",function(n){return e.find(".cur").removeClass("cur"),t(n.currentTarget).addClass("cur")}).on("click.atwho-view","li",function(n){return function(i){return e.find(".cur").removeClass("cur"),t(i.currentTarget).addClass("cur"),n.choose(i),i.preventDefault()}}(this))},e.prototype.visible=function(){return this.$el.is(":visible")},e.prototype.choose=function(t){var e,n;return(e=this.$el.find(".cur")).length&&(n=this.context.insert_content_for(e),this.context.insert(this.context.callbacks("before_insert").call(this.context,n,e),e),this.context.trigger("inserted",[e,t]),this.hide(t)),this.context.get_opt("hide_without_suffix")?this.stop_showing=!0:void 0},e.prototype.reposition=function(e){var n,i,o,r;return r=this.context.app.iframeStandalone?this.context.app.window:window,e.bottom+this.$el.height()-t(r).scrollTop()>t(r).height()&&(e.bottom=e.top-this.$el.height()),e.left>(i=t(r).width()-this.$el.width()-5)&&(e.left=i),n={left:e.left,top:e.bottom},null!=(o=this.context.callbacks("before_reposition"))&&o.call(this.context,n),this.$el.offset(n),this.context.trigger("reposition",[n])},e.prototype.next=function(){var t,e;return t=this.$el.find(".cur").removeClass("cur"),e=t.next(),e.length||(e=this.$el.find("li:first")),e.addClass("cur"),this.$el.animate({scrollTop:Math.max(0,t.innerHeight()*(e.index()+2)-this.$el.height())},150)},e.prototype.prev=function(){var t,e;return t=this.$el.find(".cur").removeClass("cur"),e=t.prev(),e.length||(e=this.$el.find("li:last")),e.addClass("cur"),this.$el.animate({scrollTop:Math.max(0,t.innerHeight()*(e.index()+2)-this.$el.height())},150)},e.prototype.show=function(){var t;return this.stop_showing?void(this.stop_showing=!1):(this.context.mark_range(),this.visible()||(this.$el.show(),this.$el.scrollTop(0),this.context.trigger("shown")),(t=this.context.rect())?this.reposition(t):void 0)},e.prototype.hide=function(t,e){var n;if(this.visible())return isNaN(e)?(this.context.reset_rect(),this.$el.hide(),this.context.trigger("hidden",[t])):(n=function(t){return function(){return t.hide()}}(this),clearTimeout(this.timeout_id),this.timeout_id=setTimeout(n,e))},e.prototype.render=function(e){var n,i,o,r,s,a,l;if(!(t.isArray(e)&&e.length>0))return void this.hide();for(this.$el.find("ul").empty(),i=this.$el.find("ul"),s=this.context.get_opt("tpl"),a=0,l=e.length;l>a;a++)o=e[a],o=t.extend({},o,{"atwho-at":this.context.at}),r=this.context.callbacks("tpl_eval").call(this.context,s,o),n=t(this.context.callbacks("highlighter").call(this.context,r,this.context.query.text)),n.data("item-data",o),i.append(n);return this.show(),this.context.get_opt("highlight_first")?i.find("li:first").addClass("cur"):void 0},e}(),r={DOWN:40,UP:38,ESC:27,TAB:9,ENTER:13,CTRL:17,P:80,N:78},o={before_save:function(e){var n,i,o,r;if(!t.isArray(e))return e;for(r=[],i=0,o=e.length;o>i;i++)n=e[i],r.push(t.isPlainObject(n)?n:{name:n});return r},matcher:function(t,e,n){var i,o,r,s;return t=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),n&&(t="(?:^|\\s)"+t),r=decodeURI("%C3%80"),s=decodeURI("%C3%BF"),o=new RegExp(""+t+"([A-Za-z"+r+"-"+s+"0-9_+-]*)$|"+t+"([^\\x00-\\xff]*)$","gi"),i=o.exec(e),i?i[2]||i[1]:null},filter:function(t,e,n){var i,o,r,s;for(s=[],o=0,r=e.length;r>o;o++)i=e[o],~new String(i[n]).toLowerCase().indexOf(t.toLowerCase())&&s.push(i);return s},remote_filter:null,sorter:function(t,e,n){var i,o,r,s;if(!t)return e;for(s=[],o=0,r=e.length;r>o;o++)i=e[o],i.atwho_order=new String(i[n]).toLowerCase().indexOf(t.toLowerCase()),i.atwho_order>-1&&s.push(i);return s.sort(function(t,e){return t.atwho_order-e.atwho_order})},tpl_eval:function(t,e){var n;try{return t.replace(/\$\{([^\}]*)\}/g,function(t,n){return e[n]})}catch(i){return n=i,""}},highlighter:function(t,e){var n;return e?(n=new RegExp(">\\s*(\\w*?)("+e.replace("+","\\+")+")(\\w*)\\s*<","ig"),t.replace(n,function(t,e,n,i){return"> "+e+"<strong>"+n+"</strong>"+i+" <"})):t},before_insert:function(t){return t},inserting_wrapper:function(t,e,n){var i;return n=""===n?n:n||" ",t.is("textarea, input")?""+e+n:"true"===t.attr("contentEditable")?(n=" "===n?"&nbsp;":n,/firefox/i.test(navigator.userAgent)?i="<span>"+e+n+"</span>":(n="<span contenteditable='false'>"+n+"</span>",i="<span contenteditable='false'>"+e+n+"</span>"),this.app.document.selection&&(i="<span contenteditable='true'>"+e+"</span>"),i+"<span></span>"):void 0}},e={load:function(t,e){var n;return(n=this.controller(t))?n.model.load(e):void 0},setIframe:function(t,e){return this.setIframe(t,e),null},run:function(){return this.dispatch()},destroy:function(){return this.shutdown(),this.$inputor.data("atwho",null)}},t.fn.atwho=function(i){var o,r;return r=arguments,o=null,this.filter('textarea, input, [contenteditable=""], [contenteditable=true]').each(function(){var s,a;return(a=(s=t(this)).data("atwho"))||s.data("atwho",a=new n(this)),"object"!=typeof i&&i?e[i]&&a?o=e[i].apply(a,Array.prototype.slice.call(r,1)):t.error("Method "+i+" does not exist on jQuery.caret"):a.reg(i.at,i)}),o||this},t.fn.atwho["default"]={at:void 0,alias:void 0,data:null,tpl:"<li data-value='${atwho-at}${name}'>${name}</li>",insert_tpl:"<span id='${id}'>${atwho-data-value}</span>",callbacks:o,search_key:"name",suffix:void 0,hide_without_suffix:!1,start_with_space:!0,highlight_first:!0,limit:5,max_len:20,display_timeout:300,delay:null}}),function(t){"use strict";t.ajaxPrefilter(function(t){return t.iframe?"iframe":void 0}),t.ajaxTransport("iframe",function(e,n,i){function o(){u.prop("disabled",!1),s.remove(),a.bind("load",function(){a.remove()}),a.attr("src","javascript:false;")}var r,s=null,a=null,l="iframe-"+t.now(),c=t(e.files).filter(":file:enabled"),u=null;return e.dataTypes.shift(),c.length?(s=t("<form enctype='multipart/form-data' method='post'></form>").hide().attr({action:e.url,target:l}),"string"==typeof e.data&&e.data.length>0&&t.error("data must not be serialized"),t.each(e.data||{},function(e,n){t.isPlainObject(n)&&(e=n.name,n=n.value),t("<input type='hidden' />").attr({name:e,value:n}).appendTo(s)}),t("<input type='hidden' value='IFrame' name='X-Requested-With' />").appendTo(s),r=e.dataTypes[0]&&e.accepts[e.dataTypes[0]]?e.accepts[e.dataTypes[0]]+("*"!==e.dataTypes[0]?", */*; q=0.01":""):e.accepts["*"],t("<input type='hidden' name='X-Http-Accept'>").attr("value",r).appendTo(s),u=c.after(function(){return t(this).clone().prop("disabled",!0)}).next(),c.appendTo(s),{send:function(e,n){a=t("<iframe src='javascript:false;' name='"+l+"' id='"+l+"' style='display:none'></iframe>"),a.bind("load",function(){a.unbind("load").bind("load",function(){var t=this.contentWindow?this.contentWindow.document:this.contentDocument?this.contentDocument:this.document,e=t.documentElement?t.documentElement:t.body,r=e.getElementsByTagName("textarea")[0],s=r&&r.getAttribute("data-type")||null,a=r&&r.getAttribute("data-status")||200,l=r&&r.getAttribute("data-statusText")||"OK",c={html:e.innerHTML,text:s?r.value:e?e.textContent||e.innerText:null};o(),i.responseText||(i.responseText=c.text),n(a,l,c,s?"Content-Type: "+s:null)}),s[0].submit()}),t("body").append(s,a)},abort:function(){null!==a&&(a.unbind("load").attr("src","javascript:false;"),o())}}):void 0})}(jQuery),function(t){var e;t.remotipart=e={setup:function(n){var i=n.data("ujs:submit-button"),o=t('meta[name="csrf-param"]').attr("content"),r=t('meta[name="csrf-token"]').attr("content"),s=n.find('input[name="'+o+'"]').length;n.one("ajax:beforeSend.remotipart",function(a,l,c){return delete c.beforeSend,c.iframe=!0,c.files=t(t.rails.fileInputSelector,n),c.data=n.serializeArray(),i&&c.data.push(i),c.files.each(function(t,e){for(var n=c.data.length-1;n>=0;n--)c.data[n].name==e.name&&c.data.splice(n,1)}),c.processData=!1,void 0===c.dataType&&(c.dataType="script *"),c.data.push({name:"remotipart_submitted",value:!0}),r&&o&&!s&&c.data.push({name:o,value:r}),t.rails.fire(n,"ajax:remotipartSubmit",[l,c])&&(t.rails.ajax(c),setTimeout(function(){t.rails.disableFormElements(n)},20)),e.teardown(n),!1}).data("remotipartSubmitted",!0)},teardown:function(t){t.unbind("ajax:beforeSend.remotipart").removeData("remotipartSubmitted")}},t(document).on("ajax:aborted:file","form",function(){var n=t(this);return e.setup(n),t.rails.handleRemote(n),!1})}(jQuery);var wysihtml5={version:"0.3.0",commands:{},dom:{},quirks:{},toolbar:{},lang:{},selection:{},views:{},INVISIBLE_SPACE:"\ufeff",EMPTY_FUNCTION:function(){},ELEMENT_NODE:1,TEXT_NODE:3,BACKSPACE_KEY:8,ENTER_KEY:13,ESCAPE_KEY:27,SPACE_KEY:32,DELETE_KEY:46};window.rangy=function(){function t(t,e){var n=typeof t[e];return n==d||!(n!=u||!t[e])||"unknown"==n}function e(t,e){return!(typeof t[e]!=u||!t[e])}function n(t,e){return typeof t[e]!=h}function i(t){return function(e,n){for(var i=n.length;i--;)if(!t(e,n[i]))return!1;return!0}}function o(t){return t&&y(t,g)&&b(t,m)}function r(t){window.alert("Rangy not supported in your browser. Reason: "+t),w.initialized=!0,w.supported=!1}function s(t){var e="Rangy warning: "+t;w.config.alertOnWarn?window.alert(e):typeof window.console!=h&&typeof window.console.log!=h&&window.console.log(e)}function a(){if(!w.initialized){var n,i=!1,s=!1;t(document,"createRange")&&(n=document.createRange(),y(n,p)&&b(n,f)&&(i=!0),n.detach());var a=e(document,"body")?document.body:document.getElementsByTagName("body")[0];a&&t(a,"createTextRange")&&(n=a.createTextRange(),o(n)&&(s=!0)),i||s||r("Neither Range nor TextRange are implemented"),w.initialized=!0,w.features={implementsDomRange:i,implementsTextRange:s};for(var l=x.concat(C),c=0,u=l.length;u>c;++c)try{l[c](w)}catch(d){e(window,"console")&&t(window.console,"log")&&window.console.log("Init listener threw an exception. Continuing.",d)}}}function l(t){t=t||window,a();for(var e=0,n=E.length;n>e;++e)E[e](t)}function c(t){this.name=t,this.initialized=!1,this.supported=!1}var u="object",d="function",h="undefined",f=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer","START_TO_START","START_TO_END","END_TO_START","END_TO_END"],p=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],m=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],g=["collapse","compareEndPoints","duplicate","getBookmark","moveToBookmark","moveToElementText","parentElement","pasteHTML","select","setEndPoint","getBoundingClientRect"],y=i(t),v=i(e),b=i(n),w={version:"1.2.2",initialized:!1,supported:!0,util:{isHostMethod:t,isHostObject:e,isHostProperty:n,areHostMethods:y,areHostObjects:v,areHostProperties:b,isTextRange:o},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!1}};w.fail=r,w.warn=s,{}.hasOwnProperty?w.util.extend=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}:r("hasOwnProperty not supported");var C=[],x=[];w.init=a,w.addInitListener=function(t){w.initialized?t(w):C.push(t)};var E=[];w.addCreateMissingNativeApiListener=function(t){E.push(t)},w.createMissingNativeApi=l,c.prototype.fail=function(t){throw this.initialized=!0,this.supported=!1,new Error("Module '"+this.name+"' failed to load: "+t)},c.prototype.warn=function(t){w.warn("Module "+this.name+": "+t)},c.prototype.createError=function(t){return new Error("Error in Rangy "+this.name+" module: "+t)},w.createModule=function(t,e){var n=new c(t);w.modules[t]=n,x.push(function(t){e(t,n),n.initialized=!0,n.supported=!0})},w.requireModules=function(t){for(var e,n,i=0,o=t.length;o>i;++i){if(n=t[i],e=w.modules[n],!(e&&e instanceof c))throw new Error("Module '"+n+"' not found");if(!e.supported)throw new Error("Module '"+n+"' not supported")}};var N=!1,T=function(){N||(N=!0,w.initialized||a())};return typeof window==h?void r("No window found"):typeof document==h?void r("No document found"):(t(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",T,!1),t(window,"addEventListener")?window.addEventListener("load",T,!1):t(window,"attachEvent")?window.attachEvent("onload",T):r("Window does not have required addEventListener or attachEvent method"),w)}(),rangy.createModule("DomUtil",function(t,e){function n(t){var e;return typeof t.namespaceURI==T||null===(e=t.namespaceURI)||"http://www.w3.org/1999/xhtml"==e}function i(t){var e=t.parentNode;return 1==e.nodeType?e:null}function o(t){for(var e=0;t=t.previousSibling;)e++;return e}function r(t){var e;return c(t)?t.length:(e=t.childNodes)?e.length:0}function s(t,e){var n,i=[];for(n=t;n;n=n.parentNode)i.push(n);for(n=e;n;n=n.parentNode)if(A(i,n))return n;return null}function a(t,e,n){for(var i=n?e:e.parentNode;i;){if(i===t)return!0;i=i.parentNode}return!1}function l(t,e,n){for(var i,o=n?t:t.parentNode;o;){if(i=o.parentNode,i===e)return o;o=i}return null}function c(t){var e=t.nodeType;return 3==e||4==e||8==e}function u(t,e){var n=e.nextSibling,i=e.parentNode;
return n?i.insertBefore(t,n):i.appendChild(t),t}function d(t,e){var n=t.cloneNode(!1);return n.deleteData(0,e),t.deleteData(e,t.length-e),u(n,t),n}function h(t){if(9==t.nodeType)return t;if(typeof t.ownerDocument!=T)return t.ownerDocument;if(typeof t.document!=T)return t.document;if(t.parentNode)return h(t.parentNode);throw new Error("getDocument: no document found for node")}function f(t){var e=h(t);if(typeof e.defaultView!=T)return e.defaultView;if(typeof e.parentWindow!=T)return e.parentWindow;throw new Error("Cannot get a window object for node")}function p(t){if(typeof t.contentDocument!=T)return t.contentDocument;if(typeof t.contentWindow!=T)return t.contentWindow.document;throw new Error("getIframeWindow: No Document object found for iframe element")}function m(t){if(typeof t.contentWindow!=T)return t.contentWindow;if(typeof t.contentDocument!=T)return t.contentDocument.defaultView;throw new Error("getIframeWindow: No Window object found for iframe element")}function g(t){return _.isHostObject(t,"body")?t.body:t.getElementsByTagName("body")[0]}function y(t){for(var e;e=t.parentNode;)t=e;return t}function v(t,e,n,i){var r,a,c,u,d;if(t==n)return e===i?0:i>e?-1:1;if(r=l(n,t,!0))return e<=o(r)?-1:1;if(r=l(t,n,!0))return o(r)<i?-1:1;if(a=s(t,n),c=t===a?a:l(t,a,!0),u=n===a?a:l(n,a,!0),c===u)throw new Error("comparePoints got to case 4 and childA and childB are the same!");for(d=a.firstChild;d;){if(d===c)return-1;if(d===u)return 1;d=d.nextSibling}throw new Error("Should not be here!")}function b(t){for(var e,n=h(t).createDocumentFragment();e=t.firstChild;)n.appendChild(e);return n}function w(t){if(!t)return"[No node]";if(c(t))return'"'+t.data+'"';if(1==t.nodeType){var e=t.id?' id="'+t.id+'"':"";return"<"+t.nodeName+e+">["+t.childNodes.length+"]"}return t.nodeName}function C(t){this.root=t,this._next=t}function x(t){return new C(t)}function E(t,e){this.node=t,this.offset=e}function N(t){this.code=this[t],this.codeName=t,this.message="DOMException: "+this.codeName}var T="undefined",_=t.util;_.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||e.fail("document missing a Node creation method"),_.isHostMethod(document,"getElementsByTagName")||e.fail("document missing getElementsByTagName method");var S=document.createElement("div");_.areHostMethods(S,["insertBefore","appendChild","cloneNode"]||!_.areHostObjects(S,["previousSibling","nextSibling","childNodes","parentNode"]))||e.fail("Incomplete Element implementation"),_.isHostProperty(S,"innerHTML")||e.fail("Element is missing innerHTML property");var k=document.createTextNode("test");_.areHostMethods(k,["splitText","deleteData","insertData","appendData","cloneNode"]||!_.areHostObjects(S,["previousSibling","nextSibling","childNodes","parentNode"])||!_.areHostProperties(k,["data"]))||e.fail("Incomplete Text Node implementation");var A=function(t,e){for(var n=t.length;n--;)if(t[n]===e)return!0;return!1};C.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var t,e,n=this._current=this._next;if(this._current)if(t=n.firstChild)this._next=t;else{for(e=null;n!==this.root&&!(e=n.nextSibling);)n=n.parentNode;this._next=e}return this._current},detach:function(){this._current=this._next=this.root=null}},E.prototype={equals:function(t){return this.node===t.node&this.offset==t.offset},inspect:function(){return"[DomPosition("+w(this.node)+":"+this.offset+")]"}},N.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11},N.prototype.toString=function(){return this.message},t.dom={arrayContains:A,isHtmlNamespace:n,parentElement:i,getNodeIndex:o,getNodeLength:r,getCommonAncestor:s,isAncestorOf:a,getClosestAncestorIn:l,isCharacterDataNode:c,insertAfter:u,splitDataNode:d,getDocument:h,getWindow:f,getIframeWindow:m,getIframeDocument:p,getBody:g,getRootContainer:y,comparePoints:v,inspectNode:w,fragmentFromNodeChildren:b,createIterator:x,DomPosition:E},t.DOMException=N}),rangy.createModule("DomRange",function(t){function e(t,e){return 3!=t.nodeType&&(F.isAncestorOf(t,e.startContainer,!0)||F.isAncestorOf(t,e.endContainer,!0))}function n(t){return F.getDocument(t.startContainer)}function i(t,e,n){var i=t._listeners[e];if(i)for(var o=0,r=i.length;r>o;++o)i[o].call(t,{target:t,args:n})}function o(t){return new H(t.parentNode,F.getNodeIndex(t))}function r(t){return new H(t.parentNode,F.getNodeIndex(t)+1)}function s(t,e,n){var i=11==t.nodeType?t.firstChild:t;return F.isCharacterDataNode(e)?n==e.length?F.insertAfter(t,e):e.parentNode.insertBefore(t,0==n?e:F.splitDataNode(e,n)):n>=e.childNodes.length?e.appendChild(t):e.insertBefore(t,e.childNodes[n]),i}function a(t){for(var e,i,o,r=n(t.range).createDocumentFragment();i=t.next();){if(e=t.isPartiallySelectedSubtree(),i=i.cloneNode(!e),e&&(o=t.getSubtreeIterator(),i.appendChild(a(o)),o.detach(!0)),10==i.nodeType)throw new P("HIERARCHY_REQUEST_ERR");r.appendChild(i)}return r}function l(t,e,n){var i,o;n=n||{stop:!1};for(var r,s;r=t.next();)if(t.isPartiallySelectedSubtree()){if(e(r)===!1)return void(n.stop=!0);if(s=t.getSubtreeIterator(),l(s,e,n),s.detach(!0),n.stop)return}else for(i=F.createIterator(r);o=i.next();)if(e(o)===!1)return void(n.stop=!0)}function c(t){for(var e;t.next();)t.isPartiallySelectedSubtree()?(e=t.getSubtreeIterator(),c(e),e.detach(!0)):t.remove()}function u(t){for(var e,i,o=n(t.range).createDocumentFragment();e=t.next();){if(t.isPartiallySelectedSubtree()?(e=e.cloneNode(!1),i=t.getSubtreeIterator(),e.appendChild(u(i)),i.detach(!0)):t.remove(),10==e.nodeType)throw new P("HIERARCHY_REQUEST_ERR");o.appendChild(e)}return o}function d(t,e,n){var i,o=!(!e||!e.length),r=!!n;o&&(i=new RegExp("^("+e.join("|")+")$"));var s=[];return l(new f(t,!1),function(t){o&&!i.test(t.nodeType)||r&&!n(t)||s.push(t)}),s}function h(t){var e="undefined"==typeof t.getName?"Range":t.getName();return"["+e+"("+F.inspectNode(t.startContainer)+":"+t.startOffset+", "+F.inspectNode(t.endContainer)+":"+t.endOffset+")]"}function f(t,e){if(this.range=t,this.clonePartiallySelectedTextNodes=e,!t.collapsed){this.sc=t.startContainer,this.so=t.startOffset,this.ec=t.endContainer,this.eo=t.endOffset;var n=t.commonAncestorContainer;this.sc===this.ec&&F.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||F.isCharacterDataNode(this.sc)?F.getClosestAncestorIn(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||F.isCharacterDataNode(this.ec)?F.getClosestAncestorIn(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}function p(t){this.code=this[t],this.codeName=t,this.message="RangeException: "+this.codeName}function m(t,e,n){this.nodes=d(t,e,n),this._next=this.nodes[0],this._position=0}function g(t){return function(e,n){for(var i,o=n?e:e.parentNode;o;){if(i=o.nodeType,F.arrayContains(t,i))return o;o=o.parentNode}return null}}function y(t,e){if(X(t,e))throw new p("INVALID_NODE_TYPE_ERR")}function v(t){if(!t.startContainer)throw new P("INVALID_STATE_ERR")}function b(t,e){if(!F.arrayContains(e,t.nodeType))throw new p("INVALID_NODE_TYPE_ERR")}function w(t,e){if(0>e||e>(F.isCharacterDataNode(t)?t.length:t.childNodes.length))throw new P("INDEX_SIZE_ERR")}function C(t,e){if(z(t,!0)!==z(e,!0))throw new P("WRONG_DOCUMENT_ERR")}function x(t){if(V(t,!0))throw new P("NO_MODIFICATION_ALLOWED_ERR")}function E(t,e){if(!t)throw new P(e)}function N(t){return!F.arrayContains(j,t.nodeType)&&!z(t,!0)}function T(t,e){return e<=(F.isCharacterDataNode(t)?t.length:t.childNodes.length)}function _(t){if(v(t),N(t.startContainer)||N(t.endContainer)||!T(t.startContainer,t.startOffset)||!T(t.endContainer,t.endOffset))throw new Error("Range error: Range is no longer valid after DOM mutation ("+t.inspect()+")")}function S(){}function k(t){t.START_TO_START=Z,t.START_TO_END=te,t.END_TO_END=ee,t.END_TO_START=ne,t.NODE_BEFORE=ie,t.NODE_AFTER=oe,t.NODE_BEFORE_AND_AFTER=re,t.NODE_INSIDE=se}function A(t){k(t),k(t.prototype)}function R(t,e){return function(){_(this);var n,i,o=this.startContainer,s=this.startOffset,a=this.commonAncestorContainer,c=new f(this,!0);o!==a&&(n=F.getClosestAncestorIn(o,a,!0),i=r(n),o=i.node,s=i.offset),l(c,x),c.reset();var u=t(c);return c.detach(),e(this,o,s,o,s),u}}function $(n,i,s){function a(t,e){return function(n){v(this),b(n,B),b(W(n),j);var i=(t?o:r)(n);(e?l:d)(this,i.node,i.offset)}}function l(t,e,n){var o=t.endContainer,r=t.endOffset;(e!==t.startContainer||n!==t.startOffset)&&((W(e)!=W(o)||1==F.comparePoints(e,n,o,r))&&(o=e,r=n),i(t,e,n,o,r))}function d(t,e,n){var o=t.startContainer,r=t.startOffset;(e!==t.endContainer||n!==t.endOffset)&&((W(e)!=W(o)||-1==F.comparePoints(e,n,o,r))&&(o=e,r=n),i(t,o,r,e,n))}function h(t,e,n){(e!==t.startContainer||n!==t.startOffset||e!==t.endContainer||n!==t.endOffset)&&i(t,e,n,e,n)}n.prototype=new S,t.util.extend(n.prototype,{setStart:function(t,e){v(this),y(t,!0),w(t,e),l(this,t,e)},setEnd:function(t,e){v(this),y(t,!0),w(t,e),d(this,t,e)},setStartBefore:a(!0,!0),setStartAfter:a(!1,!0),setEndBefore:a(!0,!1),setEndAfter:a(!1,!1),collapse:function(t){_(this),t?i(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):i(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(t){v(this),y(t,!0),i(this,t,0,t,F.getNodeLength(t))},selectNode:function(t){v(this),y(t,!1),b(t,B);var e=o(t),n=r(t);i(this,e.node,e.offset,n.node,n.offset)},extractContents:R(u,i),deleteContents:R(c,i),canSurroundContents:function(){_(this),x(this.startContainer),x(this.endContainer);var t=new f(this,!0),n=t._first&&e(t._first,this)||t._last&&e(t._last,this);return t.detach(),!n},detach:function(){s(this)},splitBoundaries:function(){_(this);var t=this.startContainer,e=this.startOffset,n=this.endContainer,o=this.endOffset,r=t===n;F.isCharacterDataNode(n)&&o>0&&o<n.length&&F.splitDataNode(n,o),F.isCharacterDataNode(t)&&e>0&&e<t.length&&(t=F.splitDataNode(t,e),r?(o-=e,n=t):n==t.parentNode&&o>=F.getNodeIndex(t)&&o++,e=0),i(this,t,e,n,o)},normalizeBoundaries:function(){_(this);var t=this.startContainer,e=this.startOffset,n=this.endContainer,o=this.endOffset,r=function(t){var e=t.nextSibling;e&&e.nodeType==t.nodeType&&(n=t,o=t.length,t.appendData(e.data),e.parentNode.removeChild(e))},s=function(i){var r=i.previousSibling;if(r&&r.nodeType==i.nodeType){t=i;var s=i.length;if(e=r.length,i.insertData(0,r.data),r.parentNode.removeChild(r),t==n)o+=e,n=t;else if(n==i.parentNode){var a=F.getNodeIndex(i);o==a?(n=i,o=s):o>a&&o--}}},a=!0;if(F.isCharacterDataNode(n))n.length==o&&r(n);else{if(o>0){var l=n.childNodes[o-1];l&&F.isCharacterDataNode(l)&&r(l)}a=!this.collapsed}if(a){if(F.isCharacterDataNode(t))0==e&&s(t);else if(e<t.childNodes.length){var c=t.childNodes[e];c&&F.isCharacterDataNode(c)&&s(c)}}else t=n,e=o;i(this,t,e,n,o)},collapseToPoint:function(t,e){v(this),y(t,!0),w(t,e),h(this,t,e)}}),A(n)}function D(t){t.collapsed=t.startContainer===t.endContainer&&t.startOffset===t.endOffset,t.commonAncestorContainer=t.collapsed?t.startContainer:F.getCommonAncestor(t.startContainer,t.endContainer)}function O(t,e,n,o,r){var s=t.startContainer!==e||t.startOffset!==n,a=t.endContainer!==o||t.endOffset!==r;t.startContainer=e,t.startOffset=n,t.endContainer=o,t.endOffset=r,D(t),i(t,"boundarychange",{startMoved:s,endMoved:a})}function L(t){v(t),t.startContainer=t.startOffset=t.endContainer=t.endOffset=null,t.collapsed=t.commonAncestorContainer=null,i(t,"detach",null),t._listeners=null}function I(t){this.startContainer=t,this.startOffset=0,this.endContainer=t,this.endOffset=0,this._listeners={boundarychange:[],detach:[]},D(this)}t.requireModules(["DomUtil"]);var F=t.dom,H=F.DomPosition,P=t.DOMException;f.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var t=this._current=this._next;return t&&(this._next=t!==this._last?t.nextSibling:null,F.isCharacterDataNode(t)&&this.clonePartiallySelectedTextNodes&&(t===this.ec&&(t=t.cloneNode(!0)).deleteData(this.eo,t.length-this.eo),this._current===this.sc&&(t=t.cloneNode(!0)).deleteData(0,this.so))),t},remove:function(){var t,e,n=this._current;!F.isCharacterDataNode(n)||n!==this.sc&&n!==this.ec?n.parentNode&&n.parentNode.removeChild(n):(t=n===this.sc?this.so:0,e=n===this.ec?this.eo:n.length,t!=e&&n.deleteData(t,e-t))},isPartiallySelectedSubtree:function(){var t=this._current;return e(t,this.range)},getSubtreeIterator:function(){var t;if(this.isSingleCharacterDataNode)t=this.range.cloneRange(),t.collapse();else{t=new I(n(this.range));var e=this._current,i=e,o=0,r=e,s=F.getNodeLength(e);F.isAncestorOf(e,this.sc,!0)&&(i=this.sc,o=this.so),F.isAncestorOf(e,this.ec,!0)&&(r=this.ec,s=this.eo),O(t,i,o,r,s)}return new f(t,this.clonePartiallySelectedTextNodes)},detach:function(t){t&&this.range.detach(),this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}},p.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2},p.prototype.toString=function(){return this.message},m.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){return this._current=this._next,this._next=this.nodes[++this._position],this._current},detach:function(){this._current=this._next=this.nodes=null}};var B=[1,3,4,5,7,8,10],j=[2,9,11],M=[5,6,10,12],q=[1,3,4,5,7,8,10,11],U=[1,3,4,5,7,8],W=F.getRootContainer,z=g([9,11]),V=g(M),X=g([6,10,12]),G=document.createElement("style"),K=!1;try{G.innerHTML="<b>x</b>",K=3==G.firstChild.nodeType}catch(Y){}t.features.htmlParsingConforms=K;var J=K?function(t){var e=this.startContainer,n=F.getDocument(e);if(!e)throw new P("INVALID_STATE_ERR");var i=null;return 1==e.nodeType?i=e:F.isCharacterDataNode(e)&&(i=F.parentElement(e)),i=null===i||"HTML"==i.nodeName&&F.isHtmlNamespace(F.getDocument(i).documentElement)&&F.isHtmlNamespace(i)?n.createElement("body"):i.cloneNode(!1),i.innerHTML=t,F.fragmentFromNodeChildren(i)}:function(t){v(this);var e=n(this),i=e.createElement("body");return i.innerHTML=t,F.fragmentFromNodeChildren(i)},Q=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],Z=0,te=1,ee=2,ne=3,ie=0,oe=1,re=2,se=3;S.prototype={attachListener:function(t,e){this._listeners[t].push(e)},compareBoundaryPoints:function(t,e){_(this),C(this.startContainer,e.startContainer);var n,i,o,r,s=t==ne||t==Z?"start":"end",a=t==te||t==Z?"start":"end";return n=this[s+"Container"],i=this[s+"Offset"],o=e[a+"Container"],r=e[a+"Offset"],F.comparePoints(n,i,o,r)},insertNode:function(t){if(_(this),b(t,q),x(this.startContainer),F.isAncestorOf(t,this.startContainer,!0))throw new P("HIERARCHY_REQUEST_ERR");var e=s(t,this.startContainer,this.startOffset);this.setStartBefore(e)},cloneContents:function(){_(this);var t,e;if(this.collapsed)return n(this).createDocumentFragment();if(this.startContainer===this.endContainer&&F.isCharacterDataNode(this.startContainer))return t=this.startContainer.cloneNode(!0),t.data=t.data.slice(this.startOffset,this.endOffset),e=n(this).createDocumentFragment(),e.appendChild(t),e;var i=new f(this,!0);return t=a(i),i.detach(),t},canSurroundContents:function(){_(this),x(this.startContainer),x(this.endContainer);var t=new f(this,!0),n=t._first&&e(t._first,this)||t._last&&e(t._last,this);return t.detach(),!n},surroundContents:function(t){if(b(t,U),!this.canSurroundContents())throw new p("BAD_BOUNDARYPOINTS_ERR");var e=this.extractContents();if(t.hasChildNodes())for(;t.lastChild;)t.removeChild(t.lastChild);s(t,this.startContainer,this.startOffset),t.appendChild(e),this.selectNode(t)},cloneRange:function(){_(this);for(var t,e=new I(n(this)),i=Q.length;i--;)t=Q[i],e[t]=this[t];return e},toString:function(){_(this);var t=this.startContainer;if(t===this.endContainer&&F.isCharacterDataNode(t))return 3==t.nodeType||4==t.nodeType?t.data.slice(this.startOffset,this.endOffset):"";var e=[],n=new f(this,!0);return l(n,function(t){(3==t.nodeType||4==t.nodeType)&&e.push(t.data)}),n.detach(),e.join("")},compareNode:function(t){_(this);var e=t.parentNode,n=F.getNodeIndex(t);if(!e)throw new P("NOT_FOUND_ERR");var i=this.comparePoint(e,n),o=this.comparePoint(e,n+1);return 0>i?o>0?re:ie:o>0?oe:se},comparePoint:function(t,e){return _(this),E(t,"HIERARCHY_REQUEST_ERR"),C(t,this.startContainer),F.comparePoints(t,e,this.startContainer,this.startOffset)<0?-1:F.comparePoints(t,e,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:J,toHtml:function(){_(this);var t=n(this).createElement("div");return t.appendChild(this.cloneContents()),t.innerHTML},intersectsNode:function(t,e){if(_(this),E(t,"NOT_FOUND_ERR"),F.getDocument(t)!==n(this))return!1;var i=t.parentNode,o=F.getNodeIndex(t);E(i,"NOT_FOUND_ERR");var r=F.comparePoints(i,o,this.endContainer,this.endOffset),s=F.comparePoints(i,o+1,this.startContainer,this.startOffset);return e?0>=r&&s>=0:0>r&&s>0},isPointInRange:function(t,e){return _(this),E(t,"HIERARCHY_REQUEST_ERR"),C(t,this.startContainer),F.comparePoints(t,e,this.startContainer,this.startOffset)>=0&&F.comparePoints(t,e,this.endContainer,this.endOffset)<=0},intersectsRange:function(t,e){if(_(this),n(t)!=n(this))throw new P("WRONG_DOCUMENT_ERR");var i=F.comparePoints(this.startContainer,this.startOffset,t.endContainer,t.endOffset),o=F.comparePoints(this.endContainer,this.endOffset,t.startContainer,t.startOffset);return e?0>=i&&o>=0:0>i&&o>0},intersection:function(t){if(this.intersectsRange(t)){var e=F.comparePoints(this.startContainer,this.startOffset,t.startContainer,t.startOffset),n=F.comparePoints(this.endContainer,this.endOffset,t.endContainer,t.endOffset),i=this.cloneRange();return-1==e&&i.setStart(t.startContainer,t.startOffset),1==n&&i.setEnd(t.endContainer,t.endOffset),i}return null},union:function(t){if(this.intersectsRange(t,!0)){var e=this.cloneRange();return-1==F.comparePoints(t.startContainer,t.startOffset,this.startContainer,this.startOffset)&&e.setStart(t.startContainer,t.startOffset),1==F.comparePoints(t.endContainer,t.endOffset,this.endContainer,this.endOffset)&&e.setEnd(t.endContainer,t.endOffset),e}throw new p("Ranges do not intersect")},containsNode:function(t,e){return e?this.intersectsNode(t,!1):this.compareNode(t)==se},containsNodeContents:function(t){return this.comparePoint(t,0)>=0&&this.comparePoint(t,F.getNodeLength(t))<=0},containsRange:function(t){return this.intersection(t).equals(t)},containsNodeText:function(t){var e=this.cloneRange();e.selectNode(t);var n=e.getNodes([3]);if(n.length>0){e.setStart(n[0],0);var i=n.pop();e.setEnd(i,i.length);var o=this.containsRange(e);return e.detach(),o}return this.containsNodeContents(t)},createNodeIterator:function(t,e){return _(this),new m(this,t,e)},getNodes:function(t,e){return _(this),d(this,t,e)},getDocument:function(){return n(this)},collapseBefore:function(t){v(this),this.setEndBefore(t),this.collapse(!1)},collapseAfter:function(t){v(this),this.setStartAfter(t),this.collapse(!0)},getName:function(){return"DomRange"},equals:function(t){return I.rangesEqual(this,t)},inspect:function(){return h(this)}},$(I,O,L),t.rangePrototype=S.prototype,I.rangeProperties=Q,I.RangeIterator=f,I.copyComparisonConstants=A,I.createPrototypeRange=$,I.inspect=h,I.getRangeDocument=n,I.rangesEqual=function(t,e){return t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset},t.DomRange=I,t.RangeException=p}),rangy.createModule("WrappedRange",function(t){function e(t){var e=t.parentElement(),n=t.duplicate();n.collapse(!0);var i=n.parentElement();n=t.duplicate(),n.collapse(!1);var o=n.parentElement(),r=i==o?i:s.getCommonAncestor(i,o);return r==e?r:s.getCommonAncestor(e,r)}function n(t){return 0==t.compareEndPoints("StartToEnd",t)}function i(t,e,n,i){var o=t.duplicate();o.collapse(n);var r=o.parentElement();if(s.isAncestorOf(e,r,!0)||(r=e),!r.canHaveHTML)return new a(r.parentNode,s.getNodeIndex(r));var l,c,u,d,h,f=s.getDocument(r).createElement("span"),p=n?"StartToStart":"StartToEnd";do r.insertBefore(f,f.previousSibling),o.moveToElementText(f);while((l=o.compareEndPoints(p,t))>0&&f.previousSibling);if(h=f.nextSibling,-1==l&&h&&s.isCharacterDataNode(h)){o.setEndPoint(n?"EndToStart":"EndToEnd",t);var m;if(/[\r\n]/.test(h.data)){var g=o.duplicate(),y=g.text.replace(/\r\n/g,"\r").length;for(m=g.moveStart("character",y);-1==(l=g.compareEndPoints("StartToEnd",g));)m++,g.moveStart("character",1)}else m=o.text.length;d=new a(h,m)}else c=(i||!n)&&f.previousSibling,u=(i||n)&&f.nextSibling,d=u&&s.isCharacterDataNode(u)?new a(u,0):c&&s.isCharacterDataNode(c)?new a(c,c.length):new a(r,s.getNodeIndex(f));return f.parentNode.removeChild(f),d}function o(t,e){var n,i,o,r,a=t.offset,l=s.getDocument(t.node),c=l.body.createTextRange(),u=s.isCharacterDataNode(t.node);return u?(n=t.node,i=n.parentNode):(r=t.node.childNodes,n=a<r.length?r[a]:null,i=t.node),o=l.createElement("span"),o.innerHTML="&#feff;",n?i.insertBefore(o,n):i.appendChild(o),c.moveToElementText(o),c.collapse(!e),i.removeChild(o),u&&c[e?"moveStart":"moveEnd"]("character",a),c}t.requireModules(["DomUtil","DomRange"]);var r,s=t.dom,a=s.DomPosition,l=t.DomRange;if(!t.features.implementsDomRange||t.features.implementsTextRange&&t.config.preferTextRange){if(t.features.implementsTextRange){r=function(t){this.textRange=t,this.refresh()},r.prototype=new l(document),r.prototype.refresh=function(){var t,o,r=e(this.textRange);n(this.textRange)?o=t=i(this.textRange,r,!0,!0):(t=i(this.textRange,r,!0,!1),o=i(this.textRange,r,!1,!1)),this.setStart(t.node,t.offset),this.setEnd(o.node,o.offset)},l.copyComparisonConstants(r);var c=function(){return this}();"undefined"==typeof c.Range&&(c.Range=r),t.createNativeRange=function(t){return t=t||document,t.body.createTextRange()}}}else!function(){function e(t){for(var e,n=u.length;n--;)e=u[n],t[e]=t.nativeRange[e]}function n(t,e,n,i,o){var r=t.startContainer!==e||t.startOffset!=n,s=t.endContainer!==i||t.endOffset!=o;(r||s)&&(t.setEnd(i,o),t.setStart(e,n))}function i(t){t.nativeRange.detach(),t.detached=!0;for(var e,n=u.length;n--;)e=u[n],t[e]=null}var o,a,c,u=l.rangeProperties;r=function(t){if(!t)throw new Error("Range must be specified");this.nativeRange=t,e(this)},l.createPrototypeRange(r,n,i),o=r.prototype,o.selectNode=function(t){this.nativeRange.selectNode(t),e(this)},o.deleteContents=function(){this.nativeRange.deleteContents(),e(this)},o.extractContents=function(){var t=this.nativeRange.extractContents();return e(this),t},o.cloneContents=function(){return this.nativeRange.cloneContents()},o.surroundContents=function(t){this.nativeRange.surroundContents(t),e(this)},o.collapse=function(t){this.nativeRange.collapse(t),e(this)},o.cloneRange=function(){return new r(this.nativeRange.cloneRange())},o.refresh=function(){e(this)},o.toString=function(){return this.nativeRange.toString()};var d=document.createTextNode("test");s.getBody(document).appendChild(d);var h=document.createRange();h.setStart(d,0),h.setEnd(d,0);try{h.setStart(d,1),a=!0,o.setStart=function(t,n){this.nativeRange.setStart(t,n),e(this)},o.setEnd=function(t,n){this.nativeRange.setEnd(t,n),e(this)},c=function(t){return function(n){this.nativeRange[t](n),e(this)}}}catch(f){a=!1,o.setStart=function(t,n){try{this.nativeRange.setStart(t,n)}catch(i){this.nativeRange.setEnd(t,n),this.nativeRange.setStart(t,n)}e(this)},o.setEnd=function(t,n){try{this.nativeRange.setEnd(t,n)}catch(i){this.nativeRange.setStart(t,n),this.nativeRange.setEnd(t,n)}e(this)},c=function(t,n){return function(i){try{this.nativeRange[t](i)}catch(o){this.nativeRange[n](i),this.nativeRange[t](i)}e(this)}}}o.setStartBefore=c("setStartBefore","setEndBefore"),o.setStartAfter=c("setStartAfter","setEndAfter"),o.setEndBefore=c("setEndBefore","setStartBefore"),o.setEndAfter=c("setEndAfter","setStartAfter"),h.selectNodeContents(d),o.selectNodeContents=h.startContainer==d&&h.endContainer==d&&0==h.startOffset&&h.endOffset==d.length?function(t){this.nativeRange.selectNodeContents(t),e(this)}:function(t){this.setStart(t,0),this.setEnd(t,l.getEndOffset(t))},h.selectNodeContents(d),h.setEnd(d,3);var p=document.createRange();p.selectNodeContents(d),p.setEnd(d,4),p.setStart(d,2),o.compareBoundaryPoints=-1==h.compareBoundaryPoints(h.START_TO_END,p)&1==h.compareBoundaryPoints(h.END_TO_START,p)?function(t,e){return e=e.nativeRange||e,t==e.START_TO_END?t=e.END_TO_START:t==e.END_TO_START&&(t=e.START_TO_END),this.nativeRange.compareBoundaryPoints(t,e)}:function(t,e){return this.nativeRange.compareBoundaryPoints(t,e.nativeRange||e)},t.util.isHostMethod(h,"createContextualFragment")&&(o.createContextualFragment=function(t){return this.nativeRange.createContextualFragment(t)}),s.getBody(document).removeChild(d),h.detach(),p.detach()}(),t.createNativeRange=function(t){return t=t||document,t.createRange()};t.features.implementsTextRange&&(r.rangeToTextRange=function(t){if(t.collapsed){var e=o(new a(t.startContainer,t.startOffset),!0);return e}var n=o(new a(t.startContainer,t.startOffset),!0),i=o(new a(t.endContainer,t.endOffset),!1),r=s.getDocument(t.startContainer).body.createTextRange();return r.setEndPoint("StartToStart",n),r.setEndPoint("EndToEnd",i),r}),r.prototype.getName=function(){return"WrappedRange"},t.WrappedRange=r,t.createRange=function(e){return e=e||document,new r(t.createNativeRange(e))},t.createRangyRange=function(t){return t=t||document,new l(t)},t.createIframeRange=function(e){return t.createRange(s.getIframeDocument(e))},t.createIframeRangyRange=function(e){return t.createRangyRange(s.getIframeDocument(e))},t.addCreateMissingNativeApiListener(function(e){var n=e.document;"undefined"==typeof n.createRange&&(n.createRange=function(){return t.createRange(this)}),n=e=null})}),rangy.createModule("WrappedSelection",function(t,e){function n(t){return(t||window).getSelection()}function i(t){return(t||window).document.selection}function o(t,e,n){var i=n?"end":"start",o=n?"start":"end";t.anchorNode=e[i+"Container"],t.anchorOffset=e[i+"Offset"],t.focusNode=e[o+"Container"],t.focusOffset=e[o+"Offset"]}function r(t){var e=t.nativeSelection;t.anchorNode=e.anchorNode,t.anchorOffset=e.anchorOffset,t.focusNode=e.focusNode,t.focusOffset=e.focusOffset}function s(t){t.anchorNode=t.focusNode=null,t.anchorOffset=t.focusOffset=0,t.rangeCount=0,t.isCollapsed=!0,t._ranges.length=0}function a(e){var n;return e instanceof N?(n=e._selectionNativeRange,n||(n=t.createNativeRange(x.getDocument(e.startContainer)),n.setEnd(e.endContainer,e.endOffset),n.setStart(e.startContainer,e.startOffset),e._selectionNativeRange=n,e.attachListener("detach",function(){this._selectionNativeRange=null}))):e instanceof T?n=e.nativeRange:t.features.implementsDomRange&&e instanceof x.getWindow(e.startContainer).Range&&(n=e),n}function l(t){if(!t.length||1!=t[0].nodeType)return!1;for(var e=1,n=t.length;n>e;++e)if(!x.isAncestorOf(t[0],t[e]))return!1;return!0}function c(t){var e=t.getNodes();if(!l(e))throw new Error("getSingleElementFromRange: range "+t.inspect()+" did not consist of a single element");return e[0]}function u(t){return!!t&&"undefined"!=typeof t.text}function d(t,e){var n=new T(e);t._ranges=[n],o(t,n,!1),t.rangeCount=1,t.isCollapsed=n.collapsed}function h(e){if(e._ranges.length=0,"None"==e.docSelection.type)s(e);else{var n=e.docSelection.createRange();if(u(n))d(e,n);else{e.rangeCount=n.length;for(var i,r=x.getDocument(n.item(0)),a=0;a<e.rangeCount;++a)i=t.createRange(r),i.selectNode(n.item(a)),e._ranges.push(i);e.isCollapsed=1==e.rangeCount&&e._ranges[0].collapsed,o(e,e._ranges[e.rangeCount-1],!1)}}}function f(t,e){for(var n=t.docSelection.createRange(),i=c(e),o=x.getDocument(n.item(0)),r=x.getBody(o).createControlRange(),s=0,a=n.length;a>s;++s)r.add(n.item(s));try{r.add(i)}catch(l){throw new Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}r.select(),h(t)}function p(t,e,n){this.nativeSelection=t,this.docSelection=e,this._ranges=[],this.win=n,this.refresh()}function m(t,e){for(var n,i=x.getDocument(e[0].startContainer),o=x.getBody(i).createControlRange(),r=0;rangeCount>r;++r){n=c(e[r]);try{o.add(n)}catch(s){throw new Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")}}o.select(),h(t)}function g(t,e){if(t.anchorNode&&x.getDocument(t.anchorNode)!==x.getDocument(e))throw new _("WRONG_DOCUMENT_ERR")}function y(t){var e=[],n=new S(t.anchorNode,t.anchorOffset),i=new S(t.focusNode,t.focusOffset),o="function"==typeof t.getName?t.getName():"Selection";if("undefined"!=typeof t.rangeCount)for(var r=0,s=t.rangeCount;s>r;++r)e[r]=N.inspect(t.getRangeAt(r));return"["+o+"(Ranges: "+e.join(", ")+")(anchor: "+n.inspect()+", focus: "+i.inspect()+"]"}t.requireModules(["DomUtil","DomRange","WrappedRange"]),t.config.checkSelectionRanges=!0;var v,b,w="boolean",C="_rangySelection",x=t.dom,E=t.util,N=t.DomRange,T=t.WrappedRange,_=t.DOMException,S=x.DomPosition,k="Control",A=t.util.isHostMethod(window,"getSelection"),R=t.util.isHostObject(document,"selection"),$=R&&(!A||t.config.preferTextRange);$?(v=i,t.isSelectionValid=function(t){var e=(t||window).document,n=e.selection;return"None"!=n.type||x.getDocument(n.createRange().parentElement())==e}):A?(v=n,t.isSelectionValid=function(){return!0}):e.fail("Neither document.selection or window.getSelection() detected."),t.getNativeSelection=v;var D=v(),O=t.createNativeRange(document),L=x.getBody(document),I=E.areHostObjects(D,["anchorNode","focusNode"]&&E.areHostProperties(D,["anchorOffset","focusOffset"]));t.features.selectionHasAnchorAndFocus=I;var F=E.isHostMethod(D,"extend");t.features.selectionHasExtend=F;var H="number"==typeof D.rangeCount;t.features.selectionHasRangeCount=H;var P=!1,B=!0;E.areHostMethods(D,["addRange","getRangeAt","removeAllRanges"])&&"number"==typeof D.rangeCount&&t.features.implementsDomRange&&!function(){var t=document.createElement("iframe");L.appendChild(t);var e=x.getIframeDocument(t);e.open(),e.write("<html><head></head><body>12</body></html>"),e.close();var n=x.getIframeWindow(t).getSelection(),i=e.documentElement,o=i.lastChild,r=o.firstChild,s=e.createRange();s.setStart(r,1),s.collapse(!0),n.addRange(s),B=1==n.rangeCount,n.removeAllRanges();var a=s.cloneRange();s.setStart(r,0),a.setEnd(r,2),n.addRange(s),n.addRange(a),P=2==n.rangeCount,s.detach(),a.detach(),L.removeChild(t)}(),t.features.selectionSupportsMultipleRanges=P,t.features.collapsedNonEditableSelectionsSupported=B;var j,M=!1;L&&E.isHostMethod(L,"createControlRange")&&(j=L.createControlRange(),E.areHostProperties(j,["item","add"])&&(M=!0)),t.features.implementsControlRange=M,b=I?function(t){return t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset}:function(t){return t.rangeCount?t.getRangeAt(t.rangeCount-1).collapsed:!1};var q;E.isHostMethod(D,"getRangeAt")?q=function(t,e){try{return t.getRangeAt(e)}catch(n){return null}}:I&&(q=function(e){var n=x.getDocument(e.anchorNode),i=t.createRange(n);return i.setStart(e.anchorNode,e.anchorOffset),i.setEnd(e.focusNode,e.focusOffset),i.collapsed!==this.isCollapsed&&(i.setStart(e.focusNode,e.focusOffset),i.setEnd(e.anchorNode,e.anchorOffset)),i}),t.getSelection=function(t){t=t||window;var e=t[C],n=v(t),o=R?i(t):null;return e?(e.nativeSelection=n,e.docSelection=o,e.refresh(t)):(e=new p(n,o,t),t[C]=e),e},t.getIframeSelection=function(e){return t.getSelection(x.getIframeWindow(e))};var U=p.prototype;if(!$&&I&&E.areHostMethods(D,["removeAllRanges","addRange"])){U.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),s(this)};var W=function(e,n){var i=N.getRangeDocument(n),o=t.createRange(i);o.collapseToPoint(n.endContainer,n.endOffset),e.nativeSelection.addRange(a(o)),e.nativeSelection.extend(n.startContainer,n.startOffset),e.refresh()};U.addRange=H?function(e,n){if(M&&R&&this.docSelection.type==k)f(this,e);else if(n&&F)W(this,e);else{var i;if(P?i=this.rangeCount:(this.removeAllRanges(),i=0),this.nativeSelection.addRange(a(e)),this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==i+1){if(t.config.checkSelectionRanges){var r=q(this.nativeSelection,this.rangeCount-1);r&&!N.rangesEqual(r,e)&&(e=new T(r))}this._ranges[this.rangeCount-1]=e,o(this,e,X(this.nativeSelection)),this.isCollapsed=b(this)}else this.refresh()}}:function(t,e){e&&F?W(this,t):(this.nativeSelection.addRange(a(t)),this.refresh())},U.setRanges=function(t){if(M&&t.length>1)m(this,t);else{this.removeAllRanges();for(var e=0,n=t.length;n>e;++e)this.addRange(t[e])}}}else{if(!(E.isHostMethod(D,"empty")&&E.isHostMethod(O,"select")&&M&&$))return e.fail("No means of selecting a Range or TextRange was found"),!1;U.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var t;
if(this.anchorNode)t=x.getDocument(this.anchorNode);else if(this.docSelection.type==k){var e=this.docSelection.createRange();e.length&&(t=x.getDocument(e.item(0)).body.createTextRange())}if(t){var n=t.body.createTextRange();n.select(),this.docSelection.empty()}}}catch(i){}s(this)},U.addRange=function(t){this.docSelection.type==k?f(this,t):(T.rangeToTextRange(t).select(),this._ranges[0]=t,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,o(this,t,!1))},U.setRanges=function(t){this.removeAllRanges();var e=t.length;e>1?m(this,t):e&&this.addRange(t[0])}}U.getRangeAt=function(t){if(0>t||t>=this.rangeCount)throw new _("INDEX_SIZE_ERR");return this._ranges[t]};var z;if($)z=function(e){var n;t.isSelectionValid(e.win)?n=e.docSelection.createRange():(n=x.getBody(e.win.document).createTextRange(),n.collapse(!0)),e.docSelection.type==k?h(e):u(n)?d(e,n):s(e)};else if(E.isHostMethod(D,"getRangeAt")&&"number"==typeof D.rangeCount)z=function(e){if(M&&R&&e.docSelection.type==k)h(e);else if(e._ranges.length=e.rangeCount=e.nativeSelection?e.nativeSelection.rangeCount:0,e.rangeCount){for(var n=0,i=e.rangeCount;i>n;++n)e._ranges[n]=new t.WrappedRange(e.nativeSelection.getRangeAt(n));o(e,e._ranges[e.rangeCount-1],X(e.nativeSelection)),e.isCollapsed=b(e)}else s(e)};else{if(!I||typeof D.isCollapsed!=w||typeof O.collapsed!=w||!t.features.implementsDomRange)return e.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;z=function(t){var e,n=t.nativeSelection;n.anchorNode?(e=q(n,0),t._ranges=[e],t.rangeCount=1,r(t),t.isCollapsed=b(t)):s(t)}}U.refresh=function(t){var e=t?this._ranges.slice(0):null;if(z(this),t){var n=e.length;if(n!=this._ranges.length)return!1;for(;n--;)if(!N.rangesEqual(e[n],this._ranges[n]))return!1;return!0}};var V=function(t,e){var n=t.getAllRanges(),i=!1;t.removeAllRanges();for(var o=0,r=n.length;r>o;++o)i||e!==n[o]?t.addRange(n[o]):i=!0;t.rangeCount||s(t)};U.removeRange=M?function(t){if(this.docSelection.type==k){for(var e,n=this.docSelection.createRange(),i=c(t),o=x.getDocument(n.item(0)),r=x.getBody(o).createControlRange(),s=!1,a=0,l=n.length;l>a;++a)e=n.item(a),e!==i||s?r.add(n.item(a)):s=!0;r.select(),h(this)}else V(this,t)}:function(t){V(this,t)};var X;!$&&I&&t.features.implementsDomRange?(X=function(t){var e=!1;return t.anchorNode&&(e=1==x.comparePoints(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset)),e},U.isBackwards=function(){return X(this)}):X=U.isBackwards=function(){return!1},U.toString=function(){for(var t=[],e=0,n=this.rangeCount;n>e;++e)t[e]=""+this._ranges[e];return t.join("")},U.collapse=function(e,n){g(this,e);var i=t.createRange(x.getDocument(e));i.collapseToPoint(e,n),this.removeAllRanges(),this.addRange(i),this.isCollapsed=!0},U.collapseToStart=function(){if(!this.rangeCount)throw new _("INVALID_STATE_ERR");var t=this._ranges[0];this.collapse(t.startContainer,t.startOffset)},U.collapseToEnd=function(){if(!this.rangeCount)throw new _("INVALID_STATE_ERR");var t=this._ranges[this.rangeCount-1];this.collapse(t.endContainer,t.endOffset)},U.selectAllChildren=function(e){g(this,e);var n=t.createRange(x.getDocument(e));n.selectNodeContents(e),this.removeAllRanges(),this.addRange(n)},U.deleteFromDocument=function(){if(M&&R&&this.docSelection.type==k){for(var t,e=this.docSelection.createRange();e.length;)t=e.item(0),e.remove(t),t.parentNode.removeChild(t);this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();this.removeAllRanges();for(var i=0,o=n.length;o>i;++i)n[i].deleteContents();this.addRange(n[o-1])}},U.getAllRanges=function(){return this._ranges.slice(0)},U.setSingleRange=function(t){this.setRanges([t])},U.containsNode=function(t,e){for(var n=0,i=this._ranges.length;i>n;++n)if(this._ranges[n].containsNode(t,e))return!0;return!1},U.toHtml=function(){var t="";if(this.rangeCount){for(var e=N.getRangeDocument(this._ranges[0]).createElement("div"),n=0,i=this._ranges.length;i>n;++n)e.appendChild(this._ranges[n].cloneContents());t=e.innerHTML}return t},U.getName=function(){return"WrappedSelection"},U.inspect=function(){return y(this)},U.detach=function(){this.win[C]=null,this.win=this.anchorNode=this.focusNode=null},p.inspect=y,t.Selection=p,t.selectionPrototype=U,t.addCreateMissingNativeApiListener(function(e){"undefined"==typeof e.getSelection&&(e.getSelection=function(){return t.getSelection(this)}),e=null})});var Base=function(){};Base.extend=function(t,e){var n=Base.prototype.extend;Base._prototyping=!0;var i=new this;n.call(i,t),i.base=function(){},delete Base._prototyping;var o=i.constructor,r=i.constructor=function(){if(!Base._prototyping)if(this._constructing||this.constructor==r)this._constructing=!0,o.apply(this,arguments),delete this._constructing;else if(null!=arguments[0])return(arguments[0].extend||n).call(arguments[0],i)};return r.ancestor=this,r.extend=this.extend,r.forEach=this.forEach,r.implement=this.implement,r.prototype=i,r.toString=this.toString,r.valueOf=function(t){return"object"==t?r:o.valueOf()},n.call(r,e),"function"==typeof r.init&&r.init(),r},Base.prototype={extend:function(t,e){if(arguments.length>1){var n=this[t];if(n&&"function"==typeof e&&(!n.valueOf||n.valueOf()!=e.valueOf())&&/\bbase\b/.test(e)){var i=e.valueOf();e=function(){var t=this.base||Base.prototype.base;this.base=n;var e=i.apply(this,arguments);return this.base=t,e},e.valueOf=function(t){return"object"==t?e:i},e.toString=Base.toString}this[t]=e}else if(t){var o=Base.prototype.extend;Base._prototyping||"function"==typeof this||(o=this.extend||o);for(var r={toSource:null},s=["constructor","toString","valueOf"],a=Base._prototyping?0:1;l=s[a++];)t[l]!=r[l]&&o.call(this,l,t[l]);for(var l in t)r[l]||o.call(this,l,t[l])}return this}},Base=Base.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(t,e,n){for(var i in t)void 0===this.prototype[i]&&e.call(n,t[i],i,t)},implement:function(){for(var t=0;t<arguments.length;t++)"function"==typeof arguments[t]?arguments[t](this.prototype):this.prototype.extend(arguments[t]);return this},toString:function(){return String(this.valueOf())}}),wysihtml5.browser=function(){function t(t){return(/ipad|iphone|ipod/.test(t)&&t.match(/ os (\d+).+? like mac os x/)||[,0])[1]}var e=navigator.userAgent,n=document.createElement("div"),i=-1!==e.indexOf("MSIE")&&-1===e.indexOf("Opera"),o=-1!==e.indexOf("Gecko")&&-1===e.indexOf("KHTML"),r=-1!==e.indexOf("AppleWebKit/"),s=-1!==e.indexOf("Chrome/"),a=-1!==e.indexOf("Opera/");return{USER_AGENT:e,supported:function(){var e=this.USER_AGENT.toLowerCase(),i="contentEditable"in n,o=document.execCommand&&document.queryCommandSupported&&document.queryCommandState,r=document.querySelector&&document.querySelectorAll,s=this.isIos()&&t(e)<5||-1!==e.indexOf("opera mobi")||-1!==e.indexOf("hpwos/");return i&&o&&r&&!s},isTouchDevice:function(){return this.supportsEvent("touchmove")},isIos:function(){var t=this.USER_AGENT.toLowerCase();return-1!==t.indexOf("webkit")&&-1!==t.indexOf("mobile")},supportsSandboxedIframes:function(){return i},throwsMixedContentWarningWhenIframeSrcIsEmpty:function(){return!("querySelector"in document)},displaysCaretInEmptyContentEditableCorrectly:function(){return!o},hasCurrentStyleProperty:function(){return"currentStyle"in n},hasHistoryIssue:function(){return o},insertsLineBreaksOnReturn:function(){return o},supportsPlaceholderAttributeOn:function(t){return"placeholder"in t},supportsEvent:function(t){return"on"+t in n||function(){return n.setAttribute("on"+t,"return;"),"function"==typeof n["on"+t]}()},supportsEventsInIframeCorrectly:function(){return!a},supportsHTML5Tags:function(t){var e=t.createElement("div"),n="<article>foo</article>";return e.innerHTML=n,e.innerHTML.toLowerCase()===n},supportsCommand:function(){var t={formatBlock:i,insertUnorderedList:i||a||r,insertOrderedList:i||a||r},e={insertHTML:o};return function(n,i){var o=t[i];if(!o){try{return n.queryCommandSupported(i)}catch(r){}try{return n.queryCommandEnabled(i)}catch(s){return!!e[i]}}return!1}}(),doesAutoLinkingInContentEditable:function(){return i},canDisableAutoLinking:function(){return this.supportsCommand(document,"AutoUrlDetect")},clearsContentEditableCorrectly:function(){return o||a||r},supportsGetAttributeCorrectly:function(){var t=document.createElement("td");return"1"!=t.getAttribute("rowspan")},canSelectImagesInContentEditable:function(){return o||i||a},clearsListsInContentEditableCorrectly:function(){return o||i||r},autoScrollsToCaret:function(){return!r},autoClosesUnclosedTags:function(){var t,e,i=n.cloneNode(!1);return i.innerHTML="<p><div></div>",e=i.innerHTML.toLowerCase(),t="<p></p><div></div>"===e||"<p><div></div></p>"===e,this.autoClosesUnclosedTags=function(){return t},t},supportsNativeGetElementsByClassName:function(){return-1!==String(document.getElementsByClassName).indexOf("[native code]")},supportsSelectionModify:function(){return"getSelection"in window&&"modify"in window.getSelection()},needsSpaceAfterLineBreak:function(){return a},supportsSpeechApiOn:function(t){var n=e.match(/Chrome\/(\d+)/)||[,0];return n[1]>=11&&("onwebkitspeechchange"in t||"speech"in t)},crashesWhenDefineProperty:function(t){return i&&("XMLHttpRequest"===t||"XDomainRequest"===t)},doesAsyncFocus:function(){return i},hasProblemsSettingCaretAfterImg:function(){return i},hasUndoInContextMenu:function(){return o||s||a}}}(),wysihtml5.lang.array=function(t){return{contains:function(e){if(t.indexOf)return-1!==t.indexOf(e);for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return!0;return!1},without:function(e){e=wysihtml5.lang.array(e);for(var n=[],i=0,o=t.length;o>i;i++)e.contains(t[i])||n.push(t[i]);return n},get:function(){for(var e=0,n=t.length,i=[];n>e;e++)i.push(t[e]);return i}}},wysihtml5.lang.Dispatcher=Base.extend({observe:function(t,e){return this.events=this.events||{},this.events[t]=this.events[t]||[],this.events[t].push(e),this},on:function(){return this.observe.apply(this,wysihtml5.lang.array(arguments).get())},fire:function(t,e){this.events=this.events||{};for(var n=this.events[t]||[],i=0;i<n.length;i++)n[i].call(this,e);return this},stopObserving:function(t,e){this.events=this.events||{};var n,i,o=0;if(t){for(n=this.events[t]||[],i=[];o<n.length;o++)n[o]!==e&&e&&i.push(n[o]);this.events[t]=i}else this.events={};return this}}),wysihtml5.lang.object=function(t){return{merge:function(e){for(var n in e)t[n]=e[n];return this},get:function(){return t},clone:function(){var e,n={};for(e in t)n[e]=t[e];return n},isArray:function(){return"[object Array]"===Object.prototype.toString.call(t)}}},function(){var t=/^\s+/,e=/\s+$/;wysihtml5.lang.string=function(n){return n=String(n),{trim:function(){return n.replace(t,"").replace(e,"")},interpolate:function(t){for(var e in t)n=this.replace("#{"+e+"}").by(t[e]);return n},replace:function(t){return{by:function(e){return n.split(t).join(e)}}}}}}(),function(t){function e(t){return r(t)?t:(t===t.ownerDocument.documentElement&&(t=t.ownerDocument.body),s(t))}function n(t){return t.replace(l,function(t,e){var n=(e.match(c)||[])[1]||"",i=d[n];e=e.replace(c,""),e.split(i).length>e.split(n).length&&(e+=n,n="");var o=e,r=e;return e.length>u&&(r=r.substr(0,u)+"..."),"www."===o.substr(0,4)&&(o="http://"+o),'<a href="'+o+'">'+r+"</a>"+n})}function i(t){var e=t._wysihtml5_tempElement;return e||(e=t._wysihtml5_tempElement=t.createElement("div")),e}function o(t){var e=t.parentNode,o=i(e.ownerDocument);for(o.innerHTML="<span></span>"+n(t.data),o.removeChild(o.firstChild);o.firstChild;)e.insertBefore(o.firstChild,t);e.removeChild(t)}function r(t){for(var e;t.parentNode;){if(t=t.parentNode,e=t.nodeName,a.contains(e))return!0;if("body"===e)return!1}return!1}function s(e){if(!a.contains(e.nodeName)){if(e.nodeType===t.TEXT_NODE&&e.data.match(l))return void o(e);for(var n=t.lang.array(e.childNodes).get(),i=n.length,r=0;i>r;r++)s(n[r]);return e}}var a=t.lang.array(["CODE","PRE","A","SCRIPT","HEAD","TITLE","STYLE"]),l=/((https?:\/\/|www\.)[^\s<]{3,})/gi,c=/([^\w\/\-](,?))$/i,u=100,d={")":"(","]":"[","}":"{"};t.dom.autoLink=e,t.dom.autoLink.URL_REG_EXP=l}(wysihtml5),function(t){var e=t.dom;e.addClass=function(t,n){var i=t.classList;return i?i.add(n):void(e.hasClass(t,n)||(t.className+=" "+n))},e.removeClass=function(t,e){var n=t.classList;return n?n.remove(e):void(t.className=t.className.replace(new RegExp("(^|\\s+)"+e+"(\\s+|$)")," "))},e.hasClass=function(t,e){var n=t.classList;if(n)return n.contains(e);var i=t.className;return i.length>0&&(i==e||new RegExp("(^|\\s)"+e+"(\\s|$)").test(i))}}(wysihtml5),wysihtml5.dom.contains=function(){var t=document.documentElement;return t.contains?function(t,e){return e.nodeType!==wysihtml5.ELEMENT_NODE&&(e=e.parentNode),t!==e&&t.contains(e)}:t.compareDocumentPosition?function(t,e){return!!(16&t.compareDocumentPosition(e))}:void 0}(),wysihtml5.dom.convertToList=function(){function t(t,e){var n=t.createElement("li");return e.appendChild(n),n}function e(t,e){return t.createElement(e)}function n(n,i){if("UL"===n.nodeName||"OL"===n.nodeName||"MENU"===n.nodeName)return n;var o,r,s,a,l,c,u,d,h,f=n.ownerDocument,p=e(f,i),m=n.querySelectorAll("br"),g=m.length;for(h=0;g>h;h++)for(a=m[h];(l=a.parentNode)&&l!==n&&l.lastChild===a;){if("block"===wysihtml5.dom.getStyle("display").from(l)){l.removeChild(a);break}wysihtml5.dom.insert(a).after(a.parentNode)}for(o=wysihtml5.lang.array(n.childNodes).get(),r=o.length,h=0;r>h;h++)d=d||t(f,p),s=o[h],c="block"===wysihtml5.dom.getStyle("display").from(s),u="BR"===s.nodeName,c?(d=d.firstChild?t(f,p):d,d.appendChild(s),d=null):u?d=d.firstChild?null:d:d.appendChild(s);return n.parentNode.replaceChild(p,n),p}return n}(),wysihtml5.dom.copyAttributes=function(t){return{from:function(e){return{to:function(n){for(var i,o=0,r=t.length;r>o;o++)i=t[o],"undefined"!=typeof e[i]&&""!==e[i]&&(n[i]=e[i]);return{andTo:arguments.callee}}}}}},function(t){var e=["-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing"],n=function(e){return i(e)?parseInt(t.getStyle("width").from(e),10)<e.offsetWidth:!1},i=function(n){for(var i=0,o=e.length;o>i;i++)if("border-box"===t.getStyle(e[i]).from(n))return e[i]};t.copyStyles=function(i){return{from:function(o){n(o)&&(i=wysihtml5.lang.array(i).without(e));for(var r,s="",a=i.length,l=0;a>l;l++)r=i[l],s+=r+":"+t.getStyle(r).from(o)+";";return{to:function(e){return t.setStyles(s).on(e),{andTo:arguments.callee}}}}}}}(wysihtml5.dom),function(t){t.dom.delegate=function(e,n,i,o){return t.dom.observe(e,i,function(i){for(var r=i.target,s=t.lang.array(e.querySelectorAll(n));r&&r!==e;){if(s.contains(r)){o.call(r,i);break}r=r.parentNode}})}}(wysihtml5),wysihtml5.dom.getAsDom=function(){var t=function(t,e){var n=e.createElement("div");n.style.display="none",e.body.appendChild(n);try{n.innerHTML=t}catch(i){}return e.body.removeChild(n),n},e=function(t){if(!t._wysihtml5_supportsHTML5Tags){for(var e=0,i=n.length;i>e;e++)t.createElement(n[e]);t._wysihtml5_supportsHTML5Tags=!0}},n=["abbr","article","aside","audio","bdi","canvas","command","datalist","details","figcaption","figure","footer","header","hgroup","keygen","mark","meter","nav","output","progress","rp","rt","ruby","svg","section","source","summary","time","track","video","wbr"];return function(n,i){i=i||document;var o;return"object"==typeof n&&n.nodeType?(o=i.createElement("div"),o.appendChild(n)):wysihtml5.browser.supportsHTML5Tags(i)?(o=i.createElement("div"),o.innerHTML=n):(e(i),o=t(n,i)),o}}(),wysihtml5.dom.getParentElement=function(){function t(t,e){return e&&e.length?"string"==typeof e?t===e:wysihtml5.lang.array(e).contains(t):!0}function e(t){return t.nodeType===wysihtml5.ELEMENT_NODE}function n(t,e,n){var i=(t.className||"").match(n)||[];return e?i[i.length-1]===e:!!i.length}function i(e,n,i){for(;i--&&e&&"BODY"!==e.nodeName;){if(t(e.nodeName,n))return e;e=e.parentNode}return null}function o(i,o,r,s,a){for(;a--&&i&&"BODY"!==i.nodeName;){if(e(i)&&t(i.nodeName,o)&&n(i,r,s))return i;i=i.parentNode}return null}return function(t,e,n){return n=n||50,e.className||e.classRegExp?o(t,e.nodeName,e.className,e.classRegExp,n):i(t,e.nodeName,n)}}(),wysihtml5.dom.getStyle=function(){function t(t){return t.replace(n,function(t){return t.charAt(1).toUpperCase()})}var e={"float":"styleFloat"in document.createElement("div").style?"styleFloat":"cssFloat"},n=/\-[a-z]/g;return function(n){return{from:function(i){if(i.nodeType===wysihtml5.ELEMENT_NODE){var o=i.ownerDocument,r=e[n]||t(n),s=i.style,a=i.currentStyle,l=s[r];if(l)return l;if(a)try{return a[r]}catch(c){}var u,d,h=o.defaultView||o.parentWindow,f=("height"===n||"width"===n)&&"TEXTAREA"===i.nodeName;return h.getComputedStyle?(f&&(u=s.overflow,s.overflow="hidden"),d=h.getComputedStyle(i,null).getPropertyValue(n),f&&(s.overflow=u||""),d):void 0}}}}}(),wysihtml5.dom.hasElementWithTagName=function(){function t(t){return t._wysihtml5_identifier||(t._wysihtml5_identifier=n++)}var e={},n=1;return function(n,i){var o=t(n)+":"+i,r=e[o];return r||(r=e[o]=n.getElementsByTagName(i)),r.length>0}}(),function(t){function e(t){return t._wysihtml5_identifier||(t._wysihtml5_identifier=i++)}var n={},i=1;t.dom.hasElementWithClassName=function(i,o){if(!t.browser.supportsNativeGetElementsByClassName())return!!i.querySelector("."+o);var r=e(i)+":"+o,s=n[r];return s||(s=n[r]=i.getElementsByClassName(o)),s.length>0}}(wysihtml5),wysihtml5.dom.insert=function(t){return{after:function(e){e.parentNode.insertBefore(t,e.nextSibling)},before:function(e){e.parentNode.insertBefore(t,e)},into:function(e){e.appendChild(t)}}},wysihtml5.dom.insertCSS=function(t){return t=t.join("\n"),{into:function(e){var n=e.head||e.getElementsByTagName("head")[0],i=e.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=t:i.appendChild(e.createTextNode(t)),n&&n.appendChild(i)}}},wysihtml5.dom.observe=function(t,e,n){e="string"==typeof e?[e]:e;for(var i,o,r=0,s=e.length;s>r;r++)o=e[r],t.addEventListener?t.addEventListener(o,n,!1):(i=function(e){"target"in e||(e.target=e.srcElement),e.preventDefault=e.preventDefault||function(){this.returnValue=!1},e.stopPropagation=e.stopPropagation||function(){this.cancelBubble=!0},n.call(t,e)},t.attachEvent("on"+o,i));return{stop:function(){for(var o,r=0,s=e.length;s>r;r++)o=e[r],t.removeEventListener?t.removeEventListener(o,n,!1):t.detachEvent("on"+o,i)}}},wysihtml5.dom.parse=function(){function t(t,n,i,o){wysihtml5.lang.object(d).merge(u).merge(n).get(),i=i||t.ownerDocument||document;var r,s,a,l=i.createDocumentFragment(),c="string"==typeof t;for(r=c?wysihtml5.dom.getAsDom(t,i):t;r.firstChild;)a=r.firstChild,r.removeChild(a),s=e(a,o),s&&l.appendChild(s);return r.innerHTML="",r.appendChild(l),c?wysihtml5.quirks.getCorrectInnerHTML(r):r}function e(t,n){var i,o=t.nodeType,r=t.childNodes,s=r.length,c=a[o],u=0;if(i=c&&c(t),!i)return null;for(u=0;s>u;u++)newChild=e(r[u],n),newChild&&i.appendChild(newChild);return n&&i.childNodes.length<=1&&i.nodeName.toLowerCase()===l&&!i.attributes.length?i.firstChild:i}function n(t){var e,n,o=d.tags,r=t.nodeName.toLowerCase(),s=t.scopeName;if(t._wysihtml5)return null;if(t._wysihtml5=1,"wysihtml5-temp"===t.className)return null;if(s&&"HTML"!=s&&(r=s+":"+r),"outerHTML"in t&&(wysihtml5.browser.autoClosesUnclosedTags()||"P"!==t.nodeName||"</p>"===t.outerHTML.slice(-4).toLowerCase()||(r="div")),r in o){if(e=o[r],!e||e.remove)return null;e="string"==typeof e?{rename_tag:e}:e}else{if(!t.firstChild)return null;e={rename_tag:l}}return n=t.ownerDocument.createElement(e.rename_tag||r),i(t,n,e),t=null,n}function i(t,e,n){var i,r,s,a,l,u,h,m={},g=n.set_class,y=n.add_class,v=n.set_attributes,b=n.check_attributes,w=d.classes,C=0,x=[],E=[],N=[],T=[];if(v&&(m=wysihtml5.lang.object(v).clone()),b)for(l in b)h=f[b[l]],h&&(u=h(o(t,l)),"string"==typeof u&&(m[l]=u));if(g&&x.push(g),y)for(l in y)h=p[y[l]],h&&(a=h(o(t,l)),"string"==typeof a&&x.push(a));for(w["_wysihtml5-temp-placeholder"]=1,T=t.getAttribute("class"),T&&(x=x.concat(T.split(c))),i=x.length;i>C;C++)s=x[C],w[s]&&E.push(s);for(r=E.length;r--;)s=E[r],wysihtml5.lang.array(N).contains(s)||N.unshift(s);N.length&&(m["class"]=N.join(" "));for(l in m)try{e.setAttribute(l,m[l])}catch(_){}m.src&&("undefined"!=typeof m.width&&e.setAttribute("width",m.width),"undefined"!=typeof m.height&&e.setAttribute("height",m.height))}function o(t,e){e=e.toLowerCase();var n=t.nodeName;if("IMG"==n&&"src"==e&&r(t)===!0)return t.src;if(h&&"outerHTML"in t){var i=t.outerHTML.toLowerCase(),o=-1!=i.indexOf(" "+e+"=");return o?t.getAttribute(e):null}return t.getAttribute(e)}function r(t){try{return t.complete&&!t.mozMatchesSelector(":-moz-broken")}catch(e){if(t.complete&&"complete"===t.readyState)return!0}}function s(t){return t.ownerDocument.createTextNode(t.data)}var a={1:n,3:s},l="span",c=/\s+/,u={tags:{},classes:{}},d={},h=!wysihtml5.browser.supportsGetAttributeCorrectly(),f={url:function(){var t=/^https?:\/\//i;return function(e){return e&&e.match(t)?e.replace(t,function(t){return t.toLowerCase()}):null}}(),src:function(){var t=/^(\/|https?:\/\/)/i;return function(e){return e&&e.match(t)?e.replace(t,function(t){return t.toLowerCase()}):null}}(),href:function(){var t=/^(\/|https?:\/\/|mailto:)/i;return function(e){return e&&e.match(t)?e.replace(t,function(t){return t.toLowerCase()}):null}}(),alt:function(){var t=/[^ a-z0-9_\-]/gi;return function(e){return e?e.replace(t,""):""}}(),numbers:function(){var t=/\D/g;return function(e){return e=(e||"").replace(t,""),e||null}}()},p={align_img:function(){var t={left:"wysiwyg-float-left",right:"wysiwyg-float-right"};return function(e){return t[String(e).toLowerCase()]}}(),align_text:function(){var t={left:"wysiwyg-text-align-left",right:"wysiwyg-text-align-right",center:"wysiwyg-text-align-center",justify:"wysiwyg-text-align-justify"};return function(e){return t[String(e).toLowerCase()]}}(),clear_br:function(){var t={left:"wysiwyg-clear-left",right:"wysiwyg-clear-right",both:"wysiwyg-clear-both",all:"wysiwyg-clear-both"};return function(e){return t[String(e).toLowerCase()]}}(),size_font:function(){var t={1:"wysiwyg-font-size-xx-small",2:"wysiwyg-font-size-small",3:"wysiwyg-font-size-medium",4:"wysiwyg-font-size-large",5:"wysiwyg-font-size-x-large",6:"wysiwyg-font-size-xx-large",7:"wysiwyg-font-size-xx-large","-":"wysiwyg-font-size-smaller","+":"wysiwyg-font-size-larger"};return function(e){return t[String(e).charAt(0)]}}()};return t}(),wysihtml5.dom.removeEmptyTextNodes=function(t){for(var e,n=wysihtml5.lang.array(t.childNodes).get(),i=n.length,o=0;i>o;o++)e=n[o],e.nodeType===wysihtml5.TEXT_NODE&&""===e.data&&e.parentNode.removeChild(e)},wysihtml5.dom.renameElement=function(t,e){for(var n,i=t.ownerDocument.createElement(e);n=t.firstChild;)i.appendChild(n);return wysihtml5.dom.copyAttributes(["align","className"]).from(t).to(i),t.parentNode.replaceChild(i,t),i},wysihtml5.dom.replaceWithChildNodes=function(t){if(t.parentNode){if(!t.firstChild)return void t.parentNode.removeChild(t);for(var e=t.ownerDocument.createDocumentFragment();t.firstChild;)e.appendChild(t.firstChild);t.parentNode.replaceChild(e,t),t=e=null}},function(t){function e(e){return"block"===t.getStyle("display").from(e)}function n(t){return"BR"===t.nodeName}function i(t){var e=t.ownerDocument.createElement("br");t.appendChild(e)}function o(t){if("MENU"===t.nodeName||"UL"===t.nodeName||"OL"===t.nodeName){var o,r,s,a,l,c=t.ownerDocument,u=c.createDocumentFragment(),d=t.previousElementSibling||t.previousSibling;for(d&&!e(d)&&i(u);l=t.firstChild;){for(r=l.lastChild;o=l.firstChild;)s=o===r,a=s&&!e(o)&&!n(o),u.appendChild(o),a&&i(u);l.parentNode.removeChild(l)}t.parentNode.replaceChild(u,t)}}t.resolveList=o}(wysihtml5.dom),function(t){var e=document,n=["parent","top","opener","frameElement","frames","localStorage","globalStorage","sessionStorage","indexedDB"],i=["open","close","openDialog","showModalDialog","alert","confirm","prompt","openDatabase","postMessage","XMLHttpRequest","XDomainRequest"],o=["referrer","write","open","close"];t.dom.Sandbox=Base.extend({constructor:function(e,n){this.callback=e||t.EMPTY_FUNCTION,this.config=t.lang.object({}).merge(n).get(),this.iframe=this._createIframe()},insertInto:function(t){"string"==typeof t&&(t=e.getElementById(t)),t.appendChild(this.iframe)},getIframe:function(){return this.iframe},getWindow:function(){this._readyError()},getDocument:function(){this._readyError()},destroy:function(){var t=this.getIframe();t.parentNode.removeChild(t)},_readyError:function(){throw new Error("wysihtml5.Sandbox: Sandbox iframe isn't loaded yet")},_createIframe:function(){var n=this,i=e.createElement("iframe");return i.className="wysihtml5-sandbox",t.dom.setAttributes({security:"restricted",allowtransparency:"true",frameborder:0,width:0,height:0,marginwidth:0,marginheight:0}).on(i),t.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty()&&(i.src="javascript:'<html></html>'"),i.onload=function(){i.onreadystatechange=i.onload=null,n._onLoadIframe(i)},i.onreadystatechange=function(){/loaded|complete/.test(i.readyState)&&(i.onreadystatechange=i.onload=null,n._onLoadIframe(i))},i},_onLoadIframe:function(r){if(t.dom.contains(e.documentElement,r)){var s=this,a=r.contentWindow,l=r.contentWindow.document,c=e.characterSet||e.charset||"utf-8",u=this._getHtml({charset:c,stylesheets:this.config.stylesheets});if(l.open("text/html","replace"),l.write(u),l.close(),this.getWindow=function(){return r.contentWindow},this.getDocument=function(){return r.contentWindow.document},a.onerror=function(t,e,n){throw new Error("wysihtml5.Sandbox: "+t,e,n)},!t.browser.supportsSandboxedIframes()){var d,h;for(d=0,h=n.length;h>d;d++)this._unset(a,n[d]);for(d=0,h=i.length;h>d;d++)this._unset(a,i[d],t.EMPTY_FUNCTION);for(d=0,h=o.length;h>d;d++)this._unset(l,o[d]);this._unset(l,"cookie","",!0)}this.loaded=!0,setTimeout(function(){s.callback(s)},0)}},_getHtml:function(e){var n,i=e.stylesheets,o="",r=0;if(i="string"==typeof i?[i]:i)for(n=i.length;n>r;r++)o+='<link rel="stylesheet" href="'+i[r]+'">';return e.stylesheets=o,t.lang.string('<!DOCTYPE html><html><head><meta charset="#{charset}">#{stylesheets}</head><body></body></html>').interpolate(e)},_unset:function(e,n,i,o){try{e[n]=i}catch(r){}try{e.__defineGetter__(n,function(){return i})}catch(r){}if(o)try{e.__defineSetter__(n,function(){})}catch(r){}if(!t.browser.crashesWhenDefineProperty(n))try{var s={get:function(){return i}};o&&(s.set=function(){}),Object.defineProperty(e,n,s)}catch(r){}}})}(wysihtml5),function(){var t={className:"class"};wysihtml5.dom.setAttributes=function(e){return{on:function(n){for(var i in e)n.setAttribute(t[i]||i,e[i])}}}}(),wysihtml5.dom.setStyles=function(t){return{on:function(e){var n=e.style;if("string"==typeof t)return void(n.cssText+=";"+t);for(var i in t)"float"===i?(n.cssFloat=t[i],n.styleFloat=t[i]):n[i]=t[i]}}},function(t){t.simulatePlaceholder=function(e,n,i){var o="placeholder",r=function(){n.hasPlaceholderSet()&&n.clear(),n.placeholderSet=!1,t.removeClass(n.element,o)},s=function(){n.isEmpty()&&(n.placeholderSet=!0,n.setValue(i),t.addClass(n.element,o))};e.observe("set_placeholder",s).observe("unset_placeholder",r).observe("focus:composer",r).observe("paste:composer",r).observe("blur:composer",s),s()}}(wysihtml5.dom),function(t){var e=document.documentElement;"textContent"in e?(t.setTextContent=function(t,e){t.textContent=e},t.getTextContent=function(t){return t.textContent}):"innerText"in e?(t.setTextContent=function(t,e){t.innerText=e},t.getTextContent=function(t){return t.innerText}):(t.setTextContent=function(t,e){t.nodeValue=e},t.getTextContent=function(t){return t.nodeValue})}(wysihtml5.dom),wysihtml5.quirks.cleanPastedHTML=function(){function t(t,n,i){n=n||e,i=i||t.ownerDocument||document;var o,r,s,a,l,c="string"==typeof t,u=0;o=c?wysihtml5.dom.getAsDom(t,i):t;for(l in n)for(s=o.querySelectorAll(l),r=n[l],a=s.length;a>u;u++)r(s[u]);return s=t=n=null,c?o.innerHTML:o}var e={"a u":wysihtml5.dom.replaceWithChildNodes};return t}(),function(t){var e=t.dom;t.quirks.ensureProperClearing=function(){var t=function(){var t=this;setTimeout(function(){var e=t.innerHTML.toLowerCase();("<p>&nbsp;</p>"==e||"<p>&nbsp;</p><p>&nbsp;</p>"==e)&&(t.innerHTML="")},0)};return function(n){e.observe(n.element,["cut","keydown"],t)}}(),t.quirks.ensureProperClearingOfLists=function(){var n=["OL","UL","MENU"],i=function(i,o){if(o.firstChild&&t.lang.array(n).contains(o.firstChild.nodeName)){var r=e.getParentElement(i,{nodeName:n});if(r){var s=r==o.firstChild;if(s){var a=r.childNodes.length<=1;if(a){var l=r.firstChild?""===r.firstChild.innerHTML:!0;l&&r.parentNode.removeChild(r)}}}}};return function(n){e.observe(n.element,"keydown",function(e){if(e.keyCode===t.BACKSPACE_KEY){var o=n.selection.getSelectedNode();i(o,n.element)}})}}()}(wysihtml5),function(t){var e="%7E";t.quirks.getCorrectInnerHTML=function(n){var i=n.innerHTML;if(-1===i.indexOf(e))return i;var o,r,s,a,l=n.querySelectorAll("[href*='~'], [src*='~']");for(a=0,s=l.length;s>a;a++)o=l[a].href||l[a].src,r=t.lang.string(o).replace("~").by(e),i=t.lang.string(i).replace(r).by(o);return i}}(wysihtml5),function(t){var e=t.dom,n=["LI","P","H1","H2","H3","H4","H5","H6"],i=["UL","OL","MENU"];t.quirks.insertLineBreakOnReturn=function(o){function r(n){var i=e.getParentElement(n,{nodeName:["P","DIV"]},2);if(i){var r=document.createTextNode(t.INVISIBLE_SPACE);e.insert(r).before(i),e.replaceWithChildNodes(i),o.selection.selectNode(r)}}function s(s){var a=s.keyCode;if(!(s.shiftKey||a!==t.ENTER_KEY&&a!==t.BACKSPACE_KEY)){var l=(s.target,o.selection.getSelectedNode()),c=e.getParentElement(l,{nodeName:n},4);return c?void("LI"!==c.nodeName||a!==t.ENTER_KEY&&a!==t.BACKSPACE_KEY?c.nodeName.match(/H[1-6]/)&&a===t.ENTER_KEY&&setTimeout(function(){r(o.selection.getSelectedNode())},0):setTimeout(function(){var t,n=o.selection.getSelectedNode();n&&(t=e.getParentElement(n,{nodeName:i},2),t||r(n))},0)):void(a!==t.ENTER_KEY||t.browser.insertsLineBreaksOnReturn()||(o.commands.exec("insertLineBreak"),s.preventDefault()))}}e.observe(o.element.ownerDocument,"keydown",s)}}(wysihtml5),function(t){var e="wysihtml5-quirks-redraw";t.quirks.redraw=function(n){t.dom.addClass(n,e),t.dom.removeClass(n,e);try{var i=n.ownerDocument;i.execCommand("italic",!1,null),i.execCommand("italic",!1,null)}catch(o){}}}(wysihtml5),function(t){function e(t){var e=0;if(t.parentNode)do e+=t.offsetTop||0,t=t.offsetParent;while(t);return e}var n=t.dom;t.Selection=Base.extend({constructor:function(t){window.rangy.init(),this.editor=t,this.composer=t.composer,this.doc=this.composer.doc},getBookmark:function(){var t=this.getRange();return t&&t.cloneRange()},setBookmark:function(t){t&&this.setSelection(t)},setBefore:function(t){var e=rangy.createRange(this.doc);return e.setStartBefore(t),e.setEndBefore(t),this.setSelection(e)},setAfter:function(t){var e=rangy.createRange(this.doc);return e.setStartAfter(t),e.setEndAfter(t),this.setSelection(e)},selectNode:function(e){var i=rangy.createRange(this.doc),o=e.nodeType===t.ELEMENT_NODE,r="canHaveHTML"in e?e.canHaveHTML:"IMG"!==e.nodeName,s=o?e.innerHTML:e.data,a=""===s||s===t.INVISIBLE_SPACE,l=n.getStyle("display").from(e),c="block"===l||"list-item"===l;if(a&&o&&r)try{e.innerHTML=t.INVISIBLE_SPACE}catch(u){}r?i.selectNodeContents(e):i.selectNode(e),r&&a&&o?i.collapse(c):r&&a&&(i.setStartAfter(e),i.setEndAfter(e)),this.setSelection(i)},getSelectedNode:function(t){var e,n;return t&&this.doc.selection&&"Control"===this.doc.selection.type&&(n=this.doc.selection.createRange(),n&&n.length)?n.item(0):(e=this.getSelection(this.doc),e.focusNode===e.anchorNode?e.focusNode:(n=this.getRange(this.doc),n?n.commonAncestorContainer:this.doc.body))},executeAndRestore:function(e,n){var i,o=this.doc.body,r=n&&o.scrollTop,s=n&&o.scrollLeft,a="_wysihtml5-temp-placeholder",l='<span class="'+a+'">'+t.INVISIBLE_SPACE+"</span>",c=this.getRange(this.doc);if(!c)return void e(o,o);var u=c.createContextualFragment(l);c.insertNode(u);try{e(c.startContainer,c.endContainer)}catch(d){setTimeout(function(){throw d},0)}caretPlaceholder=this.doc.querySelector("."+a),caretPlaceholder?(i=rangy.createRange(this.doc),i.selectNode(caretPlaceholder),i.deleteContents(),this.setSelection(i)):o.focus(),n&&(o.scrollTop=r,o.scrollLeft=s);try{caretPlaceholder.parentNode.removeChild(caretPlaceholder)}catch(h){}},executeAndRestoreSimple:function(t){var e,n,i,o,r,s=this.getRange(),a=this.doc.body;if(!s)return void t(a,a);o=s.getNodes([3]),n=o[0]||s.startContainer,i=o[o.length-1]||s.endContainer,r={collapsed:s.collapsed,startContainer:n,startOffset:n===s.startContainer?s.startOffset:0,endContainer:i,endOffset:i===s.endContainer?s.endOffset:i.length};try{t(s.startContainer,s.endContainer)}catch(l){setTimeout(function(){throw l},0)}e=rangy.createRange(this.doc);try{e.setStart(r.startContainer,r.startOffset)}catch(c){}try{e.setEnd(r.endContainer,r.endOffset)}catch(u){}try{this.setSelection(e)}catch(d){}},set:function(t,e){var n=rangy.createRange(this.doc);
n.setStart(t,e||0),this.setSelection(n)},insertHTML:function(t){var e=rangy.createRange(this.doc),n=e.createContextualFragment(t),i=n.lastChild;this.insertNode(n),i&&this.setAfter(i)},insertNode:function(t){var e=this.getRange();e&&e.insertNode(t)},surround:function(t){var e=this.getRange();if(e)try{e.surroundContents(t),this.selectNode(t)}catch(n){t.appendChild(e.extractContents()),e.insertNode(t)}},scrollIntoView:function(){var n,i=this.doc,o=5,r=i.documentElement.scrollHeight>i.documentElement.offsetHeight,s=i._wysihtml5ScrollIntoViewElement=i._wysihtml5ScrollIntoViewElement||function(){var e=i.createElement("span");return e.innerHTML=t.INVISIBLE_SPACE,e}();r&&(this.insertNode(s),n=e(s),s.parentNode.removeChild(s),n>=i.body.scrollTop+i.documentElement.offsetHeight-o&&(i.body.scrollTop=n))},selectLine:function(){t.browser.supportsSelectionModify()?this._selectLine_W3C():this.doc.selection&&this._selectLine_MSIE()},_selectLine_W3C:function(){var t=this.doc.defaultView,e=t.getSelection();e.modify("extend","left","lineboundary"),e.modify("extend","right","lineboundary")},_selectLine_MSIE:function(){var t,e,n,i,o,r=this.doc.selection.createRange(),s=r.boundingTop,a=(r.boundingHeight,this.doc.body.scrollWidth);if(r.moveToPoint){for(0===s&&(n=this.doc.createElement("span"),this.insertNode(n),s=n.offsetTop,n.parentNode.removeChild(n)),s+=1,i=-10;a>i;i+=2)try{r.moveToPoint(i,s);break}catch(l){}for(t=s,e=this.doc.selection.createRange(),o=a;o>=0;o--)try{e.moveToPoint(o,t);break}catch(c){}r.setEndPoint("EndToEnd",e),r.select()}},getText:function(){var t=this.getSelection();return t?t.toString():""},getNodes:function(t,e){var n=this.getRange();return n?n.getNodes([t],e):[]},getRange:function(){var t=this.getSelection();return t&&t.rangeCount&&t.getRangeAt(0)},getSelection:function(){return rangy.getSelection(this.doc.defaultView||this.doc.parentWindow)},setSelection:function(t){var e=this.doc.defaultView||this.doc.parentWindow,n=rangy.getSelection(e);return n.setSingleRange(t)}})}(wysihtml5),function(t,e){function n(t,e,n){if(!t.className)return!1;var i=t.className.match(n)||[];return i[i.length-1]===e}function i(t,e,n){t.className?(o(t,n),t.className+=" "+e):t.className=e}function o(t,e){t.className&&(t.className=t.className.replace(e,""))}function r(t,e){return t.className.replace(f," ")==e.className.replace(f," ")}function s(t){for(var e=t.parentNode;t.firstChild;)e.insertBefore(t.firstChild,t);e.removeChild(t)}function a(t,e){if(t.attributes.length!=e.attributes.length)return!1;for(var n,i,o,r=0,s=t.attributes.length;s>r;++r)if(n=t.attributes[r],o=n.name,"class"!=o){if(i=e.attributes.getNamedItem(o),n.specified!=i.specified)return!1;if(n.specified&&n.nodeValue!==i.nodeValue)return!1}return!0}function l(t,n){return e.dom.isCharacterDataNode(t)?0==n?!!t.previousSibling:n==t.length?!!t.nextSibling:!0:n>0&&n<t.childNodes.length}function c(t,n,i){var o;if(e.dom.isCharacterDataNode(n)&&(0==i?(i=e.dom.getNodeIndex(n),n=n.parentNode):i==n.length?(i=e.dom.getNodeIndex(n)+1,n=n.parentNode):o=e.dom.splitDataNode(n,i)),!o){o=n.cloneNode(!1),o.id&&o.removeAttribute("id");for(var r;r=n.childNodes[i];)o.appendChild(r);e.dom.insertAfter(o,n)}return n==t?o:c(t,o.parentNode,e.dom.getNodeIndex(o))}function u(e){this.isElementMerge=e.nodeType==t.ELEMENT_NODE,this.firstTextNode=this.isElementMerge?e.lastChild:e,this.textNodes=[this.firstTextNode]}function d(t,e,n,i){this.tagNames=t||[h],this.cssClass=e||"",this.similarClassRegExp=n,this.normalize=i,this.applyToAnyTagName=!1}var h="span",f=/\s+/g;u.prototype={doMerge:function(){for(var t,e,n,i=[],o=0,r=this.textNodes.length;r>o;++o)t=this.textNodes[o],e=t.parentNode,i[o]=t.data,o&&(e.removeChild(t),e.hasChildNodes()||e.parentNode.removeChild(e));return this.firstTextNode.data=n=i.join(""),n},getLength:function(){for(var t=this.textNodes.length,e=0;t--;)e+=this.textNodes[t].length;return e},toString:function(){for(var t=[],e=0,n=this.textNodes.length;n>e;++e)t[e]="'"+this.textNodes[e].data+"'";return"[Merge("+t.join(",")+")]"}},d.prototype={getAncestorWithClass:function(i){for(var o;i;){if(o=this.cssClass?n(i,this.cssClass,this.similarClassRegExp):!0,i.nodeType==t.ELEMENT_NODE&&e.dom.arrayContains(this.tagNames,i.tagName.toLowerCase())&&o)return i;i=i.parentNode}return!1},postApply:function(t,e){for(var n,i,o,r=t[0],s=t[t.length-1],a=[],l=r,c=s,d=0,h=s.length,f=0,p=t.length;p>f;++f)i=t[f],o=this.getAdjacentMergeableTextNode(i.parentNode,!1),o?(n||(n=new u(o),a.push(n)),n.textNodes.push(i),i===r&&(l=n.firstTextNode,d=l.length),i===s&&(c=n.firstTextNode,h=n.getLength())):n=null;var m=this.getAdjacentMergeableTextNode(s.parentNode,!0);if(m&&(n||(n=new u(s),a.push(n)),n.textNodes.push(m)),a.length){for(f=0,p=a.length;p>f;++f)a[f].doMerge();e.setStart(l,d),e.setEnd(c,h)}},getAdjacentMergeableTextNode:function(e,n){var i,o=e.nodeType==t.TEXT_NODE,r=o?e.parentNode:e,s=n?"nextSibling":"previousSibling";if(o){if(i=e[s],i&&i.nodeType==t.TEXT_NODE)return i}else if(i=r[s],i&&this.areElementsMergeable(e,i))return i[n?"firstChild":"lastChild"];return null},areElementsMergeable:function(t,n){return e.dom.arrayContains(this.tagNames,(t.tagName||"").toLowerCase())&&e.dom.arrayContains(this.tagNames,(n.tagName||"").toLowerCase())&&r(t,n)&&a(t,n)},createContainer:function(t){var e=t.createElement(this.tagNames[0]);return this.cssClass&&(e.className=this.cssClass),e},applyToTextNode:function(t){var n=t.parentNode;if(1==n.childNodes.length&&e.dom.arrayContains(this.tagNames,n.tagName.toLowerCase()))this.cssClass&&i(n,this.cssClass,this.similarClassRegExp);else{var o=this.createContainer(e.dom.getDocument(t));t.parentNode.insertBefore(o,t),o.appendChild(t)}},isRemovable:function(n){return e.dom.arrayContains(this.tagNames,n.tagName.toLowerCase())&&t.lang.string(n.className).trim()==this.cssClass},undoToTextNode:function(t,e,n){if(!e.containsNode(n)){var i=e.cloneRange();i.selectNode(n),i.isPointInRange(e.endContainer,e.endOffset)&&l(e.endContainer,e.endOffset)&&(c(n,e.endContainer,e.endOffset),e.setEndAfter(n)),i.isPointInRange(e.startContainer,e.startOffset)&&l(e.startContainer,e.startOffset)&&(n=c(n,e.startContainer,e.startOffset))}this.similarClassRegExp&&o(n,this.similarClassRegExp),this.isRemovable(n)&&s(n)},applyToRange:function(e){var n=e.getNodes([t.TEXT_NODE]);if(!n.length)try{var i=this.createContainer(e.endContainer.ownerDocument);return e.surroundContents(i),void this.selectNode(e,i)}catch(o){}if(e.splitBoundaries(),n=e.getNodes([t.TEXT_NODE]),n.length){for(var r,s=0,a=n.length;a>s;++s)r=n[s],this.getAncestorWithClass(r)||this.applyToTextNode(r);e.setStart(n[0],0),r=n[n.length-1],e.setEnd(r,r.length),this.normalize&&this.postApply(n,e)}},undoToRange:function(e){var n,i,o=e.getNodes([t.TEXT_NODE]);if(o.length)e.splitBoundaries(),o=e.getNodes([t.TEXT_NODE]);else{var r=e.endContainer.ownerDocument,s=r.createTextNode(t.INVISIBLE_SPACE);e.insertNode(s),e.selectNode(s),o=[s]}for(var a=0,l=o.length;l>a;++a)n=o[a],i=this.getAncestorWithClass(n),i&&this.undoToTextNode(n,e,i);1==l?this.selectNode(e,o[0]):(e.setStart(o[0],0),n=o[o.length-1],e.setEnd(n,n.length),this.normalize&&this.postApply(o,e))},selectNode:function(e,n){var i=n.nodeType===t.ELEMENT_NODE,o="canHaveHTML"in n?n.canHaveHTML:!0,r=i?n.innerHTML:n.data,s=""===r||r===t.INVISIBLE_SPACE;if(s&&i&&o)try{n.innerHTML=t.INVISIBLE_SPACE}catch(a){}e.selectNodeContents(n),s&&i?e.collapse(!1):s&&(e.setStartAfter(n),e.setEndAfter(n))},getTextSelectedByRange:function(t,e){var n=e.cloneRange();n.selectNodeContents(t);var i=n.intersection(e),o=i?i.toString():"";return n.detach(),o},isAppliedToRange:function(e){var n,i=[],o=e.getNodes([t.TEXT_NODE]);if(!o.length)return n=this.getAncestorWithClass(e.startContainer),n?[n]:!1;for(var r,s=0,a=o.length;a>s;++s){if(r=this.getTextSelectedByRange(o[s],e),n=this.getAncestorWithClass(o[s]),""!=r&&!n)return!1;i.push(n)}return i},toggleRange:function(t){this.isAppliedToRange(t)?this.undoToRange(t):this.applyToRange(t)}},t.selection.HTMLApplier=d}(wysihtml5,rangy),wysihtml5.Commands=Base.extend({constructor:function(t){this.editor=t,this.composer=t.composer,this.doc=this.composer.doc},support:function(t){return wysihtml5.browser.supportsCommand(this.doc,t)},exec:function(t,e){var n=wysihtml5.commands[t],i=wysihtml5.lang.array(arguments).get(),o=n&&n.exec,r=null;if(this.editor.fire("beforecommand:composer"),o)i.unshift(this.composer),r=o.apply(n,i);else try{r=this.doc.execCommand(t,!1,e)}catch(s){}return this.editor.fire("aftercommand:composer"),r},state:function(t){var e=wysihtml5.commands[t],n=wysihtml5.lang.array(arguments).get(),i=e&&e.state;if(i)return n.unshift(this.composer),i.apply(e,n);try{return this.doc.queryCommandState(t)}catch(o){return!1}}}),wysihtml5.commands.bold={exec:function(t,e){return wysihtml5.commands.formatInline.exec(t,e,"b")},state:function(t,e){return wysihtml5.commands.formatInline.state(t,e,"b")}},function(t){function e(t,e){for(var n,i,o,s=e.length,a=0;s>a;a++)n=e[a],i=r.getParentElement(n,{nodeName:"code"}),o=r.getTextContent(n),o.match(r.autoLink.URL_REG_EXP)&&!i?i=r.renameElement(n,"code"):r.replaceWithChildNodes(n)}function n(e,n){var s,a,l,c,u,d,h,f,p,m=e.doc,g="_wysihtml5-temp-"+ +new Date,y=/non-matching-class/g,v=0;for(t.commands.formatInline.exec(e,i,o,g,y),a=m.querySelectorAll(o+"."+g),s=a.length;s>v;v++){l=a[v],l.removeAttribute("class");for(p in n)l.setAttribute(p,n[p])}d=l,1===s&&(h=r.getTextContent(l),c=!!l.querySelector("*"),u=""===h||h===t.INVISIBLE_SPACE,!c&&u&&(r.setTextContent(l,n.text||l.href),f=m.createTextNode(" "),e.selection.setAfter(l),e.selection.insertNode(f),d=f)),e.selection.setAfter(d)}var i,o="A",r=t.dom;t.commands.createLink={exec:function(t,i,o){var r=this.state(t,i);r?t.selection.executeAndRestore(function(){e(t,r)}):(o="object"==typeof o?o:{href:o},n(t,o))},state:function(e,n){return t.commands.formatInline.state(e,n,"A")}}}(wysihtml5),function(t){var e,n=/wysiwyg-font-size-[0-9a-z\-]+/g;t.commands.fontSize={exec:function(e,i,o){return t.commands.formatInline.exec(e,i,"span","wysiwyg-font-size-"+o,n)},state:function(e,i,o){return t.commands.formatInline.state(e,i,"span","wysiwyg-font-size-"+o,n)},value:function(){return e}}}(wysihtml5),function(t){var e=/wysiwyg-color-[0-9a-z]+/g;t.commands.foreColor={exec:function(n,i,o){return t.commands.formatInline.exec(n,i,"span","wysiwyg-color-"+o,e)},state:function(n,i,o){return t.commands.formatInline.state(n,i,"span","wysiwyg-color-"+o,e)}}}(wysihtml5),function(t){function e(t,e,i){t.className?(n(t,i),t.className+=" "+e):t.className=e}function n(t,e){t.className=t.className.replace(e,"")}function i(e){return e.nodeType===t.TEXT_NODE&&!t.lang.string(e.data).trim()}function o(t){for(var e=t.previousSibling;e&&i(e);)e=e.previousSibling;return e}function r(t){for(var e=t.nextSibling;e&&i(e);)e=e.nextSibling;return e}function s(t){var e=t.ownerDocument,n=r(t),i=o(t);n&&!u(n)&&t.parentNode.insertBefore(e.createElement("br"),n),i&&!u(i)&&t.parentNode.insertBefore(e.createElement("br"),t)}function a(t){var e=r(t),n=o(t);e&&c(e)&&e.parentNode.removeChild(e),n&&c(n)&&n.parentNode.removeChild(n)}function l(t){var e=t.lastChild;e&&c(e)&&e.parentNode.removeChild(e)}function c(t){return"BR"===t.nodeName}function u(t){return c(t)?!0:"block"===p.getStyle("display").from(t)?!0:!1}function d(e,n,i,o){if(o)var r=p.observe(e,"DOMNodeInserted",function(e){var n,i=e.target;i.nodeType===t.ELEMENT_NODE&&(n=p.getStyle("display").from(i),"inline"!==n.substr(0,6)&&(i.className+=" "+o))});e.execCommand(n,!1,i),r&&r.stop()}function h(t,e){t.selection.selectLine(),t.selection.surround(e),a(e),l(e),t.selection.selectNode(e)}function f(e){return!!t.lang.string(e.className).trim()}var p=t.dom,m="DIV",g=["H1","H2","H3","H4","H5","H6","P","BLOCKQUOTE",m];t.commands.formatBlock={exec:function(i,o,r,a,l){var c,u=i.doc,y=this.state(i,o,r,a,l);return r="string"==typeof r?r.toUpperCase():r,y?void i.selection.executeAndRestoreSimple(function(){l&&n(y,l);var t=f(y);t||y.nodeName!==(r||m)?t&&p.renameElement(y,m):(s(y),p.replaceWithChildNodes(y))}):(null===r||t.lang.array(g).contains(r))&&(c=i.selection.getSelectedNode(),y=p.getParentElement(c,{nodeName:g}))?void i.selection.executeAndRestoreSimple(function(){r&&(y=p.renameElement(y,r)),a&&e(y,a,l)}):i.commands.support(o)?void d(u,o,r||m,a):(y=u.createElement(r||m),a&&(y.className=a),void h(i,y))},state:function(t,e,n,i,o){n="string"==typeof n?n.toUpperCase():n;var r=t.selection.getSelectedNode();return p.getParentElement(r,{nodeName:n,className:i,classRegExp:o})}}}(wysihtml5),function(t){function e(t){var e=i[t];return e?[t.toLowerCase(),e.toLowerCase()]:[t.toLowerCase()]}function n(n,i,r){var s=n+":"+i;return o[s]||(o[s]=new t.selection.HTMLApplier(e(n),i,r,!0)),o[s]}var i={strong:"b",em:"i",b:"strong",i:"em"},o={};t.commands.formatInline={exec:function(t,e,i,o,r){var s=t.selection.getRange();return s?(n(i,o,r).toggleRange(s),void t.selection.setSelection(s)):!1},state:function(e,o,r,s,a){var l,c=e.doc,u=i[r]||r;return t.dom.hasElementWithTagName(c,r)||t.dom.hasElementWithTagName(c,u)?s&&!t.dom.hasElementWithClassName(c,s)?!1:(l=e.selection.getRange(),l?n(r,s,a).isAppliedToRange(l):!1):!1}}}(wysihtml5),wysihtml5.commands.insertHTML={exec:function(t,e,n){t.commands.support(e)?t.doc.execCommand(e,!1,n):t.selection.insertHTML(n)},state:function(){return!1}},function(t){var e="IMG";t.commands.insertImage={exec:function(n,i,o){o="object"==typeof o?o:{src:o};var r,s,a,l=n.doc,c=this.state(n);if(c)return n.selection.setBefore(c),a=c.parentNode,a.removeChild(c),t.dom.removeEmptyTextNodes(a),"A"!==a.nodeName||a.firstChild||(n.selection.setAfter(a),a.parentNode.removeChild(a)),void t.quirks.redraw(n.element);c=l.createElement(e);for(s in o)"className"===s&&(s="class"),c.setAttribute(s,o[s]);n.selection.insertNode(c),t.browser.hasProblemsSettingCaretAfterImg()?(r=l.createTextNode(t.INVISIBLE_SPACE),n.selection.insertNode(r),n.selection.setAfter(r)):n.selection.setAfter(c)},state:function(n){var i,o,r,s=n.doc;return t.dom.hasElementWithTagName(s,e)&&(i=n.selection.getSelectedNode())?i.nodeName===e?i:i.nodeType!==t.ELEMENT_NODE?!1:(o=n.selection.getText(),(o=t.lang.string(o).trim())?!1:(r=n.selection.getNodes(t.ELEMENT_NODE,function(t){return"IMG"===t.nodeName}),1!==r.length?!1:r[0])):!1}}}(wysihtml5),function(t){var e="<br>"+(t.browser.needsSpaceAfterLineBreak()?" ":"");t.commands.insertLineBreak={exec:function(n,i){n.commands.support(i)?(n.doc.execCommand(i,!1,null),t.browser.autoScrollsToCaret()||n.selection.scrollIntoView()):n.commands.exec("insertHTML",e)},state:function(){return!1}}}(wysihtml5),wysihtml5.commands.insertOrderedList={exec:function(t,e){var n,i,o=t.doc,r=t.selection.getSelectedNode(),s=wysihtml5.dom.getParentElement(r,{nodeName:"OL"}),a=wysihtml5.dom.getParentElement(r,{nodeName:"UL"}),l="_wysihtml5-temp-"+(new Date).getTime();return t.commands.support(e)?void o.execCommand(e,!1,null):void(s?t.selection.executeAndRestoreSimple(function(){wysihtml5.dom.resolveList(s)}):a?t.selection.executeAndRestoreSimple(function(){wysihtml5.dom.renameElement(a,"ol")}):(t.commands.exec("formatBlock","div",l),i=o.querySelector("."+l),n=""===i.innerHTML||i.innerHTML===wysihtml5.INVISIBLE_SPACE,t.selection.executeAndRestoreSimple(function(){s=wysihtml5.dom.convertToList(i,"ol")}),n&&t.selection.selectNode(s.querySelector("li"))))},state:function(t){var e=t.selection.getSelectedNode();return wysihtml5.dom.getParentElement(e,{nodeName:"OL"})}},wysihtml5.commands.insertUnorderedList={exec:function(t,e){var n,i,o=t.doc,r=t.selection.getSelectedNode(),s=wysihtml5.dom.getParentElement(r,{nodeName:"UL"}),a=wysihtml5.dom.getParentElement(r,{nodeName:"OL"}),l="_wysihtml5-temp-"+(new Date).getTime();return t.commands.support(e)?void o.execCommand(e,!1,null):void(s?t.selection.executeAndRestoreSimple(function(){wysihtml5.dom.resolveList(s)}):a?t.selection.executeAndRestoreSimple(function(){wysihtml5.dom.renameElement(a,"ul")}):(t.commands.exec("formatBlock","div",l),i=o.querySelector("."+l),n=""===i.innerHTML||i.innerHTML===wysihtml5.INVISIBLE_SPACE,t.selection.executeAndRestoreSimple(function(){s=wysihtml5.dom.convertToList(i,"ul")}),n&&t.selection.selectNode(s.querySelector("li"))))},state:function(t){var e=t.selection.getSelectedNode();return wysihtml5.dom.getParentElement(e,{nodeName:"UL"})}},wysihtml5.commands.italic={exec:function(t,e){return wysihtml5.commands.formatInline.exec(t,e,"i")},state:function(t,e){return wysihtml5.commands.formatInline.state(t,e,"i")}},function(t){var e="wysiwyg-text-align-center",n=/wysiwyg-text-align-[0-9a-z]+/g;t.commands.justifyCenter={exec:function(i){return t.commands.formatBlock.exec(i,"formatBlock",null,e,n)},state:function(i){return t.commands.formatBlock.state(i,"formatBlock",null,e,n)}}}(wysihtml5),function(t){var e="wysiwyg-text-align-left",n=/wysiwyg-text-align-[0-9a-z]+/g;t.commands.justifyLeft={exec:function(i){return t.commands.formatBlock.exec(i,"formatBlock",null,e,n)},state:function(i){return t.commands.formatBlock.state(i,"formatBlock",null,e,n)}}}(wysihtml5),function(t){var e="wysiwyg-text-align-right",n=/wysiwyg-text-align-[0-9a-z]+/g;t.commands.justifyRight={exec:function(i){return t.commands.formatBlock.exec(i,"formatBlock",null,e,n)},state:function(i){return t.commands.formatBlock.state(i,"formatBlock",null,e,n)}}}(wysihtml5),function(t){var e="wysiwyg-text-align-justify",n=/wysiwyg-text-align-[0-9a-z]+/g;t.commands.justifyFull={exec:function(i){return t.commands.formatBlock.exec(i,"formatBlock",null,e,n)},state:function(i){return t.commands.formatBlock.state(i,"formatBlock",null,e,n)}}}(wysihtml5),wysihtml5.commands.redo={exec:function(t){return t.undoManager.redo()},state:function(){return!1}},wysihtml5.commands.underline={exec:function(t,e){return wysihtml5.commands.formatInline.exec(t,e,"u")},state:function(t,e){return wysihtml5.commands.formatInline.state(t,e,"u")}},wysihtml5.commands.undo={exec:function(t){return t.undoManager.undo()},state:function(){return!1}},function(t){function e(t){for(var e;e=t.querySelector("._wysihtml5-temp");)e.parentNode.removeChild(e)}var n=90,i=89,o=8,r=46,s=25,a="data-wysihtml5-selection-node",l="data-wysihtml5-selection-offset",c='<span id="_wysihtml5-undo" class="_wysihtml5-temp">'+t.INVISIBLE_SPACE+"</span>",u='<span id="_wysihtml5-redo" class="_wysihtml5-temp">'+t.INVISIBLE_SPACE+"</span>",d=t.dom;t.UndoManager=t.lang.Dispatcher.extend({constructor:function(t){this.editor=t,this.composer=t.composer,this.element=this.composer.element,this.position=0,this.historyStr=[],this.historyDom=[],this.transact(),this._observe()},_observe:function(){var s,a=this,l=this.composer.sandbox.getDocument();if(d.observe(this.element,"keydown",function(t){if(!t.altKey&&(t.ctrlKey||t.metaKey)){var e=t.keyCode,o=e===n&&!t.shiftKey,r=e===n&&t.shiftKey||e===i;o?(a.undo(),t.preventDefault()):r&&(a.redo(),t.preventDefault())}}),d.observe(this.element,"keydown",function(t){var e=t.keyCode;e!==s&&(s=e,(e===o||e===r)&&a.transact())}),t.browser.hasUndoInContextMenu()){var h,f,p=function(){e(l),clearInterval(h)};d.observe(this.element,"contextmenu",function(){p(),a.composer.selection.executeAndRestoreSimple(function(){a.element.lastChild&&a.composer.selection.setAfter(a.element.lastChild),l.execCommand("insertHTML",!1,c),l.execCommand("insertHTML",!1,u),l.execCommand("undo",!1,null)}),h=setInterval(function(){l.getElementById("_wysihtml5-redo")?(p(),a.redo()):l.getElementById("_wysihtml5-undo")||(p(),a.undo())},400),f||(f=!0,d.observe(document,"mousedown",p),d.observe(l,["mousedown","paste","cut","copy"],p))})}this.editor.observe("newword:composer",function(){a.transact()}).observe("beforecommand:composer",function(){a.transact()})},transact:function(){var e=this.historyStr[this.position-1],n=this.composer.getValue();if(n!==e){var i=this.historyStr.length=this.historyDom.length=this.position;i>s&&(this.historyStr.shift(),this.historyDom.shift(),this.position--),this.position++;var o,r,c=this.composer.selection.getRange(),u=c.startContainer||this.element,d=c.startOffset||0;u.nodeType===t.ELEMENT_NODE?o=u:(o=u.parentNode,r=this.getChildNodeIndex(o,u)),o.setAttribute(l,d),"undefined"!=typeof r&&o.setAttribute(a,r);var h=this.element.cloneNode(!!n);this.historyDom.push(h),this.historyStr.push(n),o.removeAttribute(l),o.removeAttribute(a)}},undo:function(){this.transact(),this.undoPossible()&&(this.set(this.historyDom[--this.position-1]),this.editor.fire("undo:composer"))},redo:function(){this.redoPossible()&&(this.set(this.historyDom[++this.position-1]),this.editor.fire("redo:composer"))},undoPossible:function(){return this.position>1},redoPossible:function(){return this.position<this.historyStr.length},set:function(t){this.element.innerHTML="";for(var e=0,n=t.childNodes,i=t.childNodes.length;i>e;e++)this.element.appendChild(n[e].cloneNode(!0));var o,r,s;t.hasAttribute(l)?(o=t.getAttribute(l),s=t.getAttribute(a),r=this.element):(r=this.element.querySelector("["+l+"]")||this.element,o=r.getAttribute(l),s=r.getAttribute(a),r.removeAttribute(l),r.removeAttribute(a)),null!==s&&(r=this.getChildNodeByIndex(r,+s)),this.composer.selection.set(r,o)},getChildNodeIndex:function(t,e){for(var n=0,i=t.childNodes,o=i.length;o>n;n++)if(i[n]===e)return n},getChildNodeByIndex:function(t,e){return t.childNodes[e]}})}(wysihtml5),wysihtml5.views.View=Base.extend({constructor:function(t,e,n){this.parent=t,this.element=e,this.config=n,this._observeViewChange()},_observeViewChange:function(){var t=this;this.parent.observe("beforeload",function(){t.parent.observe("change_view",function(e){e===t.name?(t.parent.currentView=t,t.show(),setTimeout(function(){t.focus()},0)):t.hide()})})},focus:function(){if(this.element.ownerDocument.querySelector(":focus")!==this.element)try{this.element.focus()}catch(t){}},hide:function(){this.element.style.display="none"},show:function(){this.element.style.display=""},disable:function(){this.element.setAttribute("disabled","disabled")},enable:function(){this.element.removeAttribute("disabled")}}),function(t){var e=t.dom,n=t.browser;t.views.Composer=t.views.View.extend({name:"composer",CARET_HACK:"<br>",constructor:function(t,e,n){this.base(t,e,n),this.textarea=this.parent.textarea,this._initSandbox()},clear:function(){this.element.innerHTML=n.displaysCaretInEmptyContentEditableCorrectly()?"":this.CARET_HACK},getValue:function(e){var n=this.isEmpty()?"":t.quirks.getCorrectInnerHTML(this.element);return e&&(n=this.parent.parse(n)),n=t.lang.string(n).replace(t.INVISIBLE_SPACE).by("")},setValue:function(t,e){e&&(t=this.parent.parse(t));try{this.element.innerHTML=t}catch(n){this.element.innerText=t}},show:function(){this.iframe.style.display=this._displayStyle||"",this.disable(),this.enable()},hide:function(){this._displayStyle=e.getStyle("display").from(this.iframe),"none"===this._displayStyle&&(this._displayStyle=null),this.iframe.style.display="none"},disable:function(){this.element.removeAttribute("contentEditable"),this.base()},enable:function(){this.element.setAttribute("contentEditable","true"),this.base()},focus:function(e){t.browser.doesAsyncFocus()&&this.hasPlaceholderSet()&&this.clear(),this.base();var n=this.element.lastChild;e&&n&&("BR"===n.nodeName?this.selection.setBefore(this.element.lastChild):this.selection.setAfter(this.element.lastChild))},getTextContent:function(){return e.getTextContent(this.element)},hasPlaceholderSet:function(){return this.getTextContent()==this.textarea.element.getAttribute("placeholder")&&this.placeholderSet},isEmpty:function(){var t=this.element.innerHTML,e="blockquote, ul, ol, img, embed, object, table, iframe, svg, video, audio, button, input, select, textarea";return""===t||t===this.CARET_HACK||this.hasPlaceholderSet()||""===this.getTextContent()&&!this.element.querySelector(e)},_initSandbox:function(){var t=this;this.sandbox=new e.Sandbox(function(){t._create()},{stylesheets:this.config.stylesheets}),this.iframe=this.sandbox.getIframe();var n=this.textarea.element;if(e.insert(this.iframe).after(n),n.form){var i=document.createElement("input");i.type="hidden",i.name="_wysihtml5_mode",i.value=1,e.insert(i).after(n)}},_create:function(){var i=this;this.doc=this.sandbox.getDocument(),this.element=this.doc.body,this.textarea=this.parent.textarea,this.element.innerHTML=this.textarea.getValue(!0),this.enable(),this.selection=new t.Selection(this.parent),this.commands=new t.Commands(this.parent),e.copyAttributes(["className","spellcheck","title","lang","dir","accessKey"]).from(this.textarea.element).to(this.element),e.addClass(this.element,this.config.composerClassName),this.config.style&&this.style(),this.observe();var o=this.config.name;o&&(e.addClass(this.element,o),e.addClass(this.iframe,o));var r="string"==typeof this.config.placeholder?this.config.placeholder:this.textarea.element.getAttribute("placeholder");r&&e.simulatePlaceholder(this.parent,this,r),this.commands.exec("styleWithCSS",!1),this._initAutoLinking(),this._initObjectResizing(),this._initUndoManager(),(this.textarea.element.hasAttribute("autofocus")||document.querySelector(":focus")==this.textarea.element)&&setTimeout(function(){i.focus(!0)},100),t.quirks.insertLineBreakOnReturn(this),n.clearsContentEditableCorrectly()||t.quirks.ensureProperClearing(this),n.clearsListsInContentEditableCorrectly()||t.quirks.ensureProperClearingOfLists(this),this.initSync&&this.config.sync&&this.initSync(),this.textarea.hide(),this.parent.fire("beforeload").fire("load")},_initAutoLinking:function(){var i=this,o=n.canDisableAutoLinking(),r=n.doesAutoLinkingInContentEditable();if(o&&this.commands.exec("autoUrlDetect",!1),this.config.autoLink){(!r||r&&o)&&(this.parent.observe("newword:composer",function(){i.selection.executeAndRestore(function(t,n){e.autoLink(n.parentNode)})}),e.observe(this.element,"blur",function(){e.autoLink(i.element)}));var s=this.sandbox.getDocument().getElementsByTagName("a"),a=e.autoLink.URL_REG_EXP,l=function(n){var i=t.lang.string(e.getTextContent(n)).trim();return"www."===i.substr(0,4)&&(i="http://"+i),i};e.observe(this.element,"keydown",function(t){if(s.length){var n,o=i.selection.getSelectedNode(t.target.ownerDocument),r=e.getParentElement(o,{nodeName:"A"},4);r&&(n=l(r),setTimeout(function(){var t=l(r);t!==n&&t.match(a)&&r.setAttribute("href",t)},0))}})}},_initObjectResizing:function(){var i=["width","height"],o=i.length,r=this.element,s=function(e){var n,s=e.target||e.srcElement,a=s.style,l=0;if("IMG"===s.nodeName){for(;o>l;l++)n=i[l],a[n]&&(s.setAttribute(n,parseInt(a[n],10)),a[n]="");t.quirks.redraw(r)}};this.commands.exec("enableObjectResizing",!0),n.supportsEvent("resizeend")?e.observe(r,"resizeend",s):e.observe(r,"DOMAttrModified",s)},_initUndoManager:function(){this.undoManager=new t.UndoManager(this.parent)}})}(wysihtml5),function(t){var e=t.dom,n=document,i=window,o=n.createElement("div"),r=["background-color","color","cursor","font-family","font-size","font-style","font-variant","font-weight","line-height","letter-spacing","text-align","text-decoration","text-indent","text-rendering","word-break","word-wrap","word-spacing"],s=["background-color","border-collapse","border-bottom-color","border-bottom-style","border-bottom-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-top-color","border-top-style","border-top-width","clear","display","float","margin-bottom","margin-left","margin-right","margin-top","outline-color","outline-offset","outline-width","outline-style","padding-left","padding-right","padding-top","padding-bottom","position","top","left","right","bottom","z-index","vertical-align","text-align","-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing","-webkit-box-shadow","-moz-box-shadow","-ms-box-shadow","box-shadow","-webkit-border-top-right-radius","-moz-border-radius-topright","border-top-right-radius","-webkit-border-bottom-right-radius","-moz-border-radius-bottomright","border-bottom-right-radius","-webkit-border-bottom-left-radius","-moz-border-radius-bottomleft","border-bottom-left-radius","-webkit-border-top-left-radius","-moz-border-radius-topleft","border-top-left-radius","width","height"],a=["width","height","top","left","right","bottom"],l=["html             { height: 100%; }","body             { min-height: 100%; padding: 0; margin: 0; margin-top: -1px; padding-top: 1px; }","._wysihtml5-temp { display: none; }",t.browser.isGecko?"body.placeholder { color: graytext !important; }":"body.placeholder { color: #a9a9a9 !important; }","body[disabled]   { background-color: #eee !important; color: #999 !important; cursor: default !important; }","img:-moz-broken  { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }"],c=function(t){if(t.setActive)try{t.setActive()}catch(o){}else{var r=t.style,s=n.documentElement.scrollTop||n.body.scrollTop,a=n.documentElement.scrollLeft||n.body.scrollLeft,l={position:r.position,top:r.top,left:r.left,WebkitUserSelect:r.WebkitUserSelect};e.setStyles({position:"absolute",top:"-99999px",left:"-99999px",WebkitUserSelect:"none"}).on(t),t.focus(),e.setStyles(l).on(t),i.scrollTo&&i.scrollTo(a,s)}};t.views.Composer.prototype.style=function(){var u=this,d=n.querySelector(":focus"),h=this.textarea.element,f=h.hasAttribute("placeholder"),p=f&&h.getAttribute("placeholder");this.focusStylesHost=this.focusStylesHost||o.cloneNode(!1),this.blurStylesHost=this.blurStylesHost||o.cloneNode(!1),f&&h.removeAttribute("placeholder"),h===d&&h.blur(),e.copyStyles(s).from(h).to(this.iframe).andTo(this.blurStylesHost),e.copyStyles(r).from(h).to(this.element).andTo(this.blurStylesHost),e.insertCSS(l).into(this.element.ownerDocument),c(h),e.copyStyles(s).from(h).to(this.focusStylesHost),e.copyStyles(r).from(h).to(this.focusStylesHost);var m=t.lang.array(s).without(["display"]);if(d?d.focus():h.blur(),f&&h.setAttribute("placeholder",p),!t.browser.hasCurrentStyleProperty())var g=e.observe(i,"resize",function(){if(!e.contains(document.documentElement,u.iframe))return void g.stop();var t=e.getStyle("display").from(h),n=e.getStyle("display").from(u.iframe);h.style.display="",u.iframe.style.display="none",e.copyStyles(a).from(h).to(u.iframe).andTo(u.focusStylesHost).andTo(u.blurStylesHost),u.iframe.style.display=n,h.style.display=t});return this.parent.observe("focus:composer",function(){e.copyStyles(m).from(u.focusStylesHost).to(u.iframe),e.copyStyles(r).from(u.focusStylesHost).to(u.element)}),this.parent.observe("blur:composer",function(){e.copyStyles(m).from(u.blurStylesHost).to(u.iframe),e.copyStyles(r).from(u.blurStylesHost).to(u.element)}),this}}(wysihtml5),function(t){var e=t.dom,n=t.browser,i={66:"bold",73:"italic",85:"underline"};t.views.Composer.prototype.observe=function(){var o=this,r=this.getValue(),s=this.sandbox.getIframe(),a=this.element,l=n.supportsEventsInIframeCorrectly()?a:this.sandbox.getWindow(),c=["drop","paste"];e.observe(s,"DOMNodeRemoved",function(){clearInterval(u),o.parent.fire("destroy:composer")});var u=setInterval(function(){e.contains(document.documentElement,s)||(clearInterval(u),o.parent.fire("destroy:composer"))},250);e.observe(l,"focus",function(){o.parent.fire("focus").fire("focus:composer"),setTimeout(function(){r=o.getValue()},0)}),e.observe(l,"blur",function(){r!==o.getValue()&&o.parent.fire("change").fire("change:composer"),o.parent.fire("blur").fire("blur:composer")}),n.isIos()&&e.observe(a,"blur",function(){var t=a.ownerDocument.createElement("input"),e=document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement.scrollLeft||document.body.scrollLeft;try{o.selection.insertNode(t)}catch(i){a.appendChild(t)}t.focus(),t.parentNode.removeChild(t),window.scrollTo(n,e)}),e.observe(a,"dragenter",function(){o.parent.fire("unset_placeholder")}),e.observe(a,c,function(){setTimeout(function(){o.parent.fire("paste").fire("paste:composer")},0)}),e.observe(a,"keyup",function(e){var n=e.keyCode;(n===t.SPACE_KEY||n===t.ENTER_KEY)&&o.parent.fire("newword:composer")}),this.parent.observe("paste:composer",function(){setTimeout(function(){o.parent.fire("newword:composer")},0)}),n.canSelectImagesInContentEditable()||e.observe(a,"mousedown",function(t){var e=t.target;"IMG"===e.nodeName&&(o.selection.selectNode(e),t.preventDefault())}),n.hasHistoryIssue()&&n.supportsSelectionModify()&&e.observe(a,"keydown",function(t){if(t.metaKey||t.ctrlKey){var e=t.keyCode,n=a.ownerDocument.defaultView,i=n.getSelection();(37===e||39===e)&&(37===e&&(i.modify("extend","left","lineboundary"),t.shiftKey||i.collapseToStart()),39===e&&(i.modify("extend","right","lineboundary"),t.shiftKey||i.collapseToEnd()),t.preventDefault())}}),e.observe(a,"keydown",function(t){var e=t.keyCode,n=i[e];(t.ctrlKey||t.metaKey)&&!t.altKey&&n&&(o.commands.exec(n),t.preventDefault())}),e.observe(a,"keydown",function(e){var n,i=o.selection.getSelectedNode(!0),r=e.keyCode;
!i||"IMG"!==i.nodeName||r!==t.BACKSPACE_KEY&&r!==t.DELETE_KEY||(n=i.parentNode,n.removeChild(i),"A"!==n.nodeName||n.firstChild||n.parentNode.removeChild(n),setTimeout(function(){t.quirks.redraw(a)},0),e.preventDefault())});var d={IMG:"Image: ",A:"Link: "};e.observe(a,"mouseover",function(t){var e,n=t.target,i=n.nodeName;if("A"===i||"IMG"===i){var o=n.hasAttribute("title");o||(e=d[i]+(n.getAttribute("href")||n.getAttribute("src")),n.setAttribute("title",e))}})}}(wysihtml5),function(t){var e=400;t.views.Synchronizer=Base.extend({constructor:function(t,e,n){this.editor=t,this.textarea=e,this.composer=n,this._observe()},fromComposerToTextarea:function(e){this.textarea.setValue(t.lang.string(this.composer.getValue()).trim(),e)},fromTextareaToComposer:function(t){var e=this.textarea.getValue();e?this.composer.setValue(e,t):(this.composer.clear(),this.editor.fire("set_placeholder"))},sync:function(t){"textarea"===this.editor.currentView.name?this.fromTextareaToComposer(t):this.fromComposerToTextarea(t)},_observe:function(){var n,i=this,o=this.textarea.element.form,r=function(){n=setInterval(function(){i.fromComposerToTextarea()},e)},s=function(){clearInterval(n),n=null};r(),o&&(t.dom.observe(o,"submit",function(){i.sync(!0)}),t.dom.observe(o,"reset",function(){setTimeout(function(){i.fromTextareaToComposer()},0)})),this.editor.observe("change_view",function(t){"composer"!==t||n?"textarea"===t&&(i.fromComposerToTextarea(!0),s()):(i.fromTextareaToComposer(!0),r())}),this.editor.observe("destroy:composer",s)}})}(wysihtml5),wysihtml5.views.Textarea=wysihtml5.views.View.extend({name:"textarea",constructor:function(t,e,n){this.base(t,e,n),this._observe()},clear:function(){this.element.value=""},getValue:function(t){var e=this.isEmpty()?"":this.element.value;return t&&(e=this.parent.parse(e)),e},setValue:function(t,e){e&&(t=this.parent.parse(t)),this.element.value=t},hasPlaceholderSet:function(){var t=wysihtml5.browser.supportsPlaceholderAttributeOn(this.element),e=this.element.getAttribute("placeholder")||null,n=this.element.value,i=!n;return t&&i||n===e},isEmpty:function(){return!wysihtml5.lang.string(this.element.value).trim()||this.hasPlaceholderSet()},_observe:function(){var t=this.element,e=this.parent,n={focusin:"focus",focusout:"blur"},i=wysihtml5.browser.supportsEvent("focusin")?["focusin","focusout","change"]:["focus","blur","change"];e.observe("beforeload",function(){wysihtml5.dom.observe(t,i,function(t){var i=n[t.type]||t.type;e.fire(i).fire(i+":textarea")}),wysihtml5.dom.observe(t,["paste","drop"],function(){setTimeout(function(){e.fire("paste").fire("paste:textarea")},0)})})}}),function(t){var e=t.dom,n="wysihtml5-command-dialog-opened",i="input, select, textarea",o="[data-wysihtml5-dialog-field]",r="data-wysihtml5-dialog-field";t.toolbar.Dialog=t.lang.Dispatcher.extend({constructor:function(t,e){this.link=t,this.container=e},_observe:function(){if(!this._observed){var o=this,r=function(t){var e=o._serialize();e==o.elementToChange?o.fire("edit",e):o.fire("save",e),o.hide(),t.preventDefault(),t.stopPropagation()};e.observe(o.link,"click",function(){e.hasClass(o.link,n)&&setTimeout(function(){o.hide()},0)}),e.observe(this.container,"keydown",function(e){var n=e.keyCode;n===t.ENTER_KEY&&r(e),n===t.ESCAPE_KEY&&o.hide()}),e.delegate(this.container,"[data-wysihtml5-dialog-action=save]","click",r),e.delegate(this.container,"[data-wysihtml5-dialog-action=cancel]","click",function(t){o.fire("cancel"),o.hide(),t.preventDefault(),t.stopPropagation()});for(var s=this.container.querySelectorAll(i),a=0,l=s.length,c=function(){clearInterval(o.interval)};l>a;a++)e.observe(s[a],"change",c);this._observed=!0}},_serialize:function(){for(var t=this.elementToChange||{},e=this.container.querySelectorAll(o),n=e.length,i=0;n>i;i++)t[e[i].getAttribute(r)]=e[i].value;return t},_interpolate:function(t){for(var e,n,i,s=document.querySelector(":focus"),a=this.container.querySelectorAll(o),l=a.length,c=0;l>c;c++)e=a[c],e!==s&&(t&&"hidden"===e.type||(n=e.getAttribute(r),i=this.elementToChange?this.elementToChange[n]||"":e.defaultValue,e.value=i))},show:function(t){if(!e.hasClass(this.link,n)){var o=this,r=this.container.querySelector(i);if(this.elementToChange=t,this._observe(),this._interpolate(),t&&(this.interval=setInterval(function(){o._interpolate(!0)},500)),e.addClass(this.link,n),this.container.style.display="",this.fire("show"),r&&!t)try{r.focus()}catch(s){}}},hide:function(){clearInterval(this.interval),this.elementToChange=null,e.removeClass(this.link,n),this.container.style.display="none",this.fire("hide")}})}(wysihtml5),function(t){var e=t.dom,n={position:"relative"},i={left:0,margin:0,opacity:0,overflow:"hidden",padding:0,position:"absolute",top:0,zIndex:1},o={cursor:"inherit",fontSize:"50px",height:"50px",marginTop:"-25px",outline:0,padding:0,position:"absolute",right:"-4px",top:"50%"},r={"x-webkit-speech":"",speech:""};t.toolbar.Speech=function(s,a){var l=document.createElement("input");if(!t.browser.supportsSpeechApiOn(l))return void(a.style.display="none");var c=s.editor.textarea.element.getAttribute("lang");c&&(r.lang=c);var u=document.createElement("div");t.lang.object(i).merge({width:a.offsetWidth+"px",height:a.offsetHeight+"px"}),e.insert(l).into(u),e.insert(u).into(a),e.setStyles(o).on(l),e.setAttributes(r).on(l),e.setStyles(i).on(u),e.setStyles(n).on(a);var d="onwebkitspeechchange"in l?"webkitspeechchange":"speechchange";e.observe(l,d,function(){s.execCommand("insertText",l.value),l.value=""}),e.observe(l,"click",function(t){e.hasClass(a,"wysihtml5-command-disabled")&&t.preventDefault(),t.stopPropagation()})}}(wysihtml5),function(t){var e="wysihtml5-command-disabled",n="wysihtml5-commands-disabled",i="wysihtml5-command-active",o="wysihtml5-action-active",r=t.dom;t.toolbar.Toolbar=Base.extend({constructor:function(e,n){this.editor=e,this.container="string"==typeof n?document.getElementById(n):n,this.composer=e.composer,this._getLinks("command"),this._getLinks("action"),this._observe(),this.show();for(var i=this.container.querySelectorAll("[data-wysihtml5-command=insertSpeech]"),o=i.length,r=0;o>r;r++)new t.toolbar.Speech(this,i[r])},_getLinks:function(e){for(var n,i,o,r,s,a=this[e+"Links"]=t.lang.array(this.container.querySelectorAll("[data-wysihtml5-"+e+"]")).get(),l=a.length,c=0,u=this[e+"Mapping"]={};l>c;c++)n=a[c],o=n.getAttribute("data-wysihtml5-"+e),r=n.getAttribute("data-wysihtml5-"+e+"-value"),i=this.container.querySelector("[data-wysihtml5-"+e+"-group='"+o+"']"),s=this._getDialog(n,o),u[o+":"+r]={link:n,group:i,name:o,value:r,dialog:s,state:!1}},_getDialog:function(e,n){var i,o,r=this,s=this.container.querySelector("[data-wysihtml5-dialog='"+n+"']");return s&&(i=new t.toolbar.Dialog(e,s),i.observe("show",function(){o=r.composer.selection.getBookmark(),r.editor.fire("show:dialog",{command:n,dialogContainer:s,commandLink:e})}),i.observe("save",function(t){o&&r.composer.selection.setBookmark(o),r._execCommand(n,t),r.editor.fire("save:dialog",{command:n,dialogContainer:s,commandLink:e})}),i.observe("cancel",function(){r.editor.focus(!1),r.editor.fire("cancel:dialog",{command:n,dialogContainer:s,commandLink:e})})),i},execCommand:function(t,e){if(!this.commandsDisabled){var n=this.commandMapping[t+":"+e];n&&n.dialog&&!n.state?n.dialog.show():this._execCommand(t,e)}},_execCommand:function(t,e){this.editor.focus(!1),this.composer.commands.exec(t,e),this._updateLinkStates()},execAction:function(t){var e=this.editor;switch(t){case"change_view":e.currentView===e.textarea?e.fire("change_view","composer"):e.fire("change_view","textarea")}},_observe:function(){for(var t=this,e=this.editor,i=this.container,o=this.commandLinks.concat(this.actionLinks),s=o.length,a=0;s>a;a++)r.setAttributes({href:"javascript:;",unselectable:"on"}).on(o[a]);r.delegate(i,"[data-wysihtml5-command], [data-wysihtml5-action]","mousedown",function(t){t.preventDefault()}),r.delegate(i,"[data-wysihtml5-command]","click",function(e){var n=this,i=n.getAttribute("data-wysihtml5-command"),o=n.getAttribute("data-wysihtml5-command-value");t.execCommand(i,o),e.preventDefault()}),r.delegate(i,"[data-wysihtml5-action]","click",function(e){var n=this.getAttribute("data-wysihtml5-action");t.execAction(n),e.preventDefault()}),e.observe("focus:composer",function(){t.bookmark=null,clearInterval(t.interval),t.interval=setInterval(function(){t._updateLinkStates()},500)}),e.observe("blur:composer",function(){clearInterval(t.interval)}),e.observe("destroy:composer",function(){clearInterval(t.interval)}),e.observe("change_view",function(e){setTimeout(function(){t.commandsDisabled="composer"!==e,t._updateLinkStates(),t.commandsDisabled?r.addClass(i,n):r.removeClass(i,n)},0)})},_updateLinkStates:function(){var n,s,a,l,c=(this.composer.element,this.commandMapping),u=this.actionMapping;for(n in c)l=c[n],this.commandsDisabled?(s=!1,r.removeClass(l.link,i),l.group&&r.removeClass(l.group,i),l.dialog&&l.dialog.hide()):(s=this.composer.commands.state(l.name,l.value),t.lang.object(s).isArray()&&(s=1===s.length?s[0]:!0),r.removeClass(l.link,e),l.group&&r.removeClass(l.group,e)),l.state!==s&&(l.state=s,s?(r.addClass(l.link,i),l.group&&r.addClass(l.group,i),l.dialog&&("object"==typeof s?l.dialog.show(s):l.dialog.hide())):(r.removeClass(l.link,i),l.group&&r.removeClass(l.group,i),l.dialog&&l.dialog.hide()));for(n in u)a=u[n],"change_view"===a.name&&(a.state=this.editor.currentView===this.editor.textarea,a.state?r.addClass(a.link,o):r.removeClass(a.link,o))},show:function(){this.container.style.display=""},hide:function(){this.container.style.display="none"}})}(wysihtml5),function(t){var e,n={name:e,style:!0,toolbar:e,autoLink:!0,parserRules:{tags:{br:{},span:{},div:{},p:{}},classes:{}},parser:t.dom.parse,composerClassName:"wysihtml5-editor",bodyClassName:"wysihtml5-supported",stylesheets:[],placeholderText:e,supportTouchDevices:!0};t.Editor=t.lang.Dispatcher.extend({constructor:function(e,i){if(this.textareaElement="string"==typeof e?document.getElementById(e):e,this.config=t.lang.object({}).merge(n).merge(i).get(),this.textarea=new t.views.Textarea(this,this.textareaElement,this.config),this.currentView=this.textarea,this._isCompatible=t.browser.supported(),!this._isCompatible||!this.config.supportTouchDevices&&t.browser.isTouchDevice()){var o=this;return void setTimeout(function(){o.fire("beforeload").fire("load")},0)}t.dom.addClass(document.body,this.config.bodyClassName),this.composer=new t.views.Composer(this,this.textareaElement,this.config),this.currentView=this.composer,"function"==typeof this.config.parser&&this._initParser(),this.observe("beforeload",function(){this.synchronizer=new t.views.Synchronizer(this,this.textarea,this.composer),this.config.toolbar&&(this.toolbar=new t.toolbar.Toolbar(this,this.config.toolbar))});try{console.log("Heya! This page is using wysihtml5 for rich text editing. Check out https://github.com/xing/wysihtml5")}catch(r){}},isCompatible:function(){return this._isCompatible},clear:function(){return this.currentView.clear(),this},getValue:function(t){return this.currentView.getValue(t)},setValue:function(t,e){return this.fire("unset_placeholder"),t?(this.currentView.setValue(t,e),this):this.clear()},focus:function(t){return this.currentView.focus(t),this},disable:function(){return this.currentView.disable(),this},enable:function(){return this.currentView.enable(),this},isEmpty:function(){return this.currentView.isEmpty()},hasPlaceholderSet:function(){return this.currentView.hasPlaceholderSet()},parse:function(e){var n=this.config.parser(e,this.config.parserRules,this.composer.sandbox.getDocument(),!0);return"object"==typeof e&&t.quirks.redraw(e),n},_initParser:function(){this.observe("paste:composer",function(){var e=!0,n=this;n.composer.selection.executeAndRestore(function(){t.quirks.cleanPastedHTML(n.composer.element),n.parse(n.composer.element)},e)}),this.observe("paste:textarea",function(){var t,e=this.textarea.getValue();t=this.parse(e),this.textarea.setValue(t)})}})}(wysihtml5),!function(t,e){"use strict";var n={"font-styles":function(t,e){var n=e&&e.size?" btn-"+e.size:"";return"<li class='dropdown'><a class='btn btn-default dropdown-toggle"+n+"' data-toggle='dropdown' href='#' title='"+t.font_styles.title+"'><i class='glyphicon glyphicon-font'></i>&nbsp;<span class='current-font'>"+t.font_styles.normal+"</span>&nbsp;<b class='caret'></b></a><ul class='dropdown-menu'><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='div' tabindex='-1' role='menuitem'>"+t.font_styles.normal+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h1' tabindex='-1' role='menuitem'>"+t.font_styles.h1+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h2' tabindex='-1' role='menuitem'>"+t.font_styles.h2+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h3' tabindex='-1' role='menuitem'>"+t.font_styles.h3+"</a></li></ul></li>"},emphasis:function(t,e){var n=e&&e.size?" btn-"+e.size:"";return"<li><div class='btn-group'><a class='btn btn-default "+n+"' data-wysihtml5-command='bold' title='CTRL+B' tabindex='-1'>"+t.emphasis.bold+"</a><a class='btn btn-default "+n+"' data-wysihtml5-command='italic' title='CTRL+I' tabindex='-1'>"+t.emphasis.italic+"</a><a class='btn btn-default "+n+"' data-wysihtml5-command='underline' title='CTRL+U' tabindex='-1'>"+t.emphasis.underline+"</a></div></li>"},lists:function(t,e){var n=e&&e.size?" btn-"+e.size:"";return"<li><div class='btn-group'><a class='btn btn-default "+n+"' data-wysihtml5-command='insertUnorderedList' title='"+t.lists.unordered+"' tabindex='-1'><i class='glyphicon glyphicon-list'></i></a><a class='btn btn-default "+n+"' data-wysihtml5-command='insertOrderedList' title='"+t.lists.ordered+"' tabindex='-1'><i class='glyphicon glyphicon-th-list'></i></a><a class='btn btn-default "+n+"' data-wysihtml5-command='Outdent' title='"+t.lists.outdent+"' tabindex='-1'><i class='glyphicon glyphicon-indent-left'></i></a><a class='btn btn-default "+n+"' data-wysihtml5-command='Indent' title='"+t.lists.indent+"' tabindex='-1'><i class='glyphicon glyphicon-indent-right'></i></a></div></li>"},link:function(t,e){var n=e&&e.size?" btn-"+e.size:"";return"<li><div class='bootstrap-wysihtml5-insert-link-modal modal fade' tabindex='-1' role='dialog' aria-hidden='true'><div class='modal-dialog'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-dismiss='modal' aria-hidden='true'>&times;</button><h3 class='modal-title'>"+t.link.insert+"</h3></div><div class='modal-body'><input value='http://' class='bootstrap-wysihtml5-insert-link-url form-control input-lg'></div><div class='modal-footer'><a href='#' class='btn btn-default' data-dismiss='modal'>"+t.link.cancel+"</a><a href='#' class='btn btn-primary' data-dismiss='modal'>"+t.link.insert+"</a></div></div></div></div><a class='btn btn-default "+n+"' data-wysihtml5-command='createLink' title='"+t.link.insert+"' tabindex='-1'><i class='glyphicon glyphicon-share'></i></a></li>"},image:function(t,e){var n=e&&e.size?" btn-"+e.size:"";return"<li><div class='bootstrap-wysihtml5-insert-image-modal modal fade' tabindex='-1' role='dialog' aria-hidden='true'><div class='modal-dialog'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-dismiss='modal' aria-hidden='true'>&times;</button><h3 class='modal-title'>"+t.image.insert+"</h3></div><div class='modal-body'><input value='http://' class='bootstrap-wysihtml5-insert-image-url form-control input-lg'></div><div class='modal-footer'><a href='#' class='btn btn-default ' data-dismiss='modal'>"+t.image.cancel+"</a><a href='#' class='btn btn-primary' data-dismiss='modal'>"+t.image.insert+"</a></div></div></div></div><a class='btn btn-default "+n+"' data-wysihtml5-command='insertImage' title='"+t.image.insert+"' tabindex='-1'><i class='glyphicon glyphicon-picture'></i></a></li>"},html:function(t,e){var n=e&&e.size?" btn-"+e.size:"";return"<li><div class='btn-group'><a class='btn btn-default "+n+"' data-wysihtml5-action='change_view' title='"+t.html.edit+"' tabindex='-1'><i class='glyphicon glyphicon-pencil'></i></a></div></li>"},color:function(t,e){var n=e&&e.size?" btn-"+e.size:"";return"<li class='dropdown'><a class='btn btn-default dropdown-toggle"+n+"' data-toggle='dropdown' href='#' tabindex='-1' title='"+t.colours.title+"'><span class='current-color'>"+t.colours.black+"</span>&nbsp;<b class='caret'></b></a><ul class='dropdown-menu'><li><div class='wysihtml5-colors' data-wysihtml5-command-value='black'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='black' role='menuitem'>"+t.colours.black+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='silver'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='silver' role='menuitem'>"+t.colours.silver+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='gray'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='gray' role='menuitem'>"+t.colours.gray+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='maroon'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='maroon' role='menuitem'>"+t.colours.maroon+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='red'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='red' role='menuitem'>"+t.colours.red+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='purple'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='purple' role='menuitem'>"+t.colours.purple+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='green'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='green' role='menuitem'>"+t.colours.green+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='olive'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='olive' role='menuitem'>"+t.colours.olive+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='navy'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='navy' role='menuitem'>"+t.colours.navy+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='blue'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='blue' role='menuitem'>"+t.colours.blue+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='orange'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='orange' role='menuitem'>"+t.colours.orange+"</a></li></ul></li>"}},i=function(t,e,i){return n[t](e,i)},o=function(e,i){this.el=e;var o=i||s;for(var r in o.customTemplates)n[r]=o.customTemplates[r];this.toolbar=this.createToolbar(e,o),this.editor=this.createEditor(i),window.editor=this.editor,t("iframe.wysihtml5-sandbox").each(function(e,n){t(n.contentWindow).off("focus.wysihtml5").on({"focus.wysihtml5":function(){t("li.dropdown").removeClass("open")}})})};o.prototype={constructor:o,createEditor:function(n){n=n||{},n=t.extend(!0,{},n),n.toolbar=this.toolbar[0];var i=new e.Editor(this.el[0],n);if(n&&n.events)for(var o in n.events)i.on(o,n.events[o]);return i},createToolbar:function(e,n){var o=this,r=t("<ul/>",{"class":"wysihtml5-toolbar",style:"display:none"}),l=n.locale||s.locale||"en";for(var c in s){var u=!1;void 0!==n[c]?n[c]===!0&&(u=!0):u=s[c],u===!0&&(r.append(i(c,a[l],n)),"html"===c&&this.initHtml(r),"link"===c&&this.initInsertLink(r),"image"===c&&this.initInsertImage(r),"customCommand"==c&&this.initCustomCommand(r,n.customCommandCallback))}if(n.toolbar)for(c in n.toolbar)r.append(n.toolbar[c]);return r.find("a[data-wysihtml5-command='formatBlock']").click(function(e){var n=e.target||e.srcElement,i=t(n);o.toolbar.find(".current-font").text(i.html())}),r.find("a[data-wysihtml5-command='foreColor']").click(function(e){var n=e.target||e.srcElement,i=t(n);o.toolbar.find(".current-color").text(i.html())}),this.el.before(r),r},initHtml:function(t){var e="a[data-wysihtml5-action='change_view']";t.find(e).click(function(){t.find("a.btn").not(e).toggleClass("disabled")})},initInsertImage:function(e){var n,i=this,o=e.find(".bootstrap-wysihtml5-insert-image-modal"),r=o.find(".bootstrap-wysihtml5-insert-image-url"),s=o.find("a.btn-primary"),a=r.val(),l=function(){var t=r.val();r.val(a),i.editor.currentView.element.focus(),n&&(i.editor.composer.selection.setBookmark(n),n=null),i.editor.composer.commands.exec("insertImage",t)};r.keypress(function(t){13==t.which&&(l(),o.modal("hide"))}),s.click(l),o.on("shown",function(){r.focus()}),o.on("hide",function(){i.editor.currentView.element.focus()}),e.find("a[data-wysihtml5-command=insertImage]").click(function(){var e=t(this).hasClass("wysihtml5-command-active");return e?!0:(i.editor.currentView.element.focus(!1),n=i.editor.composer.selection.getBookmark(),o.appendTo("body").modal("show"),o.on("click.dismiss.modal",'[data-dismiss="modal"]',function(t){t.stopPropagation()}),!1)})},initCustomCommand:function(e,n){var i=this;e.find("a[data-wysihtml5-command=customCommand]").click(function(){var e=t(this).hasClass("wysihtml5-command-active");return e?!0:(n(i.editor),!1)})},initInsertLink:function(e){var n,i=this,o=e.find(".bootstrap-wysihtml5-insert-link-modal"),r=o.find(".bootstrap-wysihtml5-insert-link-url"),s=o.find("a.btn-primary"),a=r.val(),l=function(){var t=r.val();r.val(a),i.editor.currentView.element.focus(),n&&(i.editor.composer.selection.setBookmark(n),n=null),i.editor.composer.commands.exec("createLink",{href:t,target:"_blank",rel:"nofollow"})};r.keypress(function(t){13==t.which&&(l(),o.modal("hide"))}),s.click(l),o.on("shown",function(){r.focus()}),o.on("hide",function(){i.editor.currentView.element.focus()}),e.find("a[data-wysihtml5-command=createLink]").click(function(){var e=t(this).hasClass("wysihtml5-command-active");return e?!0:(i.editor.currentView.element.focus(!1),n=i.editor.composer.selection.getBookmark(),o.appendTo("body").modal("show"),o.on("click.dismiss.modal",'[data-dismiss="modal"]',function(t){t.stopPropagation()}),!1)})}};var r={resetDefaults:function(){t.fn.wysihtml5.defaultOptions=t.extend(!0,{},t.fn.wysihtml5.defaultOptionsCache)},bypassDefaults:function(e){return this.each(function(){var n=t(this);n.data("wysihtml5",new o(n,e))})},shallowExtend:function(e){var n=t.extend({},t.fn.wysihtml5.defaultOptions,e||{}),i=this;return r.bypassDefaults.apply(i,[n])},deepExtend:function(e){var n=t.extend(!0,{},t.fn.wysihtml5.defaultOptions,e||{}),i=this;return r.bypassDefaults.apply(i,[n])},init:function(t){var e=this;return r.shallowExtend.apply(e,[t])}};t.fn.wysihtml5=function(e){return r[e]?r[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.wysihtml5"):r.init.apply(this,arguments)},t.fn.wysihtml5.Constructor=o;var s=t.fn.wysihtml5.defaultOptions={"font-styles":!0,color:!1,emphasis:!0,lists:!0,html:!1,link:!0,image:!0,customCommand:!1,events:{},parserRules:{classes:{"wysiwyg-color-silver":1,"wysiwyg-color-gray":1,"wysiwyg-color-white":1,"wysiwyg-color-maroon":1,"wysiwyg-color-red":1,"wysiwyg-color-purple":1,"wysiwyg-color-fuchsia":1,"wysiwyg-color-green":1,"wysiwyg-color-lime":1,"wysiwyg-color-olive":1,"wysiwyg-color-yellow":1,"wysiwyg-color-navy":1,"wysiwyg-color-blue":1,"wysiwyg-color-teal":1,"wysiwyg-color-aqua":1,"wysiwyg-color-orange":1},tags:{b:{},i:{},br:{},ol:{},ul:{},li:{},h1:{},h2:{},h3:{},blockquote:{},u:1,img:{check_attributes:{width:"numbers",alt:"alt",src:"url",height:"numbers"}},a:{set_attributes:{target:"_blank",rel:"nofollow"},check_attributes:{href:"url"}},span:1,div:1,code:1,pre:1}},stylesheets:["./lib/css/wysiwyg-color.css"],locale:"en"};"undefined"==typeof t.fn.wysihtml5.defaultOptionsCache&&(t.fn.wysihtml5.defaultOptionsCache=t.extend(!0,{},t.fn.wysihtml5.defaultOptions));var a=t.fn.wysihtml5.locale={en:{font_styles:{title:"Font style",normal:"Normal text",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3"},emphasis:{bold:"Bold",italic:"Italic",underline:"Underline"},lists:{unordered:"Unordered list",ordered:"Ordered list",outdent:"Outdent",indent:"Indent"},link:{insert:"Insert link",cancel:"Cancel"},image:{insert:"Insert image",cancel:"Cancel"},html:{edit:"Edit HTML"},colours:{title:"Text color",black:"Black",silver:"Silver",gray:"Grey",maroon:"Maroon",red:"Red",purple:"Purple",green:"Green",olive:"Olive",navy:"Navy",blue:"Blue",orange:"Orange"}}}}(window.jQuery,window.wysihtml5),window.Bootsy=window.Bootsy||{},Bootsy.Area=function(t){this.$el=t,this.modal=t.siblings(".bootsy-modal"),this.locale=t.data("bootsy-locale")||$("html").attr("lang")||"en",this.unsavedChanges=!1,this.options={locale:this.locale,alertUnsavedChanges:t.data("bootsy-alert-unsaved"),image:t.data("bootsy-image"),uploader:t.data("bootsy-uploader")},t.data("bootsy-font-styles")===!1&&(this.options["font-styles"]=!1),t.data("bootsy-emphasis")===!1&&(this.options.emphasis=!1),t.data("bootsy-lists")===!1&&(this.options.lists=!1),t.data("bootsy-html")===!0&&(this.options.html=!0),t.data("bootsy-link")===!1&&(this.options.link=!1),t.data("bootsy-color")===!1&&(this.options.color=!1),this.find=this.modal.find.bind(this.modal)},Bootsy.Area.prototype.showGalleryLoadingAnimation=function(){this.find(".bootsy-gallery-loader").fadeIn(200)},Bootsy.Area.prototype.hideGalleryLoadingAnimation=function(){this.find(".bootsy-gallery-loader").fadeOut(200)},Bootsy.Area.prototype.showUploadLoadingAnimation=function(){this.find(".bootsy-upload-loader").fadeIn(200)},Bootsy.Area.prototype.hideUploadLoadingAnimation=function(){this.find(".bootsy-upload-loader").fadeOut(200)},Bootsy.Area.prototype.showEmptyAlert=function(){this.find(".bootsy-empty-alert").fadeIn(200)},Bootsy.Area.prototype.hideEmptyAlert=function(){this.find(".bootsy-empty-alert").fadeOut(200)},Bootsy.Area.prototype.showRefreshButton=function(){this.find(".refresh-btn").fadeIn(200)},Bootsy.Area.prototype.hideRefreshButton=function(){this.find(".refresh-btn").fadeOut(200)},Bootsy.Area.prototype.setUploadForm=function(t){this.find(".modal-footer").html(t),this.hideUploadLoadingAnimation(),this.find('.bootsy-upload-form input[type="file"]').bootstrapFileInput(),this.uploadInput=this.find('.bootsy-upload-form input[type="file"]'),this.uploadInput.change(function(){this.showUploadLoadingAnimation(),this.uploadInput.closest("form").submit()}.bind(this))},Bootsy.Area.prototype.setImageGallery=function(){this.showGalleryLoadingAnimation(),$.ajax({url:"/bootsy/images",type:"GET",cache:!1,data:{image_gallery_id:this.modal.data("gallery-id")},dataType:"json",success:function(t){this.hideGalleryLoadingAnimation(),$.each(t.images,function(t,e){this.addImage(e)}.bind(this)),0===t.images.length&&this.showEmptyAlert(),this.setUploadForm(t.form),this.modal.data("gallery-loaded",!0)}.bind(this),error:function(){alert(Bootsy.translations[this.locale].error),this.showRefreshButton()}.bind(this)})},Bootsy.Area.prototype.deleteImage=function(t){var e=this.find('.bootsy-image[data-id="'+t+'"]');this.hideGalleryLoadingAnimation(),e.hide(200,function(){e.remove(),0===this.find(".bootsy-image").length&&this.showEmptyAlert()}.bind(this))},Bootsy.Area.prototype.addImage=function(t){this.hideEmptyAlert(),$(t).hide().appendTo(this.find(".bootsy-gallery")).fadeIn(200)},Bootsy.Area.prototype.insertImage=function(t){this.modal.modal("hide"),this.editor.currentView.element.focus(),this.caretBookmark&&(this.editor.composer.selection.setBookmark(this.caretBookmark),this.caretBookmark=null),this.editor.composer.commands.exec("insertImage",t)},Bootsy.Area.prototype.openImagesModal=function(t){t.currentView.element.focus(!1),this.caretBookmark=t.composer.selection.getBookmark(),this.modal.modal("show")},Bootsy.Area.prototype.unsavedChangesAlert=function(){return this.unsavedChanges?Bootsy.translations[this.locale].alertUnsaved:void 0},Bootsy.Area.prototype.clear=function(){this.editor.clear(),this.setImageGalleryId(""),this.modal.data("gallery-loaded",!1)},Bootsy.Area.prototype.setImageGalleryId=function(t){this.modal.data("gallery-id",t),this.$el.siblings(".bootsy_image_gallery_id").val(t)},Bootsy.Area.prototype.init=function(){var t;this.$el.data("bootsy-initialized")||(t=this.insertImage.bind(this),this.options.image===!0&&this.options.uploader===!0&&(this.modal.on("click",".bootsy-image .insert",function(e){var n,i,o="/"+$(this).attr("data-image-size")+"_";e.preventDefault(),"original"===$(this).data("image-size")&&(o="/"),n=$(this).parents(".bootsy-image").find("img"),i={src:n.attr("src").replace("/thumb_",o),alt:n.attr("alt").replace("Thumb_","")},i.align=$(this).data("position"),t(i)}),this.options.image=!1,this.options.customCommand=!0,this.options.customCommandCallback=this.openImagesModal.bind(this),this.options.customTemplates={customCommand:function(t,e){var n=e&&e.size?" btn-"+e.size:"";return'<li><a class="btn btn-default '+n+'" data-wysihtml5-command="customCommand" title="'+t.image.insert+'" tabindex="-1"><span class="glyphicon glyphicon-picture"></span></a></li>'}},this.modal.parents("form").after(this.modal),this.modal.on("click",'a[href="#refresh-gallery"]',this.setImageGallery.bind(this)),this.modal.on("ajax:before",".destroy-btn",this.showGalleryLoadingAnimation.bind(this)),this.modal.on("ajax:success",".destroy-btn",function(t,e){this.deleteImage(e.id)}.bind(this)),this.modal.on("ajax:success",".bootsy-upload-form",function(t,e){this.setImageGalleryId(e.gallery_id),this.addImage(e.image),this.setUploadForm(e.form)}.bind(this))),this.editor=this.$el.wysihtml5($.extend(Bootsy.options,this.options)).data("wysihtml5").editor,this.options.alertUnsavedChanges!==!1&&(window.onbeforeunload=this.unsavedChangesAlert.bind(this)),this.$el.closest("form").submit(function(){return this.unsavedChanges=!1,!0}.bind(this)),this.editor.on("change",function(){this.unsavedChanges=!0}.bind(this)),this.modal.modal({show:!1}),this.modal.on("shown.bs.modal",function(){this.modal.data("gallery-loaded")!==!0&&this.setImageGallery()}.bind(this)),this.modal.on("hide.bs.modal",this.editor.currentView.element.focus),this.hideRefreshButton(),this.hideEmptyAlert(),this.$el.data("bootsy-initialized",!0))},$(function(){$.fn.bootstrapFileInput=function(){this.each(function(t,e){var n=$(e);if("undefined"==typeof n.attr("data-bfi-disabled")){var i="Browse";"undefined"!=typeof n.attr("title")&&(i=n.attr("title"));var o=$("<div>").append(n.eq(0).clone()).html(),r="";n.attr("class")&&(r=" "+n.attr("class")),n.replaceWith('<a class="file-input-wrapper btn btn-default '+r+'">'+i+o+"</a>")}}).promise().done(function(){$(".file-input-wrapper").mousemove(function(t){var e,n,i,o,r,s,a,l;n=$(this),e=n.find("input"),i=n.offset().left,o=n.offset().top,r=e.width(),s=e.height(),a=t.pageX,l=t.pageY,moveInputX=a-i-r+20,moveInputY=l-o-s/2,e.css({left:moveInputX,top:moveInputY})}),$(".file-input-wrapper input[type=file]").change(function(){var t;t=$(this).val(),$(this).parent().next(".file-input-name").remove(),t=$(this).prop("files")&&$(this).prop("files").length>1?$(this)[0].files.length+" files":t.substring(t.lastIndexOf("\\")+1,t.length),$(this).parent().after('<span class="file-input-name">'+t+"</span>")})})};var t="<style>.file-input-wrapper { overflow: hidden; position: relative; cursor: pointer; z-index: 1; }.file-input-wrapper input[type=file], .file-input-wrapper input[type=file]:focus, .file-input-wrapper input[type=file]:hover { position: absolute; top: 0; left: 0; cursor: pointer; opacity: 0; filter: alpha(opacity=0); z-index: 99; outline: 0; }.file-input-name { margin-left: 8px; }</style>";$("link[rel=stylesheet]").eq(0).before(t)}),window.Bootsy=window.Bootsy||{},Bootsy.init=function(){Bootsy.areas||(Bootsy.areas={}),$("textarea.bootsy_text_area").each(function(t){if(!$(this).data("bootsy-initialized")){var e=new Bootsy.Area($(this)),n=$(this).attr("id")||t;void 0!==Bootsy.areas[n]&&(n=$(this).attr("id")+t),e.init(),Bootsy.areas[n]=e}})},$(function(){Bootsy.init(),window.Turbolinks&&$(document).on("page:load",Bootsy.init)}),window.Bootsy=window.Bootsy||{};var pageStylesheets=[];$('link[rel="stylesheet"]').each(function(){pageStylesheets.push($(this).attr("href"))}),window.Bootsy.options={parserRules:{classes:{"wysiwyg-color-silver":1,"wysiwyg-color-gray":1,"wysiwyg-color-white":1,"wysiwyg-color-maroon":1,"wysiwyg-color-red":1,"wysiwyg-color-purple":1,"wysiwyg-color-fuchsia":1,"wysiwyg-color-green":1,"wysiwyg-color-lime":1,"wysiwyg-color-olive":1,"wysiwyg-color-yellow":1,"wysiwyg-color-navy":1,"wysiwyg-color-blue":1,"wysiwyg-color-teal":1,"wysiwyg-color-aqua":1,"wysiwyg-color-orange":1,"wysiwyg-float-left":1,"wysiwyg-float-right":1},tags:{b:{},i:{},br:{},ol:{},ul:{},li:{},h1:{},h2:{},h3:{},small:{},p:{},blockquote:{},u:1,cite:{check_attributes:{title:"alt"}},img:{check_attributes:{width:"numbers",alt:"alt",src:"src",height:"numbers"},add_class:{align:"align_img"}},a:{set_attributes:{target:"_blank",rel:"nofollow"},check_attributes:{href:"url"}},span:1,div:1,code:1,pre:1,iframe:{set_attributes:{frameborder:"0",allowfullscreen:"1"},check_attributes:{width:"numbers",height:"numbers",src:"href"}}}},color:!0,stylesheets:pageStylesheets},window.Bootsy=window.Bootsy||{},window.Bootsy.translations={en:{alertUnsaved:"You have unsaved changes.",error:"Something went very wrong. Please try again later."}},function(){!function(){"use strict";
var Faye={VERSION:"1.0.1",BAYEUX_VERSION:"1.0",ID_LENGTH:160,JSONP_CALLBACK:"jsonpcallback",CONNECTION_TYPES:["long-polling","cross-origin-long-polling","callback-polling","websocket","eventsource","in-process"],MANDATORY_CONNECTION_TYPES:["long-polling","callback-polling","in-process"],ENV:"undefined"!=typeof window?window:global,extend:function(t,e,n){if(!e)return t;for(var i in e)e.hasOwnProperty(i)&&(t.hasOwnProperty(i)&&n===!1||t[i]!==e[i]&&(t[i]=e[i]));return t},random:function(t){return t=t||this.ID_LENGTH,csprng(t,36)},clientIdFromMessages:function(t){var e=this.filter([].concat(t),function(t){return"/meta/connect"===t.channel});return e[0]&&e[0].clientId},copyObject:function(t){var e,n,i;if(t instanceof Array){for(e=[],n=t.length;n--;)e[n]=Faye.copyObject(t[n]);return e}if("object"==typeof t){e=null===t?null:{};for(i in t)e[i]=Faye.copyObject(t[i]);return e}return t},commonElement:function(t,e){for(var n=0,i=t.length;i>n;n++)if(-1!==this.indexOf(e,t[n]))return t[n];return null},indexOf:function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1},map:function(t,e,n){if(t.map)return t.map(e,n);var i=[];if(t instanceof Array)for(var o=0,r=t.length;r>o;o++)i.push(e.call(n||null,t[o],o));else for(var s in t)t.hasOwnProperty(s)&&i.push(e.call(n||null,s,t[s]));return i},filter:function(t,e,n){if(t.filter)return t.filter(e,n);for(var i=[],o=0,r=t.length;r>o;o++)e.call(n||null,t[o],o)&&i.push(t[o]);return i},asyncEach:function(t,e,n,i){var o=t.length,r=-1,s=0,a=!1,l=function(){return s-=1,r+=1,r===o?n&&n.call(i):void e(t[r],u)},c=function(){if(!a){for(a=!0;s>0;)l();a=!1}},u=function(){s+=1,c()};u()},toJSON:function(t){return this.stringify?this.stringify(t,function(t,e){return this[t]instanceof Array?this[t]:e}):JSON.stringify(t)}};"undefined"!=typeof module?module.exports=Faye:"undefined"!=typeof window&&(window.Faye=Faye),Faye.Class=function(t,e){"function"!=typeof t&&(e=t,t=Object);var n=function(){return this.initialize?this.initialize.apply(this,arguments)||this:this},i=function(){};return i.prototype=t.prototype,n.prototype=new i,Faye.extend(n.prototype,e),n},function(){function t(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(e===t[n])return n;return-1}var e=Faye.EventEmitter=function(){},n="function"==typeof Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};e.prototype.emit=function(t){if("error"===t&&(!this._events||!this._events.error||n(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var e=this._events[t];if(!e)return!1;if("function"==typeof e){switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:var i=Array.prototype.slice.call(arguments,1);e.apply(this,i)}return!0}if(n(e)){for(var i=Array.prototype.slice.call(arguments,1),o=e.slice(),r=0,s=o.length;s>r;r++)o[r].apply(this,i);return!0}return!1},e.prototype.addListener=function(t,e){if("function"!=typeof e)throw Error("addListener only takes instances of Function");return this._events||(this._events={}),this.emit("newListener",t,e),this._events[t]?n(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,this},e.prototype.on=e.prototype.addListener,e.prototype.once=function(t,e){var n=this;return n.on(t,function i(){n.removeListener(t,i),e.apply(this,arguments)}),this},e.prototype.removeListener=function(e,i){if("function"!=typeof i)throw Error("removeListener only takes instances of Function");if(!this._events||!this._events[e])return this;var o=this._events[e];if(n(o)){var r=t(o,i);if(0>r)return this;o.splice(r,1),0==o.length&&delete this._events[e]}else this._events[e]===i&&delete this._events[e];return this},e.prototype.removeAllListeners=function(t){return 0===arguments.length?(this._events={},this):(t&&this._events&&this._events[t]&&(this._events[t]=null),this)},e.prototype.listeners=function(t){return this._events||(this._events={}),this._events[t]||(this._events[t]=[]),n(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]}}(),Faye.Namespace=Faye.Class({initialize:function(){this._used={}},exists:function(t){return this._used.hasOwnProperty(t)},generate:function(){for(var t=Faye.random();this._used.hasOwnProperty(t);)t=Faye.random();return this._used[t]=t},release:function(t){delete this._used[t]}}),function(){var t,e=setTimeout;t="function"==typeof setImmediate?function(t){setImmediate(t)}:"object"==typeof process&&process.nextTick?function(t){process.nextTick(t)}:function(t){e(t,0)};var n=0,i=1,o=2,r=function(t){return t},s=function(t){throw t},a=function(t){if(this._state=n,this._callbacks=[],this._errbacks=[],"function"==typeof t){var e=this;t(function(t){h(e,t)},function(t){f(e,t)})}};a.prototype.then=function(t,e){var n={},i=this;return n.promise=new a(function(o,r){n.fulfill=o,n.reject=r,l(i,t,n),c(i,e,n)}),n.promise};var l=function(t,e,o){"function"!=typeof e&&(e=r);var s=function(t){u(e,t,o)};t._state===n?t._callbacks.push(s):t._state===i&&s(t._value)},c=function(t,e,i){"function"!=typeof e&&(e=s);var r=function(t){u(e,t,i)};t._state===n?t._errbacks.push(r):t._state===o&&r(t._reason)},u=function(e,n,i){t(function(){d(e,n,i)})},d=function(t,e,n){var i,o,s,a=!1;try{if(i=t(e),o=typeof i,s=null!==i&&("function"===o||"object"===o)&&i.then,i===n.promise)return n.reject(new TypeError("Recursive promise chain detected"));if("function"!=typeof s)return n.fulfill(i);s.call(i,function(t){a||(a=!0,d(r,t,n))},function(t){a||(a=!0,n.reject(t))})}catch(l){if(a)return;a=!0,n.reject(l)}},h=a.fulfill=a.resolve=function(t,e){if(t._state===n){t._state=i,t._value=e,t._errbacks=[];for(var o,r=t._callbacks;o=r.shift();)o(e)}},f=a.reject=function(t,e){if(t._state===n){t._state=o,t._reason=e,t._callbacks=[];for(var i,r=t._errbacks;i=r.shift();)i(e)}};a.defer=t,a.deferred=a.pending=function(){var t={};return t.promise=new a(function(e,n){t.fulfill=t.resolve=e,t.reject=n}),t},a.fulfilled=a.resolved=function(t){return new a(function(e){e(t)})},a.rejected=function(t){return new a(function(e,n){n(t)})},void 0===Faye?module.exports=a:Faye.Promise=a}(),Faye.Set=Faye.Class({initialize:function(){this._index={}},add:function(t){var e=void 0!==t.id?t.id:t;return this._index.hasOwnProperty(e)?!1:(this._index[e]=t,!0)},forEach:function(t,e){for(var n in this._index)this._index.hasOwnProperty(n)&&t.call(e,this._index[n])},isEmpty:function(){for(var t in this._index)if(this._index.hasOwnProperty(t))return!1;return!0},member:function(t){for(var e in this._index)if(this._index[e]===t)return!0;return!1},remove:function(t){var e=void 0!==t.id?t.id:t,n=this._index[e];return delete this._index[e],n},toArray:function(){var t=[];return this.forEach(function(e){t.push(e)}),t}}),Faye.URI={isURI:function(t){return t&&t.protocol&&t.host&&t.path},isSameOrigin:function(t){var e=Faye.ENV.location;return t.protocol===e.protocol&&t.hostname===e.hostname&&t.port===e.port},parse:function(t){if("string"!=typeof t)return t;var e,n,i,o,r,s,a={},l=function(e,n){t=t.replace(n,function(t){return a[e]=t,""}),a[e]=a[e]||""};for(l("protocol",/^[a-z]+\:/i),l("host",/^\/\/[^\/\?#]+/),/^\//.test(t)||a.host||(t=Faye.ENV.location.pathname.replace(/[^\/]*$/,"")+t),l("pathname",/^[^\?#]*/),l("search",/^\?[^#]*/),l("hash",/^#.*/),a.protocol=a.protocol||Faye.ENV.location.protocol,a.host?(a.host=a.host.substr(2),e=a.host.split(":"),a.hostname=e[0],a.port=e[1]||""):(a.host=Faye.ENV.location.host,a.hostname=Faye.ENV.location.hostname,a.port=Faye.ENV.location.port),a.pathname=a.pathname||"/",a.path=a.pathname+a.search,n=a.search.replace(/^\?/,""),i=n?n.split("&"):[],s={},o=0,r=i.length;r>o;o++)e=i[o].split("="),s[decodeURIComponent(e[0]||"")]=decodeURIComponent(e[1]||"");return a.query=s,a.href=this.stringify(a),a},stringify:function(t){var e=t.protocol+"//"+t.hostname;return t.port&&(e+=":"+t.port),e+=t.pathname+this.queryString(t.query)+(t.hash||"")},queryString:function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return 0===e.length?"":"?"+e.join("&")}},Faye.Error=Faye.Class({initialize:function(t,e,n){this.code=t,this.params=Array.prototype.slice.call(e),this.message=n},toString:function(){return this.code+":"+this.params.join(",")+":"+this.message}}),Faye.Error.parse=function(t){if(t=t||"",!Faye.Grammar.ERROR.test(t))return new this(null,[],t);var e=t.split(":"),n=parseInt(e[0]),i=e[1].split(","),t=e[2];return new this(n,i,t)},Faye.Error.versionMismatch=function(){return""+new this(300,arguments,"Version mismatch")},Faye.Error.conntypeMismatch=function(){return""+new this(301,arguments,"Connection types not supported")},Faye.Error.extMismatch=function(){return""+new this(302,arguments,"Extension mismatch")},Faye.Error.badRequest=function(){return""+new this(400,arguments,"Bad request")},Faye.Error.clientUnknown=function(){return""+new this(401,arguments,"Unknown client")},Faye.Error.parameterMissing=function(){return""+new this(402,arguments,"Missing required parameter")},Faye.Error.channelForbidden=function(){return""+new this(403,arguments,"Forbidden channel")},Faye.Error.channelUnknown=function(){return""+new this(404,arguments,"Unknown channel")},Faye.Error.channelInvalid=function(){return""+new this(405,arguments,"Invalid channel")},Faye.Error.extUnknown=function(){return""+new this(406,arguments,"Unknown extension")},Faye.Error.publishFailed=function(){return""+new this(407,arguments,"Failed to publish")},Faye.Error.serverError=function(){return""+new this(500,arguments,"Internal server error")},Faye.Deferrable={then:function(t,e){var n=this;return this._promise||(this._promise=new Faye.Promise(function(t,e){n._fulfill=t,n._reject=e})),0===arguments.length?this._promise:this._promise.then(t,e)},callback:function(t,e){return this.then(function(n){t.call(e,n)})},errback:function(t,e){return this.then(null,function(n){t.call(e,n)})},timeout:function(t,e){this.then();var n=this;this._timer=Faye.ENV.setTimeout(function(){n._reject(e)},1e3*t)},setDeferredStatus:function(t,e){this._timer&&Faye.ENV.clearTimeout(this._timer),this.then(),"succeeded"===t?this._fulfill(e):"failed"===t?this._reject(e):delete this._promise}},Faye.Publisher={countListeners:function(t){return this.listeners(t).length},bind:function(t,e,n){var i=Array.prototype.slice,o=function(){e.apply(n,i.call(arguments))};return this._listeners=this._listeners||[],this._listeners.push([t,e,n,o]),this.on(t,o)},unbind:function(t,e,n){this._listeners=this._listeners||[];for(var i,o=this._listeners.length;o--;)i=this._listeners[o],i[0]===t&&(!e||i[1]===e&&i[2]===n)&&(this._listeners.splice(o,1),this.removeListener(t,i[3]))}},Faye.extend(Faye.Publisher,Faye.EventEmitter.prototype),Faye.Publisher.trigger=Faye.Publisher.emit,Faye.Timeouts={addTimeout:function(t,e,n,i){if(this._timeouts=this._timeouts||{},!this._timeouts.hasOwnProperty(t)){var o=this;this._timeouts[t]=Faye.ENV.setTimeout(function(){delete o._timeouts[t],n.call(i)},1e3*e)}},removeTimeout:function(t){this._timeouts=this._timeouts||{};var e=this._timeouts[t];e&&(clearTimeout(e),delete this._timeouts[t])},removeAllTimeouts:function(){this._timeouts=this._timeouts||{};for(var t in this._timeouts)this.removeTimeout(t)}},Faye.Logging={LOG_LEVELS:{fatal:4,error:3,warn:2,info:1,debug:0},writeLog:function(t,e){if(Faye.logger){var t=Array.prototype.slice.apply(t),n="[Faye",i=this.className,o=t.shift().replace(/\?/g,function(){try{return Faye.toJSON(t.shift())}catch(e){return"[Object]"}});for(var r in Faye)i||"function"==typeof Faye[r]&&this instanceof Faye[r]&&(i=r);i&&(n+="."+i),n+="] ","function"==typeof Faye.logger[e]?Faye.logger[e](n+o):"function"==typeof Faye.logger&&Faye.logger(n+o)}}},function(){for(var t in Faye.Logging.LOG_LEVELS)(function(t){Faye.Logging[t]=function(){this.writeLog(arguments,t)}})(t,Faye.Logging.LOG_LEVELS[t])}(),Faye.Grammar={CHANNEL_NAME:/^\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+(\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+)*$/,CHANNEL_PATTERN:/^(\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+)*\/\*{1,2}$/,ERROR:/^([0-9][0-9][0-9]:(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*(,(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*)*:(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*|[0-9][0-9][0-9]::(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*)$/,VERSION:/^([0-9])+(\.(([a-z]|[A-Z])|[0-9])(((([a-z]|[A-Z])|[0-9])|\-|\_))*)*$/},Faye.Extensible={addExtension:function(t){this._extensions=this._extensions||[],this._extensions.push(t),t.added&&t.added(this)},removeExtension:function(t){if(this._extensions)for(var e=this._extensions.length;e--;)this._extensions[e]===t&&(this._extensions.splice(e,1),t.removed&&t.removed(this))},pipeThroughExtensions:function(t,e,n,i,o){if(this.debug("Passing through ? extensions: ?",t,e),!this._extensions)return i.call(o,e);var r=this._extensions.slice(),s=function(e){if(!e)return i.call(o,e);var a=r.shift();if(!a)return i.call(o,e);var l=a[t];return l?void(l.length>=3?a[t](e,n,s):a[t](e,s)):s(e)};s(e)}},Faye.extend(Faye.Extensible,Faye.Logging),Faye.Channel=Faye.Class({initialize:function(t){this.id=this.name=t},push:function(t){this.trigger("message",t)},isUnused:function(){return 0===this.countListeners("message")}}),Faye.extend(Faye.Channel.prototype,Faye.Publisher),Faye.extend(Faye.Channel,{HANDSHAKE:"/meta/handshake",CONNECT:"/meta/connect",SUBSCRIBE:"/meta/subscribe",UNSUBSCRIBE:"/meta/unsubscribe",DISCONNECT:"/meta/disconnect",META:"meta",SERVICE:"service",expand:function(t){var e=this.parse(t),n=["/**",t],i=e.slice();i[i.length-1]="*",n.push(this.unparse(i));for(var o=1,r=e.length;r>o;o++)i=e.slice(0,o),i.push("**"),n.push(this.unparse(i));return n},isValid:function(t){return Faye.Grammar.CHANNEL_NAME.test(t)||Faye.Grammar.CHANNEL_PATTERN.test(t)},parse:function(t){return this.isValid(t)?t.split("/").slice(1):null},unparse:function(t){return"/"+t.join("/")},isMeta:function(t){var e=this.parse(t);return e?e[0]===this.META:null},isService:function(t){var e=this.parse(t);return e?e[0]===this.SERVICE:null},isSubscribable:function(t){return this.isValid(t)?!this.isMeta(t)&&!this.isService(t):null},Set:Faye.Class({initialize:function(){this._channels={}},getKeys:function(){var t=[];for(var e in this._channels)t.push(e);return t},remove:function(t){delete this._channels[t]},hasSubscription:function(t){return this._channels.hasOwnProperty(t)},subscribe:function(t,e,n){if(e)for(var i,o=0,r=t.length;r>o;o++){i=t[o];var s=this._channels[i]=this._channels[i]||new Faye.Channel(i);s.bind("message",e,n)}},unsubscribe:function(t,e,n){var i=this._channels[t];return i?(i.unbind("message",e,n),i.isUnused()?(this.remove(t),!0):!1):!1},distributeMessage:function(t){for(var e=Faye.Channel.expand(t.channel),n=0,i=e.length;i>n;n++){var o=this._channels[e[n]];o&&o.trigger("message",t.data)}}})}),Faye.Envelope=Faye.Class({initialize:function(t,e){this.id=t.id,this.message=t,void 0!==e&&this.timeout(e/1e3,!1)}}),Faye.extend(Faye.Envelope.prototype,Faye.Deferrable),Faye.Publication=Faye.Class(Faye.Deferrable),Faye.Subscription=Faye.Class({initialize:function(t,e,n,i){this._client=t,this._channels=e,this._callback=n,this._context=i,this._cancelled=!1},cancel:function(){this._cancelled||(this._client.unsubscribe(this._channels,this._callback,this._context),this._cancelled=!0)},unsubscribe:function(){this.cancel()}}),Faye.extend(Faye.Subscription.prototype,Faye.Deferrable),Faye.Client=Faye.Class({UNCONNECTED:1,CONNECTING:2,CONNECTED:3,DISCONNECTED:4,HANDSHAKE:"handshake",RETRY:"retry",NONE:"none",CONNECTION_TIMEOUT:60,DEFAULT_RETRY:5,MAX_REQUEST_SIZE:2048,DEFAULT_ENDPOINT:"/bayeux",INTERVAL:0,initialize:function(t,e){this.info("New client created for ?",t),this._options=e||{},this.endpoint=Faye.URI.parse(t||this.DEFAULT_ENDPOINT),this.endpoints=this._options.endpoints||{},this.transports={},this.cookies=Faye.CookieJar&&new Faye.CookieJar,this.headers={},this.ca=this._options.ca,this._disabled=[],this._retry=this._options.retry||this.DEFAULT_RETRY;for(var n in this.endpoints)this.endpoints[n]=Faye.URI.parse(this.endpoints[n]);this.maxRequestSize=this.MAX_REQUEST_SIZE,this._state=this.UNCONNECTED,this._channels=new Faye.Channel.Set,this._messageId=0,this._responseCallbacks={},this._advice={reconnect:this.RETRY,interval:1e3*(this._options.interval||this.INTERVAL),timeout:1e3*(this._options.timeout||this.CONNECTION_TIMEOUT)},Faye.Event&&void 0!==Faye.ENV.onbeforeunload&&Faye.Event.on(Faye.ENV,"beforeunload",function(){Faye.indexOf(this._disabled,"autodisconnect")<0&&this.disconnect()},this)},disable:function(t){this._disabled.push(t)},setHeader:function(t,e){this.headers[t]=e},handshake:function(t,e){if(this._advice.reconnect!==this.NONE&&this._state===this.UNCONNECTED){this._state=this.CONNECTING;var n=this;this.info("Initiating handshake with ?",Faye.URI.stringify(this.endpoint)),this._selectTransport(Faye.MANDATORY_CONNECTION_TYPES),this._send({channel:Faye.Channel.HANDSHAKE,version:Faye.BAYEUX_VERSION,supportedConnectionTypes:[this._transport.connectionType]},function(i){i.successful?(this._state=this.CONNECTED,this._clientId=i.clientId,this._selectTransport(i.supportedConnectionTypes),this.info("Handshake successful: ?",this._clientId),this.subscribe(this._channels.getKeys(),!0),t&&Faye.Promise.defer(function(){t.call(e)})):(this.info("Handshake unsuccessful"),Faye.ENV.setTimeout(function(){n.handshake(t,e)},this._advice.interval),this._state=this.UNCONNECTED)},this)}},connect:function(t,e){if(this._advice.reconnect!==this.NONE&&this._state!==this.DISCONNECTED){if(this._state===this.UNCONNECTED)return this.handshake(function(){this.connect(t,e)},this);this.callback(t,e),this._state===this.CONNECTED&&(this.info("Calling deferred actions for ?",this._clientId),this.setDeferredStatus("succeeded"),this.setDeferredStatus("unknown"),this._connectRequest||(this._connectRequest=!0,this.info("Initiating connection for ?",this._clientId),this._send({channel:Faye.Channel.CONNECT,clientId:this._clientId,connectionType:this._transport.connectionType},this._cycleConnection,this)))}},disconnect:function(){this._state===this.CONNECTED&&(this._state=this.DISCONNECTED,this.info("Disconnecting ?",this._clientId),this._send({channel:Faye.Channel.DISCONNECT,clientId:this._clientId},function(t){t.successful&&(this._transport.close(),delete this._transport)},this),this.info("Clearing channel listeners for ?",this._clientId),this._channels=new Faye.Channel.Set)},subscribe:function(t,e,n){if(t instanceof Array)return Faye.map(t,function(t){return this.subscribe(t,e,n)},this);var i=new Faye.Subscription(this,t,e,n),o=e===!0,r=this._channels.hasSubscription(t);return r&&!o?(this._channels.subscribe([t],e,n),i.setDeferredStatus("succeeded"),i):(this.connect(function(){this.info("Client ? attempting to subscribe to ?",this._clientId,t),o||this._channels.subscribe([t],e,n),this._send({channel:Faye.Channel.SUBSCRIBE,clientId:this._clientId,subscription:t},function(o){if(!o.successful)return i.setDeferredStatus("failed",Faye.Error.parse(o.error)),this._channels.unsubscribe(t,e,n);var r=[].concat(o.subscription);this.info("Subscription acknowledged for ? to ?",this._clientId,r),i.setDeferredStatus("succeeded")},this)},this),i)},unsubscribe:function(t,e,n){if(t instanceof Array)return Faye.map(t,function(t){return this.unsubscribe(t,e,n)},this);var i=this._channels.unsubscribe(t,e,n);i&&this.connect(function(){this.info("Client ? attempting to unsubscribe from ?",this._clientId,t),this._send({channel:Faye.Channel.UNSUBSCRIBE,clientId:this._clientId,subscription:t},function(t){if(t.successful){var e=[].concat(t.subscription);this.info("Unsubscription acknowledged for ? from ?",this._clientId,e)}},this)},this)},publish:function(t,e){var n=new Faye.Publication;return this.connect(function(){this.info("Client ? queueing published message to ?: ?",this._clientId,t,e),this._send({channel:t,data:e,clientId:this._clientId},function(t){t.successful?n.setDeferredStatus("succeeded"):n.setDeferredStatus("failed",Faye.Error.parse(t.error))},this)},this),n},receiveMessage:function(t){var e,n=t.id;void 0!==t.successful&&(e=this._responseCallbacks[n],delete this._responseCallbacks[n]),this.pipeThroughExtensions("incoming",t,null,function(t){t&&(t.advice&&this._handleAdvice(t.advice),this._deliverMessage(t),e&&e[0].call(e[1],t))},this),this._transportUp!==!0&&(this._transportUp=!0,this.trigger("transport:up"))},messageError:function(t,e){for(var n,i,o=this._retry,r=this,s=0,a=t.length;a>s;s++)i=t[s],n=i.id,e?this._transportSend(i):Faye.ENV.setTimeout(function(){r._transportSend(i)},1e3*o);e||this._transportUp===!1||(this._transportUp=!1,this.trigger("transport:down"))},_selectTransport:function(t){Faye.Transport.get(this,t,this._disabled,function(t){this.debug("Selected ? transport for ?",t.connectionType,Faye.URI.stringify(t.endpoint)),t!==this._transport&&(this._transport&&this._transport.close(),this._transport=t)},this)},_send:function(t,e,n){this._transport&&(t.id=t.id||this._generateMessageId(),this.pipeThroughExtensions("outgoing",t,null,function(t){t&&(e&&(this._responseCallbacks[t.id]=[e,n]),this._transportSend(t))},this))},_transportSend:function(t){if(this._transport){var e=1.2*(this._advice.timeout||1e3*this._retry),n=new Faye.Envelope(t,e);n.errback(function(e){this.messageError([t],e)},this),this._transport.send(n)}},_generateMessageId:function(){return this._messageId+=1,this._messageId>=Math.pow(2,32)&&(this._messageId=0),this._messageId.toString(36)},_handleAdvice:function(t){Faye.extend(this._advice,t),this._advice.reconnect===this.HANDSHAKE&&this._state!==this.DISCONNECTED&&(this._state=this.UNCONNECTED,this._clientId=null,this._cycleConnection())},_deliverMessage:function(t){t.channel&&void 0!==t.data&&(this.info("Client ? calling listeners for ? with ?",this._clientId,t.channel,t.data),this._channels.distributeMessage(t))},_cycleConnection:function(){this._connectRequest&&(this._connectRequest=null,this.info("Closed connection for ?",this._clientId));var t=this;Faye.ENV.setTimeout(function(){t.connect()},this._advice.interval)}}),Faye.extend(Faye.Client.prototype,Faye.Deferrable),Faye.extend(Faye.Client.prototype,Faye.Publisher),Faye.extend(Faye.Client.prototype,Faye.Logging),Faye.extend(Faye.Client.prototype,Faye.Extensible),Faye.Transport=Faye.extend(Faye.Class({MAX_DELAY:0,batching:!0,initialize:function(t,e){this._client=t,this.endpoint=e,this._outbox=[]},close:function(){},encode:function(){return""},send:function(t){var e=t.message;return this.debug("Client ? sending message to ?: ?",this._client._clientId,Faye.URI.stringify(this.endpoint),e),this.batching?(this._outbox.push(t),e.channel===Faye.Channel.HANDSHAKE?this.addTimeout("publish",.01,this.flush,this):(e.channel===Faye.Channel.CONNECT&&(this._connectMessage=e),this.flushLargeBatch(),void this.addTimeout("publish",this.MAX_DELAY,this.flush,this))):this.request([t])},flush:function(){this.removeTimeout("publish"),this._outbox.length>1&&this._connectMessage&&(this._connectMessage.advice={timeout:0}),this.request(this._outbox),this._connectMessage=null,this._outbox=[]},flushLargeBatch:function(){var t=this.encode(this._outbox);if(!(t.length<this._client.maxRequestSize)){var e=this._outbox.pop();this.flush(),e&&this._outbox.push(e)}},receive:function(t,e){for(var n=t.length;n--;)t[n].setDeferredStatus("succeeded");e=[].concat(e),this.debug("Client ? received from ?: ?",this._client._clientId,Faye.URI.stringify(this.endpoint),e);for(var i=0,n=e.length;n>i;i++)this._client.receiveMessage(e[i])},handleError:function(t,e){for(var n=t.length;n--;)t[n].setDeferredStatus("failed",e)},_getCookies:function(){var t=this._client.cookies;return t?t.getCookies({domain:this.endpoint.hostname,path:this.endpoint.path,secure:"https:"===this.endpoint.protocol}).toValueString():""},_storeCookies:function(t){if(t&&this._client.cookies){t=[].concat(t);for(var e,n=0,i=t.length;i>n;n++)e=this._client.cookies.setCookie(t[n]),e=e[0]||e,e.domain=e.domain||this.endpoint.hostname}}}),{get:function(t,e,n,i,o){var r=t.endpoint;Faye.asyncEach(this._transports,function(s,a){var l=s[0],c=s[1],u=t.endpoints[l]||r;return Faye.indexOf(n,l)>=0?a():Faye.indexOf(e,l)<0?(c.isUsable(t,u,function(){}),a()):void c.isUsable(t,u,function(e){if(!e)return a();var n=c.hasOwnProperty("create")?c.create(t,u):new c(t,u);i.call(o,n)})},function(){throw Error("Could not find a usable connection type for "+Faye.URI.stringify(r))})},register:function(t,e){this._transports.push([t,e]),e.prototype.connectionType=t},_transports:[]}),Faye.extend(Faye.Transport.prototype,Faye.Logging),Faye.extend(Faye.Transport.prototype,Faye.Timeouts),Faye.Event={_registry:[],on:function(t,e,n,i){var o=function(){n.call(i)};t.addEventListener?t.addEventListener(e,o,!1):t.attachEvent("on"+e,o),this._registry.push({_element:t,_type:e,_callback:n,_context:i,_handler:o})},detach:function(t,e,n,i){for(var o,r=this._registry.length;r--;)o=this._registry[r],t&&t!==o._element||e&&e!==o._type||n&&n!==o._callback||i&&i!==o._context||(o._element.removeEventListener?o._element.removeEventListener(o._type,o._handler,!1):o._element.detachEvent("on"+o._type,o._handler),this._registry.splice(r,1),o=null)}},void 0!==Faye.ENV.onunload&&Faye.Event.on(Faye.ENV,"unload",Faye.Event.detach,Faye.Event),"object"!=typeof JSON&&(JSON={}),function(){function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,i,o,r,s,a=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?l+"":"null";case"boolean":case"null":return l+"";case"object":if(!l)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,n=0;r>n;n+=1)s[n]=str(n,l)||"null";return o=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,o}if(rep&&"object"==typeof rep)for(r=rep.length,n=0;r>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],o=str(i,l),o&&s.push(quote(i)+(gap?": ":":")+o));else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(o=str(i,l),o&&s.push(quote(i)+(gap?": ":":")+o));return o=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;Faye.stringify=function(t,e,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw Error("JSON.stringify");return str("",{"":t})},"function"!=typeof JSON.stringify&&(JSON.stringify=Faye.stringify),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,i,o=t[e];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(i=walk(o,n),void 0!==i?o[n]=i:delete o[n]);return reviver.call(t,e,o)}var j;if(text+="",cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),Faye.Transport.WebSocket=Faye.extend(Faye.Class(Faye.Transport,{UNCONNECTED:1,CONNECTING:2,CONNECTED:3,batching:!1,isUsable:function(t,e){this.callback(function(){t.call(e,!0)}),this.errback(function(){t.call(e,!1)}),this.connect()},request:function(t){this._pending=this._pending||new Faye.Set;for(var e=0,n=t.length;n>e;e++)this._pending.add(t[e]);this.callback(function(e){if(e){var n=Faye.map(t,function(t){return t.message});e.send(Faye.toJSON(n))}},this),this.connect()},connect:function(){if(!Faye.Transport.WebSocket._unloaded&&(this._state=this._state||this.UNCONNECTED,this._state===this.UNCONNECTED)){this._state=this.CONNECTING;var t=this._createSocket();if(!t)return this.setDeferredStatus("failed");var e=this;t.onopen=function(){t.headers&&e._storeCookies(t.headers["set-cookie"]),e._socket=t,e._state=e.CONNECTED,e._everConnected=!0,e._ping(),e.setDeferredStatus("succeeded",t)};var n=!1;t.onclose=t.onerror=function(){if(!n){n=!0;var i=e._state===e.CONNECTED;t.onopen=t.onclose=t.onerror=t.onmessage=null,delete e._socket,e._state=e.UNCONNECTED,e.removeTimeout("ping"),e.setDeferredStatus("unknown");var o=e._pending?e._pending.toArray():[];delete e._pending,i?e.handleError(o,!0):e._everConnected?e.handleError(o):e.setDeferredStatus("failed")}},t.onmessage=function(t){var n,i=JSON.parse(t.data),o=[];if(i){i=[].concat(i);for(var r=0,s=i.length;s>r;r++)void 0!==i[r].successful&&(n=e._pending.remove(i[r]),n&&o.push(n));e.receive(o,i)}}}},close:function(){this._socket&&this._socket.close()},_createSocket:function(){var t=Faye.Transport.WebSocket.getSocketUrl(this.endpoint),e={headers:Faye.copyObject(this._client.headers),ca:this._client.ca};return e.headers.Cookie=this._getCookies(),Faye.WebSocket?new Faye.WebSocket.Client(t,[],e):Faye.ENV.MozWebSocket?new MozWebSocket(t):Faye.ENV.WebSocket?new WebSocket(t):void 0},_ping:function(){this._socket&&(this._socket.send("[]"),this.addTimeout("ping",this._client._advice.timeout/2e3,this._ping,this))}}),{PROTOCOLS:{"http:":"ws:","https:":"wss:"},create:function(t,e){var n=t.transports.websocket=t.transports.websocket||{};return n[e.href]=n[e.href]||new this(t,e),n[e.href]},getSocketUrl:function(t){return t=Faye.copyObject(t),t.protocol=this.PROTOCOLS[t.protocol],Faye.URI.stringify(t)},isUsable:function(t,e,n,i){this.create(t,e).isUsable(n,i)}}),Faye.extend(Faye.Transport.WebSocket.prototype,Faye.Deferrable),Faye.Transport.register("websocket",Faye.Transport.WebSocket),Faye.Event&&Faye.Event.on(Faye.ENV,"beforeunload",function(){Faye.Transport.WebSocket._unloaded=!0}),Faye.Transport.EventSource=Faye.extend(Faye.Class(Faye.Transport,{initialize:function(t,e){if(Faye.Transport.prototype.initialize.call(this,t,e),!Faye.ENV.EventSource)return this.setDeferredStatus("failed");this._xhr=new Faye.Transport.XHR(t,e),e=Faye.copyObject(e),e.pathname+="/"+t._clientId;var n=new EventSource(Faye.URI.stringify(e)),i=this;n.onopen=function(){i._everConnected=!0,i.setDeferredStatus("succeeded")},n.onerror=function(){i._everConnected?i._client.messageError([]):(i.setDeferredStatus("failed"),n.close())},n.onmessage=function(t){i.receive([],JSON.parse(t.data))},this._socket=n},close:function(){this._socket&&(this._socket.onopen=this._socket.onerror=this._socket.onmessage=null,this._socket.close(),delete this._socket)},isUsable:function(t,e){this.callback(function(){t.call(e,!0)}),this.errback(function(){t.call(e,!1)})},encode:function(t){return this._xhr.encode(t)},request:function(t){this._xhr.request(t)}}),{isUsable:function(t,e,n,i){var o=t._clientId;return o?void Faye.Transport.XHR.isUsable(t,e,function(o){return o?void this.create(t,e).isUsable(n,i):n.call(i,!1)},this):n.call(i,!1)},create:function(t,e){var n=t.transports.eventsource=t.transports.eventsource||{},i=t._clientId;e=Faye.copyObject(e),e.pathname+="/"+(i||"");var o=Faye.URI.stringify(e);return n[o]=n[o]||new this(t,e),n[o]}}),Faye.extend(Faye.Transport.EventSource.prototype,Faye.Deferrable),Faye.Transport.register("eventsource",Faye.Transport.EventSource),Faye.Transport.XHR=Faye.extend(Faye.Class(Faye.Transport,{encode:function(t){var e=Faye.map(t,function(t){return t.message});return Faye.toJSON(e)},request:function(t){var e=this.endpoint.path,n=Faye.ENV.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest,i=this;n.open("POST",e,!0),n.setRequestHeader("Content-Type","application/json"),n.setRequestHeader("Pragma","no-cache"),n.setRequestHeader("X-Requested-With","XMLHttpRequest");
var o=this._client.headers;for(var r in o)o.hasOwnProperty(r)&&n.setRequestHeader(r,o[r]);var s=function(){n.abort()};Faye.Event.on(Faye.ENV,"beforeunload",s),n.onreadystatechange=function(){if(n&&4===n.readyState){var e=null,o=n.status,r=n.responseText,a=o>=200&&300>o||304===o||1223===o;if(Faye.Event.detach(Faye.ENV,"beforeunload",s),n.onreadystatechange=function(){},n=null,!a)return i.handleError(t);try{e=JSON.parse(r)}catch(l){}e?i.receive(t,e):i.handleError(t)}},n.send(this.encode(t))}}),{isUsable:function(t,e,n,i){n.call(i,Faye.URI.isSameOrigin(e))}}),Faye.Transport.register("long-polling",Faye.Transport.XHR),Faye.Transport.CORS=Faye.extend(Faye.Class(Faye.Transport,{encode:function(t){var e=Faye.map(t,function(t){return t.message});return"message="+encodeURIComponent(Faye.toJSON(e))},request:function(t){var e,n=Faye.ENV.XDomainRequest?XDomainRequest:XMLHttpRequest,i=new n,o=this._client.headers,r=this;if(i.open("POST",Faye.URI.stringify(this.endpoint),!0),i.setRequestHeader){i.setRequestHeader("Pragma","no-cache");for(e in o)o.hasOwnProperty(e)&&i.setRequestHeader(e,o[e])}var s=function(){return i?(i.onload=i.onerror=i.ontimeout=i.onprogress=null,void(i=null)):!1};i.onload=function(){var e=null;try{e=JSON.parse(i.responseText)}catch(n){}s(),e?r.receive(t,e):r.handleError(t)},i.onerror=i.ontimeout=function(){s(),r.handleError(t)},i.onprogress=function(){},i.send(this.encode(t))}}),{isUsable:function(t,e,n,i){if(Faye.URI.isSameOrigin(e))return n.call(i,!1);if(Faye.ENV.XDomainRequest)return n.call(i,e.protocol===Faye.ENV.location.protocol);if(Faye.ENV.XMLHttpRequest){var o=new Faye.ENV.XMLHttpRequest;return n.call(i,void 0!==o.withCredentials)}return n.call(i,!1)}}),Faye.Transport.register("cross-origin-long-polling",Faye.Transport.CORS),Faye.Transport.JSONP=Faye.extend(Faye.Class(Faye.Transport,{encode:function(t){var e=Faye.map(t,function(t){return t.message}),n=Faye.copyObject(this.endpoint);return n.query.message=Faye.toJSON(e),n.query.jsonp="__jsonp"+Faye.Transport.JSONP._cbCount+"__",Faye.URI.stringify(n)},request:function(t){var e=Faye.map(t,function(t){return t.message}),n=document.getElementsByTagName("head")[0],i=document.createElement("script"),o=Faye.Transport.JSONP.getCallbackName(),r=Faye.copyObject(this.endpoint),s=this;r.query.message=Faye.toJSON(e),r.query.jsonp=o,Faye.ENV[o]=function(e){if(!Faye.ENV[o])return!1;Faye.ENV[o]=void 0;try{delete Faye.ENV[o]}catch(n){}i.parentNode.removeChild(i),s.receive(t,e)},i.type="text/javascript",i.src=Faye.URI.stringify(r),n.appendChild(i)}}),{_cbCount:0,getCallbackName:function(){return this._cbCount+=1,"__jsonp"+this._cbCount+"__"},isUsable:function(t,e,n,i){n.call(i,!0)}}),Faye.Transport.register("callback-polling",Faye.Transport.JSONP)}()}(this),function(){window.client=new Faye.Client("/faye"),client.addExtension({outgoing:function(t,e){return t.ext=t.ext||{},t.ext.csrfToken=$("meta[name=csrf-token]").attr("content"),e(t)}}),jQuery(function(){try{client.unsubscribe($("#chats").data("query"))}catch(t){"undefined"!=typeof console&&null!==console&&console.log("Can't unsubscribe.")}return client.subscribe($("#chats").data("query"),function(t){return t.message&&$("#chats").find(".media-list").append(t.message),$("#chats").animate({scrollTop:$("#chats").prop("scrollHeight")},500)})})}.call(this),function(){var t,e,n,i,o,r,s,a,l,c,u,d,h,f,p,m,g,y,v,b,w,C,x,E,N,T,_,S,k,A,R,$,D,O,L,I,F,H,P,B,j,M,q,U,W,z,V,X,G,K,Y,J,Q,Z,te,ee,ne=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},ie={}.hasOwnProperty,oe=function(t,e){function n(){this.constructor=t}for(var i in e)ie.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},re=[].slice,se=function(t,e){return function(){return t.apply(e,arguments)}};O={},h=10,Y=!1,P=null,v=null,$=null,j=null,te=null,i={BEFORE_CHANGE:"page:before-change",FETCH:"page:fetch",RECEIVE:"page:receive",CHANGE:"page:change",UPDATE:"page:update",LOAD:"page:load",RESTORE:"page:restore",BEFORE_UNLOAD:"page:before-unload",EXPIRE:"page:expire"},E=function(t){var e;return t=new n(t),z(),d(),null!=P&&P.start(),Y&&(e=J(t.absolute))?(N(e),T(t,null,!1)):T(t,G)},J=function(t){var e;return e=O[t],e&&!e.transitionCacheDisabled?e:void 0},w=function(t){return null==t&&(t=!0),Y=t},b=function(t){return null==t&&(t=!0),c?t?null!=P?P:P=new r("html"):(null!=P&&P.uninstall(),P=null):void 0},T=function(t,e,n){return null==n&&(n=!0),Q(i.FETCH,{url:t.absolute}),null!=te&&te.abort(),te=new XMLHttpRequest,te.open("GET",t.withoutHashForIE10compatibility(),!0),te.setRequestHeader("Accept","text/html, application/xhtml+xml, application/xml"),te.setRequestHeader("X-XHR-Referer",j),te.onload=function(){var n;return Q(i.RECEIVE,{url:t.absolute}),(n=H())?(M(t),q(),f.apply(null,x(n)),D(),"function"==typeof e&&e(),Q(i.LOAD)):document.location.href=y()||t.absolute},P&&n&&(te.onprogress=function(){return function(t){var e;return e=t.lengthComputable?t.loaded/t.total*100:P.value+(100-P.value)/10,P.advanceTo(e)}}(this)),te.onloadend=function(){return te=null},te.onerror=function(){return document.location.href=t.absolute},te.send()},N=function(t){return null!=te&&te.abort(),f(t.title,t.body),B(t),Q(i.RESTORE)},d=function(){var t;return t=new n(v.url),O[t.absolute]={url:t.relative,body:document.body,title:document.title,positionY:window.pageYOffset,positionX:window.pageXOffset,cachedAt:(new Date).getTime(),transitionCacheDisabled:null!=document.querySelector("[data-no-transition-cache]")},m(h)},I=function(t){return null==t&&(t=h),/^[\d]+$/.test(t)?h=parseInt(t):void 0},m=function(t){var e,n,o,r,s,a;for(o=Object.keys(O),e=o.map(function(t){return O[t].cachedAt}).sort(function(t,e){return e-t}),a=[],r=0,s=o.length;s>r;r++)n=o[r],O[n].cachedAt<=e[t]&&(Q(i.EXPIRE,O[n]),a.push(delete O[n]));return a},f=function(e,n,o,r){return Q(i.BEFORE_UNLOAD),document.title=e,document.documentElement.replaceChild(n,document.body),null!=o&&t.update(o),K(),r&&C(),v=window.history.state,null!=P&&P.done(),Q(i.CHANGE),Q(i.UPDATE)},C=function(){var t,e,n,i,o,r,s,a,l,c,u,d;for(r=Array.prototype.slice.call(document.body.querySelectorAll('script:not([data-turbolinks-eval="false"])')),s=0,l=r.length;l>s;s++)if(o=r[s],""===(u=o.type)||"text/javascript"===u){for(e=document.createElement("script"),d=o.attributes,a=0,c=d.length;c>a;a++)t=d[a],e.setAttribute(t.name,t.value);o.hasAttribute("async")||(e.async=!1),e.appendChild(document.createTextNode(o.innerHTML)),i=o.parentNode,n=o.nextSibling,i.removeChild(o),i.insertBefore(e,n)}},V=function(t){return t.innerHTML=t.innerHTML.replace(/<noscript[\S\s]*?<\/noscript>/gi,""),t},K=function(){var t,e;return t=(e=document.querySelectorAll("input[autofocus], textarea[autofocus]"))[e.length-1],t&&document.activeElement!==t?t.focus():void 0},M=function(t){return(t=new n(t)).absolute!==j?window.history.pushState({turbolinks:!0,url:t.absolute},"",t.absolute):void 0},q=function(){var t,e;return(t=te.getResponseHeader("X-XHR-Redirected-To"))?(t=new n(t),e=t.hasNoHash()?document.location.hash:"",window.history.replaceState(window.history.state,"",t.href+e)):void 0},y=function(){var t;return null!=(t=te.getResponseHeader("Location"))&&new n(t).crossOrigin()?t:void 0},z=function(){return j=document.location.href},W=function(){return window.history.replaceState({turbolinks:!0,url:document.location.href},"",document.location.href)},U=function(){return v=window.history.state},D=function(){var t;return navigator.userAgent.match(/Firefox/)&&!(t=new n).hasNoHash()?(window.history.replaceState(v,"",t.withoutHash()),document.location.hash=t.hash):void 0},B=function(t){return window.scrollTo(t.positionX,t.positionY)},G=function(){return document.location.hash?document.location.href=document.location.href:window.scrollTo(0,0)},p=function(t){var e,n,i;if(null==t||"object"!=typeof t)return t;e=new t.constructor;for(n in t)i=t[n],e[n]=p(i);return e},F=function(t){var e,n;return e=(null!=(n=document.cookie.match(new RegExp(t+"=(\\w+)")))?n[1].toUpperCase():void 0)||"",document.cookie=t+"=; expires=Thu, 01-Jan-70 00:00:01 GMT; path=/",e},Q=function(t,e){var n;return"undefined"!=typeof Prototype&&Event.fire(document,t,e,!0),n=document.createEvent("Events"),e&&(n.data=e),n.initEvent(t,!0,!0),document.dispatchEvent(n)},L=function(t){return!Q(i.BEFORE_CHANGE,{url:t})},H=function(){var t,e,n,i,o,r;return e=function(){var t;return 400<=(t=te.status)&&600>t},r=function(){var t;return null!=(t=te.getResponseHeader("Content-Type"))&&t.match(/^(?:text\/html|application\/xhtml\+xml|application\/xml)(?:;|$)/)},i=function(t){var e,n,i,o,r;for(o=t.querySelector("head").childNodes,r=[],n=0,i=o.length;i>n;n++)e=o[n],null!=("function"==typeof e.getAttribute?e.getAttribute("data-turbolinks-track"):void 0)&&r.push(e.getAttribute("src")||e.getAttribute("href"));return r},t=function(t){var e;return $||($=i(document)),e=i(t),e.length!==$.length||o(e,$).length!==$.length},o=function(t,e){var n,i,o,r,s;for(t.length>e.length&&(r=[e,t],t=r[0],e=r[1]),s=[],i=0,o=t.length;o>i;i++)n=t[i],ne.call(e,n)>=0&&s.push(n);return s},!e()&&r()&&(n=g(te.responseText),n&&!t(n))?n:void 0},x=function(e){var n;return n=e.querySelector("title"),[null!=n?n.textContent:void 0,V(e.querySelector("body")),t.get(e).token,"runScripts"]},t={get:function(t){var e;return null==t&&(t=document),{node:e=t.querySelector('meta[name="csrf-token"]'),token:null!=e&&"function"==typeof e.getAttribute?e.getAttribute("content"):void 0}},update:function(t){var e;return e=this.get(),null!=e.token&&null!=t&&e.token!==t?e.node.setAttribute("content",t):void 0}},g=function(t){var e;return e=document.documentElement.cloneNode(),e.innerHTML=t,e.head=e.querySelector("head"),e.body=e.querySelector("body"),e},n=function(){function t(e){return this.original=null!=e?e:document.location.href,this.original.constructor===t?this.original:void this._parse()}return t.prototype.withoutHash=function(){return this.href.replace(this.hash,"").replace("#","")},t.prototype.withoutHashForIE10compatibility=function(){return this.withoutHash()},t.prototype.hasNoHash=function(){return 0===this.hash.length},t.prototype.crossOrigin=function(){return this.origin!==(new t).origin},t.prototype._parse=function(){var t;return(null!=this.link?this.link:this.link=document.createElement("a")).href=this.original,t=this.link,this.href=t.href,this.protocol=t.protocol,this.host=t.host,this.hostname=t.hostname,this.port=t.port,this.pathname=t.pathname,this.search=t.search,this.hash=t.hash,this.origin=[this.protocol,"//",this.hostname].join(""),0!==this.port.length&&(this.origin+=":"+this.port),this.relative=[this.pathname,this.search,this.hash].join(""),this.absolute=this.href},t}(),o=function(t){function e(t){return this.link=t,this.link.constructor===e?this.link:(this.original=this.link.href,this.originalElement=this.link,this.link=this.link.cloneNode(!1),void e.__super__.constructor.apply(this,arguments))}return oe(e,t),e.HTML_EXTENSIONS=["html"],e.allowExtensions=function(){var t,n,i,o;for(n=1<=arguments.length?re.call(arguments,0):[],i=0,o=n.length;o>i;i++)t=n[i],e.HTML_EXTENSIONS.push(t);return e.HTML_EXTENSIONS},e.prototype.shouldIgnore=function(){return this.crossOrigin()||this._anchored()||this._nonHtml()||this._optOut()||this._target()},e.prototype._anchored=function(){return(this.hash.length>0||"#"===this.href.charAt(this.href.length-1))&&this.withoutHash()===(new n).withoutHash()},e.prototype._nonHtml=function(){return this.pathname.match(/\.[a-z]+$/g)&&!this.pathname.match(new RegExp("\\.(?:"+e.HTML_EXTENSIONS.join("|")+")?$","g"))},e.prototype._optOut=function(){var t,e;for(e=this.originalElement;!t&&e!==document;)t=null!=e.getAttribute("data-no-turbolink"),e=e.parentNode;return t},e.prototype._target=function(){return 0!==this.link.target.length},e}(n),e=function(){function t(t){this.event=t,this.event.defaultPrevented||(this._extractLink(),this._validForTurbolinks()&&(L(this.link.absolute)||Z(this.link.href),this.event.preventDefault()))}return t.installHandlerLast=function(e){return e.defaultPrevented?void 0:(document.removeEventListener("click",t.handle,!1),document.addEventListener("click",t.handle,!1))},t.handle=function(e){return new t(e)},t.prototype._extractLink=function(){var t;for(t=this.event.target;t.parentNode&&"A"!==t.nodeName;)t=t.parentNode;return"A"===t.nodeName&&0!==t.href.length?this.link=new o(t):void 0},t.prototype._validForTurbolinks=function(){return null!=this.link&&!(this.link.shouldIgnore()||this._nonStandardClick())},t.prototype._nonStandardClick=function(){return this.event.which>1||this.event.metaKey||this.event.ctrlKey||this.event.shiftKey||this.event.altKey},t}(),r=function(){function t(t){this.elementSelector=t,this._trickle=se(this._trickle,this),this.value=0,this.content="",this.speed=300,this.opacity=.99,this.install()}var e;return e="turbolinks-progress-bar",t.prototype.install=function(){return this.element=document.querySelector(this.elementSelector),this.element.classList.add(e),this.styleElement=document.createElement("style"),document.head.appendChild(this.styleElement),this._updateStyle()},t.prototype.uninstall=function(){return this.element.classList.remove(e),document.head.removeChild(this.styleElement)},t.prototype.start=function(){return this.advanceTo(5)},t.prototype.advanceTo=function(t){var e;if(t>(e=this.value)&&100>=e){if(this.value=t,this._updateStyle(),100===this.value)return this._stopTrickle();if(this.value>0)return this._startTrickle()}},t.prototype.done=function(){return this.value>0?(this.advanceTo(100),this._reset()):void 0},t.prototype._reset=function(){var t;return t=this.opacity,setTimeout(function(t){return function(){return t.opacity=0,t._updateStyle()}}(this),this.speed/2),setTimeout(function(e){return function(){return e.value=0,e.opacity=t,e._withSpeed(0,function(){return e._updateStyle(!0)})}}(this),this.speed)},t.prototype._startTrickle=function(){return this.trickling?void 0:(this.trickling=!0,setTimeout(this._trickle,this.speed))},t.prototype._stopTrickle=function(){return delete this.trickling},t.prototype._trickle=function(){return this.trickling?(this.advanceTo(this.value+Math.random()/2),setTimeout(this._trickle,this.speed)):void 0},t.prototype._withSpeed=function(t,e){var n,i;return n=this.speed,this.speed=t,i=e(),this.speed=n,i},t.prototype._updateStyle=function(t){return null==t&&(t=!1),t&&this._changeContentToForceRepaint(),this.styleElement.textContent=this._createCSSRule()},t.prototype._changeContentToForceRepaint=function(){return this.content=""===this.content?" ":""},t.prototype._createCSSRule=function(){return""+this.elementSelector+"."+e+"::before {\n  content: '"+this.content+"';\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 2000;\n  background-color: #0076ff;\n  height: 3px;\n  opacity: "+this.opacity+";\n  width: "+this.value+"%;\n  transition: width "+this.speed+"ms ease-out, opacity "+this.speed/2+"ms ease-in;\n  transform: translate3d(0,0,0);\n}"},t}(),u=function(t){return setTimeout(t,500)},k=function(){return document.addEventListener("DOMContentLoaded",function(){return Q(i.CHANGE),Q(i.UPDATE)},!0)},R=function(){return"undefined"!=typeof jQuery?jQuery(document).on("ajaxSuccess",function(t,e){return jQuery.trim(e.responseText)?Q(i.UPDATE):void 0}):void 0},A=function(t){var e,i;return(null!=(i=t.state)?i.turbolinks:void 0)?(e=O[new n(t.state.url).absolute])?(d(),N(e)):Z(t.target.location.href):void 0},S=function(){return W(),U(),document.addEventListener("click",e.installHandlerLast,!0),window.addEventListener("hashchange",function(){return W(),U()},!1),u(function(){return window.addEventListener("popstate",A,!1)})},_=void 0!==window.history.state||navigator.userAgent.match(/Firefox\/2[6|7]/),l=window.history&&window.history.pushState&&window.history.replaceState&&_,s=!navigator.userAgent.match(/CriOS\//),X="GET"===(ee=F("request_method"))||""===ee,c=l&&s&&X,a=document.addEventListener&&document.createEvent,a&&(k(),R()),c?(Z=E,S()):Z=function(t){return document.location.href=t},this.Turbolinks={visit:Z,pagesCached:I,enableTransitionCache:w,enableProgressBar:b,allowLinkExtensions:o.allowExtensions,supported:c,EVENTS:p(i)}}.call(this),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]}}t.fn.emulateTransitionEnd=function(e){var n=!1,i=this;t(this).one(t.support.transition.end,function(){n=!0});var o=function(){n||t(i).trigger(t.support.transition.end)};return setTimeout(o,e),this},t(function(){t.support.transition=e()})}(jQuery),+function(t){"use strict";var e='[data-dismiss="alert"]',n=function(n){t(n).on("click",e,this.close)};n.prototype.close=function(e){function n(){r.trigger("closed.bs.alert").remove()}var i=t(this),o=i.attr("data-target");o||(o=i.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,""));var r=t(o);e&&e.preventDefault(),r.length||(r=i.hasClass("alert")?i:i.parent()),r.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(r.removeClass("in"),t.support.transition&&r.hasClass("fade")?r.one(t.support.transition.end,n).emulateTransitionEnd(150):n())};var i=t.fn.alert;t.fn.alert=function(e){return this.each(function(){var i=t(this),o=i.data("bs.alert");o||i.data("bs.alert",o=new n(this)),"string"==typeof e&&o[e].call(i)})},t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=i,this},t(document).on("click.bs.alert.data-api",e,n.prototype.close)}(jQuery),+function(t){"use strict";var e=function(n,i){this.$element=t(n),this.options=t.extend({},e.DEFAULTS,i)};e.DEFAULTS={loadingText:"loading..."},e.prototype.setState=function(t){var e="disabled",n=this.$element,i=n.is("input")?"val":"html",o=n.data();t+="Text",o.resetText||n.data("resetText",n[i]()),n[i](o[t]||this.options[t]),setTimeout(function(){"loadingText"==t?n.addClass(e).attr(e,e):n.removeClass(e).removeAttr(e)},0)},e.prototype.toggle=function(){var t=this.$element.closest('[data-toggle="buttons"]'),e=!0;if(t.length){var n=this.$element.find("input");"radio"===n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?e=!1:t.find(".active").removeClass("active")),e&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}e&&this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=function(n){return this.each(function(){var i=t(this),o=i.data("bs.button"),r="object"==typeof n&&n;o||i.data("bs.button",o=new e(this,r)),"toggle"==n?o.toggle():n&&o.setState(n)})},t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api","[data-toggle^=button]",function(e){var n=t(e.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle"),e.preventDefault()})}(jQuery),+function(t){"use strict";var e=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",t.proxy(this.pause,this)).on("mouseleave",t.proxy(this.cycle,this))};e.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},e.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},e.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},e.prototype.to=function(e){var n=this,i=this.getActiveIndex();return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){n.to(e)}):i==e?this.pause().cycle():this.slide(e>i?"next":"prev",t(this.$items[e]))},e.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition.end&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},e.prototype.next=function(){return this.sliding?void 0:this.slide("next")},e.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},e.prototype.slide=function(e,n){var i=this.$element.find(".item.active"),o=n||i[e](),r=this.interval,s="next"==e?"left":"right",a="next"==e?"first":"last",l=this;if(!o.length){if(!this.options.wrap)return;o=this.$element.find(".item")[a]()}this.sliding=!0,r&&this.pause();var c=t.Event("slide.bs.carousel",{relatedTarget:o[0],direction:s});if(!o.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var e=t(l.$indicators.children()[l.getActiveIndex()]);e&&e.addClass("active")})),t.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(c),c.isDefaultPrevented())return;o.addClass(e),o[0].offsetWidth,i.addClass(s),o.addClass(s),i.one(t.support.transition.end,function(){o.removeClass([e,s].join(" ")).addClass("active"),i.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(600)}else{if(this.$element.trigger(c),c.isDefaultPrevented())return;i.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")}return r&&this.cycle(),this}};var n=t.fn.carousel;t.fn.carousel=function(n){return this.each(function(){var i=t(this),o=i.data("bs.carousel"),r=t.extend({},e.DEFAULTS,i.data(),"object"==typeof n&&n),s="string"==typeof n?n:r.slide;o||i.data("bs.carousel",o=new e(this,r)),"number"==typeof n?o.to(n):s?o[s]():r.interval&&o.pause().cycle()})},t.fn.carousel.Constructor=e,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this},t(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(e){var n,i=t(this),o=t(i.attr("data-target")||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),r=t.extend({},o.data(),i.data()),s=i.attr("data-slide-to");s&&(r.interval=!1),o.carousel(r),(s=i.attr("data-slide-to"))&&o.data("bs.carousel").to(s),e.preventDefault()}),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var e=t(this);e.carousel(e.data())})})}(jQuery),+function(t){"use strict";var e=function(n,i){this.$element=t(n),this.options=t.extend({},e.DEFAULTS,i),this.transitioning=null,this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};e.DEFAULTS={toggle:!0},e.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},e.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e=t.Event("show.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var i=n.data("bs.collapse");if(i&&i.transitioning)return;n.collapse("hide"),i||n.data("bs.collapse",null)}var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("in")[o]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return r.call(this);var s=t.camelCase(["scroll",o].join("-"));this.$element.one(t.support.transition.end,t.proxy(r,this)).emulateTransitionEnd(350)[o](this.$element[0][s])}}},e.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return t.support.transition?void this.$element[n](0).one(t.support.transition.end,t.proxy(i,this)).emulateTransitionEnd(350):i.call(this)}}},e.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=t.fn.collapse;t.fn.collapse=function(n){return this.each(function(){var i=t(this),o=i.data("bs.collapse"),r=t.extend({},e.DEFAULTS,i.data(),"object"==typeof n&&n);o||i.data("bs.collapse",o=new e(this,r)),"string"==typeof n&&o[n]()})},t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=n,this},t(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(e){var n,i=t(this),o=i.attr("data-target")||e.preventDefault()||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),r=t(o),s=r.data("bs.collapse"),a=s?"toggle":i.data(),l=i.attr("data-parent"),c=l&&t(l);s&&s.transitioning||(c&&c.find('[data-toggle=collapse][data-parent="'+l+'"]').not(i).addClass("collapsed"),i[r.hasClass("in")?"addClass":"removeClass"]("collapsed")),r.collapse(a)})}(jQuery),+function(t){"use strict";function e(){t(i).remove(),t(o).each(function(e){var i=n(t(this));i.hasClass("open")&&(i.trigger(e=t.Event("hide.bs.dropdown")),e.isDefaultPrevented()||i.removeClass("open").trigger("hidden.bs.dropdown"))})}function n(e){var n=e.attr("data-target");n||(n=e.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&t(n);return i&&i.length?i:e.parent()}var i=".dropdown-backdrop",o="[data-toggle=dropdown]",r=function(e){t(e).on("click.bs.dropdown",this.toggle)};r.prototype.toggle=function(i){var o=t(this);if(!o.is(".disabled, :disabled")){var r=n(o),s=r.hasClass("open");if(e(),!s){if("ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e),r.trigger(i=t.Event("show.bs.dropdown")),i.isDefaultPrevented())return;r.toggleClass("open").trigger("shown.bs.dropdown"),o.focus()}return!1}},r.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var i=t(this);if(e.preventDefault(),e.stopPropagation(),!i.is(".disabled, :disabled")){var r=n(i),s=r.hasClass("open");if(!s||s&&27==e.keyCode)return 27==e.which&&r.find(o).focus(),i.click();var a=t("[role=menu] li:not(.divider):visible a",r);if(a.length){var l=a.index(a.filter(":focus"));38==e.keyCode&&l>0&&l--,40==e.keyCode&&l<a.length-1&&l++,~l||(l=0),a.eq(l).focus()}}}};var s=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var n=t(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new r(this)),"string"==typeof e&&i[e].call(n)})},t.fn.dropdown.Constructor=r,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=s,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",o,r.prototype.toggle).on("keydown.bs.dropdown.data-api",o+", [role=menu]",r.prototype.keydown)}(jQuery),+function(t){"use strict";var e=function(e,n){this.options=n,this.$element=t(e),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.load(this.options.remote)};e.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},e.prototype.toggle=function(t){return this[this.isShown?"hide":"show"](t)},e.prototype.show=function(e){var n=this,i=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var i=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(document.body),n.$element.show(),i&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var o=t.Event("shown.bs.modal",{relatedTarget:e});i?n.$element.find(".modal-dialog").one(t.support.transition.end,function(){n.$element.focus().trigger(o)}).emulateTransitionEnd(300):n.$element.focus().trigger(o)}))},e.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one(t.support.transition.end,t.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},e.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.focus()},this))},e.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},e.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.removeBackdrop(),t.$element.trigger("hidden.bs.modal")})},e.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},e.prototype.backdrop=function(e){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=t.support.transition&&n;if(this.$backdrop=t('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$element.on("click.dismiss.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;i?this.$backdrop.one(t.support.transition.end,e).emulateTransitionEnd(150):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t.support.transition.end,e).emulateTransitionEnd(150):e()):e&&e()};var n=t.fn.modal;t.fn.modal=function(n,i){return this.each(function(){var o=t(this),r=o.data("bs.modal"),s=t.extend({},e.DEFAULTS,o.data(),"object"==typeof n&&n);r||o.data("bs.modal",r=new e(this,s)),"string"==typeof n?r[n](i):s.show&&r.show(i)})},t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var n=t(this),i=n.attr("href"),o=t(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),r=o.data("modal")?"toggle":t.extend({remote:!/#/.test(i)&&i},o.data(),n.data());e.preventDefault(),o.modal(r,this).one("hide",function(){n.is(":visible")&&n.focus()})}),t(document).on("show.bs.modal",".modal",function(){t(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){t(document.body).removeClass("modal-open")})}(jQuery),+function(t){"use strict";var e=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};e.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.prototype.init=function(e,n,i){this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(i);for(var o=this.options.trigger.split(" "),r=o.length;r--;){var s=o[r];if("click"==s)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focus",l="hover"==s?"mouseleave":"blur";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},e.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,i){n[t]!=i&&(e[t]=i)}),e},e.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show()},e.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()
},e.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(e),e.isDefaultPrevented())return;var n=this.tip();this.setContent(),this.options.animation&&n.addClass("fade");var i="function"==typeof this.options.placement?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,o=/\s?auto?\s?/i,r=o.test(i);r&&(i=i.replace(o,"")||"top"),n.detach().css({top:0,left:0,display:"block"}).addClass(i),this.options.container?n.appendTo(this.options.container):n.insertAfter(this.$element);var s=this.getPosition(),a=n[0].offsetWidth,l=n[0].offsetHeight;if(r){var c=this.$element.parent(),u=i,d=document.documentElement.scrollTop||document.body.scrollTop,h="body"==this.options.container?window.innerWidth:c.outerWidth(),f="body"==this.options.container?window.innerHeight:c.outerHeight(),p="body"==this.options.container?0:c.offset().left;i="bottom"==i&&s.top+s.height+l-d>f?"top":"top"==i&&s.top-d-l<0?"bottom":"right"==i&&s.right+a>h?"left":"left"==i&&s.left-a<p?"right":i,n.removeClass(u).addClass(i)}var m=this.getCalculatedOffset(i,s,a,l);this.applyPlacement(m,i),this.$element.trigger("shown.bs."+this.type)}},e.prototype.applyPlacement=function(t,e){var n,i=this.tip(),o=i[0].offsetWidth,r=i[0].offsetHeight,s=parseInt(i.css("margin-top"),10),a=parseInt(i.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(a)&&(a=0),t.top=t.top+s,t.left=t.left+a,i.offset(t).addClass("in");var l=i[0].offsetWidth,c=i[0].offsetHeight;if("top"==e&&c!=r&&(n=!0,t.top=t.top+r-c),/bottom|top/.test(e)){var u=0;t.left<0&&(u=-2*t.left,t.left=0,i.offset(t),l=i[0].offsetWidth,c=i[0].offsetHeight),this.replaceArrow(u-o+l,l,"left")}else this.replaceArrow(c-r,c,"top");n&&i.offset(t)},e.prototype.replaceArrow=function(t,e,n){this.arrow().css(n,t?50*(1-t/e)+"%":"")},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},e.prototype.hide=function(){function e(){"in"!=n.hoverState&&i.detach()}var n=this,i=this.tip(),o=t.Event("hide.bs."+this.type);return this.$element.trigger(o),o.isDefaultPrevented()?void 0:(i.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?i.one(t.support.transition.end,e).emulateTransitionEnd(150):e(),this.$element.trigger("hidden.bs."+this.type),this)},e.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},e.prototype.hasContent=function(){return this.getTitle()},e.prototype.getPosition=function(){var e=this.$element[0];return t.extend({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},this.$element.offset())},e.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},e.prototype.getTitle=function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},e.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},e.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.toggleEnabled=function(){this.enabled=!this.enabled},e.prototype.toggle=function(e){var n=e?t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;n.tip().hasClass("in")?n.leave(n):n.enter(n)},e.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=t.fn.tooltip;t.fn.tooltip=function(n){return this.each(function(){var i=t(this),o=i.data("bs.tooltip"),r="object"==typeof n&&n;o||i.data("bs.tooltip",o=new e(this,r)),"string"==typeof n&&o[n]()})},t.fn.tooltip.Constructor=e,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(jQuery),+function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");e.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),e.prototype.constructor=e,e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content")[this.options.html?"html":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},e.prototype.hasContent=function(){return this.getTitle()||this.getContent()},e.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},e.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var n=t.fn.popover;t.fn.popover=function(n){return this.each(function(){var i=t(this),o=i.data("bs.popover"),r="object"==typeof n&&n;o||i.data("bs.popover",o=new e(this,r)),"string"==typeof n&&o[n]()})},t.fn.popover.Constructor=e,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery),+function(t){"use strict";function e(n,i){var o,r=t.proxy(this.process,this);this.$element=t(t(n).is("body")?window:n),this.$body=t("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",r),this.options=t.extend({},e.DEFAULTS,i),this.selector=(this.options.target||(o=t(n).attr("href"))&&o.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=t([]),this.targets=t([]),this.activeTarget=null,this.refresh(),this.process()}e.DEFAULTS={offset:10},e.prototype.refresh=function(){var e=this.$element[0]==window?"offset":"position";this.offsets=t([]),this.targets=t([]);{var n=this;this.$body.find(this.selector).map(function(){var i=t(this),o=i.data("target")||i.attr("href"),r=/^#\w/.test(o)&&t(o);return r&&r.length&&[[r[e]().top+(!t.isWindow(n.$scrollElement.get(0))&&n.$scrollElement.scrollTop()),o]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})}},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,i=n-this.$scrollElement.height(),o=this.offsets,r=this.targets,s=this.activeTarget;if(e>=i)return s!=(t=r.last()[0])&&this.activate(t);for(t=o.length;t--;)s!=r[t]&&e>=o[t]&&(!o[t+1]||e<=o[t+1])&&this.activate(r[t])},e.prototype.activate=function(e){this.activeTarget=e,t(this.selector).parents(".active").removeClass("active");var n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',i=t(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")};var n=t.fn.scrollspy;t.fn.scrollspy=function(n){return this.each(function(){var i=t(this),o=i.data("bs.scrollspy"),r="object"==typeof n&&n;o||i.data("bs.scrollspy",o=new e(this,r)),"string"==typeof n&&o[n]()})},t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);e.scrollspy(e.data())})})}(jQuery),+function(t){"use strict";var e=function(e){this.element=t(e)};e.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),i=e.data("target");if(i||(i=e.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var o=n.find(".active:last a")[0],r=t.Event("show.bs.tab",{relatedTarget:o});if(e.trigger(r),!r.isDefaultPrevented()){var s=t(i);this.activate(e.parent("li"),n),this.activate(s,s.parent(),function(){e.trigger({type:"shown.bs.tab",relatedTarget:o})})}}},e.prototype.activate=function(e,n,i){function o(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),s?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),i&&i()}var r=n.find("> .active"),s=i&&t.support.transition&&r.hasClass("fade");s?r.one(t.support.transition.end,o).emulateTransitionEnd(150):o(),r.removeClass("in")};var n=t.fn.tab;t.fn.tab=function(n){return this.each(function(){var i=t(this),o=i.data("bs.tab");o||i.data("bs.tab",o=new e(this)),"string"==typeof n&&o[n]()})},t.fn.tab.Constructor=e,t.fn.tab.noConflict=function(){return t.fn.tab=n,this},t(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),t(this).tab("show")})}(jQuery),+function(t){"use strict";var e=function(n,i){this.options=t.extend({},e.DEFAULTS,i),this.$window=t(window).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(n),this.affixed=this.unpin=null,this.checkPosition()};e.RESET="affix affix-top affix-bottom",e.DEFAULTS={offset:0},e.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var n=t(document).height(),i=this.$window.scrollTop(),o=this.$element.offset(),r=this.options.offset,s=r.top,a=r.bottom;"object"!=typeof r&&(a=s=r),"function"==typeof s&&(s=r.top()),"function"==typeof a&&(a=r.bottom());var l=null!=this.unpin&&i+this.unpin<=o.top?!1:null!=a&&o.top+this.$element.height()>=n-a?"bottom":null!=s&&s>=i?"top":!1;this.affixed!==l&&(this.unpin&&this.$element.css("top",""),this.affixed=l,this.unpin="bottom"==l?o.top-i:null,this.$element.removeClass(e.RESET).addClass("affix"+(l?"-"+l:"")),"bottom"==l&&this.$element.offset({top:document.body.offsetHeight-a-this.$element.height()}))}};var n=t.fn.affix;t.fn.affix=function(n){return this.each(function(){var i=t(this),o=i.data("bs.affix"),r="object"==typeof n&&n;o||i.data("bs.affix",o=new e(this,r)),"string"==typeof n&&o[n]()})},t.fn.affix.Constructor=e,t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var e=t(this),n=e.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),e.affix(n)})})}(jQuery),function(){}.call(this),function(){}.call(this),function(){$(function(){return $("a").bind("ajax:error",function(t,e){return 401===e.status?window.location.replace(this):void 0})})}.call(this),$(document).ready(function(){$("a.showanscomments").click(function(){$(this).text(),"Show Answer Comments"==$(this).text()?($(this).siblings($("div.media-body.answercomments")).show(),$(this).text("Hide Answer Comments")):($(this).siblings("div.answercomments").hide(),$(this).text("Show Answer Comments"))})}),$(document).ready(function(){$("#newanswer").click(function(){$("#answerform").show(),$(this).hide()})}),$(document).ready(function(){$("#cancelanswerform").click(function(){$("#answerform").hide(),$("#newanswer").show()})}),$(document).ready(function(){$("#showanswers").click(function(){$("#answers").toggle()})}),$(document).ready(function(){$("a.add-answer-comment").click(function(){$(this).parent().siblings("ul").children("div.content-bg.comment-form").show(),$(this).hide()})}),$(document).ready(function(){$("a.cancel-answer-comment").click(function(){$(this).parent().hide(),$(this).parent().parent().siblings("p").children($(" .add-answer-comment")).show()})}),function(){}.call(this),function(){}.call(this),$(document).ready(function(){$("a.reply-comment").click(function(){$(this).siblings("ul").children("div.white-bg.comment-form").show(),$(this).hide()})}),$(document).ready(function(){$("a.cancel-comment-comment").click(function(){$(this).parent().hide(),$(this).parent().parent().siblings($(".reply-comment")).show()})}),$(document).ready(function(){$("#nav-doc").affix({offset:{top:50}})}),function(){$(document).on("page:change",function(){return $("a.vote").click(function(){return $(this).toggleClass("active")})})}.call(this),function(){}.call(this),$(document).ready(function(){$("#deviseform").click(function(){"Sign in"==$(this).text()?($("div#register").hide(),$("div#login").show(),$(this).text("Sign up")):($("div#register").show(),$("div#login").hide(),$(this).text("Sign in"))})}),$(document).ready(function(){$("#planlink").click(function(){$("#plan").toggle()})}),$(document).ready(function(){$("#bplink").click(function(){$("#bp").toggle()})}),$(document).ready(function(){$("#prototypelink").click(function(){$("#prototype").toggle()})}),$(document).ready(function(){$("#designlink").click(function(){$("#design").toggle()})}),$(document).ready(function(){doBounce($("#help"),"10px",300),$("#help").on({mouseenter:function(){$("#help").stop(!0,!0).removeAttr("style"),$("#close").show()},mouseleave:function(){doBounce($(this),"10px",300),$("#close").hide()}}),$("#help").click(function(){$("#helpcontent").hide(),$("#navhelp").show()})}),$(document).ready(function(){doBounce($("#helpnav"),"10px",300),$("#helpnav").on({mouseenter:function(){$("#helpnav").stop(!0,!0).removeAttr("style"),$("#closenav").show()},mouseleave:function(){doBounce($(this),"10px",300),$("#closenav").hide()}}),$("#helpnav").click(function(){$("#navhelp").hide(),$("#archivehelp").show()})}),$(document).ready(function(){doBounce($("#helpimg"),"10px",300),$("#helpimg").on({mouseenter:function(){$("#helpimg").stop(!0,!0).removeAttr("style"),$("#closeimg").show()},mouseleave:function(){doBounce($(this),"10px",300),$("#closeimg").hide()}}),$("#helpimg").click(function(){$("#imghelp").hide(),$("#buyhelp").show()})}),$(document).ready(function(){doBounce($("#helparchive"),"10px",300),$("#helparchive").on({mouseenter:function(){$("#helparchive").stop(!0,!0).removeAttr("style"),$("#closearchive").show()},mouseleave:function(){doBounce($(this),"10px",300),$("#closearchive").hide()}}),$("#helparchive").click(function(){$("#archivehelp").hide(),$("#buyhelp").show()})}),$(document).ready(function(){doBounce($("#helpbuy"),"10px",300),$("#helpbuy").on({mouseenter:function(){$("#helpbuy").stop(!0,!0).removeAttr("style"),$("#closebuy").show()},mouseleave:function(){doBounce($(this),"10px",300),$("#closebuy").hide()}}),$("#helpbuy").click(function(){$("#buyhelp").hide()})}),$(document).ready(function(){$("selector").popover(options)});var options={placement:function(t,e){var n=$(e).parent().offset();return n.top<110?"bottom":n.left>515?"left":n.left<515?"right":"top"},trigger:"hover",html:!0,container:"body"};(function(){}).call(this),$(document).ready(function(){$("a.hidecomments").click(function(){$(this).next().next().next().hide(),$(this).hide(),$(this).next().show()})}),$(document).ready(function(){$("a.showcomments").click(function(){$(this).next().next().show(),$(this).hide(),$(this).prev().show()})}),$(document).ready(function(){$("#newpost").click(function(){$("#posts").show(),$(this).hide()})}),$(document).ready(function(){$("#cancel").click(function(){$("#posts").hide(),$("#newpost").show()})}),$(document).ready(function(){$("a.showstats").click(function(){$(this).text(),"Show User Statistics"==$(this).text()?($(this).siblings($("div.userstats.white-bg")).show(),$(this).text("Hide User Statistics")):($(this).siblings("div.userstats.white-bg").hide(),$(this).text("Show User Statistics"))})}),$(document).ready(function(){$(" .vote-tooltip").tooltip({trigger:"hover",placement:"bottom",container:"body",html:!0})}),$(document).ready(function(){$("a.pull-right.showcomments").click(function(){"Hide Comments"==$(this).text()?(console.log($(this).parent().parent().parent().siblings().children()),$(this).siblings().show(),$(this).parent().parent().parent().siblings().children("ul.media-list.comments.answer-comments").hide(),$(this).text("Show Comments")):($(this).parent().parent().parent().siblings().children("ul.media-list.comments.answer-comments").show(),$(this).text("Hide Comments"))})}),$(document).ready(function(){$("a.pull-right.comment").click(function(){$(this).parent().parent().parent().siblings().children("ul").children(".commentform").show(),$(this).hide(),$(this).siblings(" .link-dis.pull-right").hide()})}),$(document).ready(function(){$("a.cancel-comment").click(function(){$(this).parent().hide(),$(this).parent().parent().parent().siblings().children().children().children().show()})}),function(){}.call(this),$(document).ready(function(){$("a.showactivity").click(function(){$(this).text(),"Show User Activity"==$(this).text()?($(this).siblings($("div.activity")).show(),$(this).text("Hide User Activity")):($(this).siblings("div.activity").hide(),$(this).text("Show User Activity"))})}),$(document).ready(function(){$("a.showskill").click(function(){$(this).siblings($("span.skillstats")).children(" .breakdowncomponent").toggle()})}),$(document).ready(function(){$("#hidecomments").click(function(){$("#questioncomments").hide(),$("#showcomments").show(),$("#hidecomments").hide()})}),$(document).ready(function(){$("#showcomments").click(function(){$("#questioncomments").show(),$("#hidecomments").show(),$("#showcomments").hide()})}),$(document).ready(function(){doBounce($("#questhelp"),"10px",300),$("#questhelp").on({mouseenter:function(){$("#questhelp").stop(!0,!0).removeAttr("style"),$("#closequest").show()},mouseleave:function(){window.nomouse=!0,doBounce($(this),"10px",300),$("#closequest").hide()}}),$("#questhelp").click(function(){$("#popquest").hide(),$("#helpans").show()})}),$(document).ready(function(){doBounce($("#anshelp"),"10px",300),$("#anshelp").on({mouseenter:function(){$("#anshelp").stop(!0,!0).removeAttr("style"),$("#closeans").show()},mouseleave:function(){doBounce($(this),"10px",300),$("#closeans").hide()}}),$("#anshelp").click(function(){$("#helpans").hide()})}),$(document).ready(function(){$("a.add-question-comment").click(function(){$(this).parent().siblings("ul").children("div.content-bg.comment-form").show(),$(this).hide()})}),$(document).ready(function(){$("a.cancel-question-comment").click(function(){$(this).parent().hide(),$(this).parent().parent().siblings("p").children($(" .add-question-comment")).show()})}),$(document).ready(function(){$("a.showsolcomments").click(function(){$(this).text(),"Show Solution Comments"==$(this).text()?($(this).siblings($("div.activity.content-bg")).show(),$(this).text("Hide Solution Comments")):($(this).siblings("div.solutioncomments").hide(),$(this).text("Show Solution Comments"))})}),$(document).ready(function(){$("a.showcomments").click(function(){$(this).show(),$(this).children().toggle(),$(this).siblings("button").toggle(),$(this).parent().siblings("ul").toggle()})}),$(document).ready(function(){$("button.btn.btn-info.pull-right.comment").click(function(){$(this).parent().siblings("ul").children("div").show(),$(this).hide()})}),$(document).ready(function(){$("a.cancel-comment").click(function(){$(this).parent().hide(),$(this).parent().parent().prev().prev().children("button").show()})}),$(document).ready(function(){$("a.showapps").click(function(){$("#apps").toggle()})}),$(document).ready(function(){$("#newapp").click(function(){$("#teamapps").show(),$(this).hide()})}),$(document).ready(function(){$("#cancel").click(function(){$("#teamapps").hide(),$("#newapp").show()})}),$(document).ready(function(){$("#tooltip2").tooltip({trigger:"hover",placement:"bottom",container:"body",html:!0})}),function(){}.call(this),function(){}.call(this),$(document).on("page:fetch",function(){$(".container-main").fadeTo(40,.6)}),$(document).on("page:change",function(){$(".container-main").css("opacity","1")}),$(document).ready(function(){function t(t,e,n,i){for(var o=0;e>o;o++)t.animate({marginTop:"-="+n},i).animate({marginTop:"+="+n},i)}t($("#help"),10,"10px",300),$("#help").on({mouseenter:function(){$("#help").stop(!0,!0).removeAttr("style"),$("#close").show()},mouseleave:function(){window.nomouse=!0,t($(this),10,"10px",300),$("#close").hide()}}),$("#help").click(function(){$("#pop").hide()})}),$(document).ready(function(){$("selector").popover({trigger:"hover",placement:"bottom",container:"body",html:!0})}),$(document).ready(function(){$("#tooltip").tooltip({trigger:"hover",placement:"bottom",container:"body",html:!0})}),$(document).ready(function(){$(" .chatform.form-control").keypress(function(t){return 13!=t.keyCode||t.shiftKey?void(13==t.keyCode&&t.shiftKey&&$(this).val($(this).val()+"\n")):($(this).closest("form").trigger("submit"),$(this).val().replace("\n","<br />","g"),!1)})}),$(document).ready(function(){$("body").on("click",function(t){$('[data-toggle="popover"]').each(function(){$(this).is(t.target)||0!==$(this).has(t.target).length||0!==$(".popover").has(t.target).length||$(this).popover("hide")})})}),$(document).ready(function(){$("#chats").animate({scrollTop:$("#chats").prop("scrollHeight")},10)}),$(document).ready(function(){$("a#notifications").popover({trigger:"click",container:"body",placement:"bottom",html:!0}).on("show.bs.popover",function(){$(this).data("bs.popover").tip().css("max-width","300px")})});